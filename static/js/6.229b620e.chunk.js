(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[6],{177:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n(28),i=n.n(a),r=n(24),c=n(47),s=n(31),o=n(32),u=n(39),l=n(46),d=new(function(){function t(e){Object(s.a)(this,t),this.http=e}return Object(o.a)(t,[{key:"create",value:function(){var t=Object(c.a)(i.a.mark((function t(e){var n,a,c,s,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.title,a=e.description,c=e.visibility,s=e.cards,t.next=3,this.http.post("/decks",{authorId:u.a.getCurrentUser(),title:n,description:a,visibility:c,cards:s.map((function(t){var e=Object(r.a)(t.sides,2);return{frontText:e[0].text,backText:e[1].text}}))});case 3:return o=t.sent,l=o.data,t.abrupt("return",l);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findOne",value:function(){var t=Object(c.a)(i.a.mark((function t(e){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks/".concat(e));case 2:return n=t.sent,a=n.data,t.abrupt("return",b(a));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=Object(c.a)(i.a.mark((function t(e){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks",{params:e});case 2:return n=t.sent,a=n.data,t.abrupt("return",{decks:a.decks.map(b),count:a.count});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(c.a)(i.a.mark((function t(e){var n,a,c,s,o,l,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,a=e.title,c=e.description,s=e.visibility,o=e.cards,t.next=3,this.http.put("/decks/".concat(n),{authorId:u.a.getCurrentUser(),title:a,description:c,visibility:s,cards:o.map((function(t){var e=t.id,n=Object(r.a)(t.sides,2);return{id:e,frontText:n[0].text,backText:n[1].text}}))});case 3:return l=t.sent,d=l.data,t.abrupt("return",d);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=Object(c.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.delete("/decks/".concat(e)));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(l.a);function b(t){return{id:t.id,authorId:t.authorId,title:t.title,description:t.description,visibility:t.visibility,cards:t.cards.map((function(t){return{id:t.id,sides:[{text:t.frontText},{text:t.backText}]}})),tags:[]}}},178:function(t,e,n){"use strict";e.a="This field is required."},179:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(24),i=n(192),r=n(4),c=n(0),s=n(157),o=Object(s.a)({root:{display:"flex",justifyContent:"center"}}),u=n(2);function l(t){var e=t.loading,n=t.children,s=t.className,l=t.delay,d=void 0===l?300:l,b=o(),f=Object(c.useState)(d<=0),p=Object(a.a)(f,2),j=p[0],h=p[1];return Object(c.useEffect)((function(){var t=setTimeout((function(){h(!0)}),d);return function(){return clearTimeout(t)}}),[d]),e?Object(u.jsx)("div",{className:Object(r.a)(b.root,s),children:j&&Object(u.jsx)(i.a,{})}):Object(u.jsx)(u.Fragment,{children:n})}},182:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=6e3},185:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(59);var i=n(66);function r(t){return function(t){if(Array.isArray(t))return Object(a.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(i.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},193:function(t,e,n){"use strict";var a=n(157),i=Object(a.a)((function(t){return{backdrop:{zIndex:t.zIndex.appBar+1}}}));e.a=i},194:function(t,e,n){"use strict";var a=n(1),i=n(3),r=n(22),c=n(0),s=(n(6),n(4)),o=n(5),u=n(7),l=c.forwardRef((function(t,e){var n=t.classes,r=t.className,o=t.component,l=void 0===o?"div":o,d=t.disableGutters,b=void 0!==d&&d,f=t.fixed,p=void 0!==f&&f,j=t.maxWidth,h=void 0===j?"lg":j,v=Object(i.a)(t,["classes","className","component","disableGutters","fixed","maxWidth"]);return c.createElement(l,Object(a.a)({className:Object(s.a)(n.root,r,p&&n.fixed,b&&n.disableGutters,!1!==h&&n["maxWidth".concat(Object(u.a)(String(h)))]),ref:e},v))}));e.a=Object(o.a)((function(t){return{root:Object(r.a)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:t.spacing(2),paddingRight:t.spacing(2),display:"block"},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(t.breakpoints.values).reduce((function(e,n){var a=t.breakpoints.values[n];return 0!==a&&(e[t.breakpoints.up(n)]={maxWidth:a}),e}),{}),maxWidthXs:Object(r.a)({},t.breakpoints.up("xs"),{maxWidth:Math.max(t.breakpoints.values.xs,444)}),maxWidthSm:Object(r.a)({},t.breakpoints.up("sm"),{maxWidth:t.breakpoints.values.sm}),maxWidthMd:Object(r.a)({},t.breakpoints.up("md"),{maxWidth:t.breakpoints.values.md}),maxWidthLg:Object(r.a)({},t.breakpoints.up("lg"),{maxWidth:t.breakpoints.values.lg}),maxWidthXl:Object(r.a)({},t.breakpoints.up("xl"),{maxWidth:t.breakpoints.values.xl})}}),{name:"MuiContainer"})(l)},200:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var a=n(40),i=n(185),r=n(24),c=n(338),s=n(171),o=n(162),u=n(324),l=n(0),d=n(178),b=n(203),f=n(130),p=n(161),j=n(51),h=Object(j.a)(l.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),v=Object(j.a)(l.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),x=Object(j.a)(l.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),O=n(157),m=Object(O.a)((function(t){return{textFieldContainer:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:t.spacing(2)},cardContent:{display:"flex",flexDirection:"column",gap:t.spacing(1),margin:t.spacing(2)},actionArea:{display:"flex",justifyContent:"flex-end"}}})),g=n(2);function y(t){var e=t.cardNumber,n=t.frontText,a=t.backText,i=t.forceValidate,s=t.onFrontTextChange,o=t.onBackTextChange,u=t.onDelete,j=t.onMoveUp,O=t.onMoveDown,y=m(),k=Object(l.useState)(!1),C=Object(r.a)(k,2),T=C[0],w=C[1],S=n.length>0,N=(i||T)&&!S,W=Object(l.useState)(!1),D=Object(r.a)(W,2),I=D[0],L=D[1],M=a.length>0,V=(i||I)&&!M;return Object(g.jsx)(b.a,{children:Object(g.jsxs)("div",{className:y.cardContent,children:[Object(g.jsx)(f.a,{variant:"h5",children:"Card ".concat(e)}),Object(g.jsxs)("div",{className:y.textFieldContainer,children:[Object(g.jsx)(c.a,{label:"Term",required:!0,variant:"outlined",multiline:!0,value:n,error:N,helperText:N?d.a:void 0,onChange:function(t){w(!0),s(t.target.value)},inputProps:{"aria-label":"term"}}),Object(g.jsx)(c.a,{label:"Definition",required:!0,variant:"outlined",multiline:!0,value:a,error:V,helperText:V?d.a:void 0,onChange:function(t){L(!0),o(t.target.value)},inputProps:{"aria-label":"definition"}})]}),Object(g.jsxs)("div",{className:y.actionArea,children:[Object(g.jsx)(p.a,{"aria-label":"delete",onClick:u,disabled:!u,children:Object(g.jsx)(h,{})}),Object(g.jsx)(p.a,{"aria-label":"move up",onClick:j,disabled:!j,children:Object(g.jsx)(v,{})}),Object(g.jsx)(p.a,{"aria-label":"move down",onClick:O,disabled:!O,children:Object(g.jsx)(x,{})})]})]})})}var k=Object(O.a)((function(t){return{form:{display:"flex",flexDirection:"column",gap:t.spacing(3),marginTop:t.spacing(3),marginBottom:t.spacing(3)},generalInfoContainer:{display:"flex",flexDirection:"column",gap:t.spacing(2)},cardList:{display:"flex",flexDirection:"column",gap:t.spacing(2)},saveButtonContainer:{display:"flex",justifyContent:"flex-end"}}}));function C(t){var e=t.title,n=t.description,b=t.visibility,f=t.cards,p=t.onTitleChange,j=t.onDescriptionChange,h=t.onChangeVisibility,v=t.onCardsChange,x=t.onSubmit,O=k(),m=Object(l.useState)(!1),C=Object(r.a)(m,2),T=C[0],w=C[1],S=Object(l.useState)(!1),N=Object(r.a)(S,2),W=N[0],D=N[1],I=(W||T)&&0===e.length,L=function(t,e,n){var r=Object(i.a)(f),c=Object(a.a)({},f[t]);c.sides[e].text=n,r[t]=c,v(r)},M=function(t,e){var n=Object(i.a)(f);n.splice(e,0,n.splice(t,1)[0]),v(n)};return Object(g.jsxs)("form",{noValidate:!0,className:O.form,onSubmit:function(t){t.preventDefault(),0===e.length||f.some((function(t){return t.sides.some((function(t){return 0===t.text.length}))}))?D(!0):x()},children:[Object(g.jsxs)("div",{className:O.generalInfoContainer,children:[Object(g.jsx)(c.a,{required:!0,variant:"outlined",label:"Title",fullWidth:!0,error:I,helperText:I?d.a:void 0,value:e,onChange:function(t){w(!0),p(t.target.value)},inputProps:{"aria-label":"title"}}),Object(g.jsx)(c.a,{variant:"outlined",label:"Description",fullWidth:!0,value:n,onChange:function(t){return j(t.target.value)},inputProps:{"aria-label":"description"}}),Object(g.jsxs)(c.a,{variant:"outlined",value:b,onChange:function(t){return h(t.target.value)},select:!0,label:"Visibility",inputProps:{"aria-label":"visibility"},children:[Object(g.jsx)(s.a,{value:"PRIVATE",children:"Private"}),Object(g.jsx)(s.a,{value:"PUBLIC",children:"Public"})]})]}),Object(g.jsx)("div",{className:O.cardList,children:f.map((function(t,e){var n=Object(r.a)(t.sides,2),a=n[0].text,c=n[1].text;return Object(g.jsx)(y,{forceValidate:W,cardNumber:e+1,frontText:a,backText:c,onFrontTextChange:function(t){return L(e,0,t)},onBackTextChange:function(t){return L(e,1,t)},onDelete:f.length>1?function(){return t=e,void v([].concat(Object(i.a)(f.slice(0,t)),Object(i.a)(f.slice(t+1))));var t}:void 0,onMoveUp:0!==e?function(){return M(e,e-1)}:void 0,onMoveDown:e!==f.length-1?function(){return M(e,e+1)}:void 0},e)}))}),Object(g.jsx)(o.a,{variant:"outlined",fullWidth:!0,startIcon:Object(g.jsx)(u.a,{}),onClick:function(){v([].concat(Object(i.a)(f),[{sides:[{text:""},{text:""}]}]))},children:"Add card"}),Object(g.jsx)("div",{className:O.saveButtonContainer,children:Object(g.jsx)(o.a,{type:"submit",variant:"contained",color:"primary",children:"Save"})})]})}},203:function(t,e,n){"use strict";var a=n(1),i=n(3),r=n(0),c=(n(6),n(4)),s=n(129),o=n(5),u=r.forwardRef((function(t,e){var n=t.classes,o=t.className,u=t.raised,l=void 0!==u&&u,d=Object(i.a)(t,["classes","className","raised"]);return r.createElement(s.a,Object(a.a)({className:Object(c.a)(n.root,o),elevation:l?8:1,ref:e},d))}));e.a=Object(o.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(u)},329:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return v}));var a=n(40),i=n(24),r=n(316),c=n(192),s=n(194),o=n(339),u=n(0),l=n(9),d=n(179),b=n(182),f=n(200),p=n(177),j=n(193),h=n(2);function v(){var t=Object(j.a)(),e=Object(l.i)().id,n=Object(u.useState)(!1),v=Object(i.a)(n,2),x=v[0],O=v[1],m=Object(l.g)(),g=Object(u.useState)(null),y=Object(i.a)(g,2),k=y[0],C=y[1],T=Object(u.useState)(!0),w=Object(i.a)(T,2),S=w[0],N=w[1],W=Object(u.useState)(!1),D=Object(i.a)(W,2),I=D[0],L=D[1],M=Object(u.useState)(""),V=Object(i.a)(M,2),A=V[0],E=V[1];return Object(u.useEffect)((function(){N(!0),p.a.findOne(e).then((function(t){return C(t)})).finally((function(){return N(!1)}))}),[e]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(r.a,{open:x,className:t.backdrop,children:Object(h.jsx)(c.a,{color:"inherit"})}),Object(h.jsx)(d.a,{loading:S,children:k&&Object(h.jsx)(s.a,{children:Object(h.jsx)(f.a,{title:k.title,description:k.description,visibility:k.visibility,cards:k.cards,onTitleChange:function(t){return C((function(e){return e?Object(a.a)(Object(a.a)({},e),{},{title:t}):e}))},onDescriptionChange:function(t){return C((function(e){return e?Object(a.a)(Object(a.a)({},e),{},{description:t}):e}))},onChangeVisibility:function(t){return C((function(e){return e?Object(a.a)(Object(a.a)({},e),{},{visibility:t}):e}))},onCardsChange:function(t){return C((function(e){return e?Object(a.a)(Object(a.a)({},e),{},{cards:t}):e}))},onSubmit:function(){O(!0),p.a.update({id:k.id,title:k.title,description:k.description,visibility:k.visibility,cards:k.cards,tags:[]}).then((function(){return m.goBack()})).catch((function(){E("Failed to update deck."),L(!0),O(!1)}))}})})}),Object(h.jsx)(o.a,{open:I,message:A,autoHideDuration:b.a,onClose:function(){return L(!1)}})]})}}}]);
//# sourceMappingURL=6.229b620e.chunk.js.map