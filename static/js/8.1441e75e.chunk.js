(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[8],{124:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(0),c=0;function r(){return Object(a.useRef)("uid".concat(c++)).current}},125:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(49),c=n(349);function r(){var t=Object(a.a)();return Object(c.a)(t.breakpoints.down("xs"),{noSsr:!0})}},126:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n(387),c=n(348),r=n(20),i=n(347),o=Object(i.a)((function(t){return{root:{color:t.palette.getContrastText(t.palette.grey[600]),backgroundColor:t.palette.grey[600],display:"flex"},text:{fontSize:t.typography.h4.fontSize,fontWeight:t.typography.fontWeightBold}}})),s=n(2);function u(t){var e=t.username,n=t.className,i=t.typographyClassName,u=o();return Object(s.jsx)(a.a,{className:Object(r.a)(u.root,n),"aria-hidden":!0,children:void 0!==e&&Object(s.jsx)(c.a,{className:Object(r.a)(u.text,i),component:"div",children:e.substring(0,1).toLocaleUpperCase()})})}},127:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var a=n(360),c=n(354),r=n(0);var i=n(27),o=n(329),s=n(348),u=n(352),l=n(388),d=n(353),j=n(351),p=n(389),b=n(355),h=n(358),f=n(359),O=n(356),x=n(357),v=n(20),m=n(3),g=n(28),k=n(29),y=n(45),C=n(125),w=n(7),S=n(46),N=n(347),B=Object(N.a)((function(t){var e;return{button:{whiteSpace:"nowrap"},homeLink:{textTransform:"none"},titleContainer:{flexGrow:1},avatarButton:{padding:t.spacing(.5)},avatarText:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightBold},menuUsername:{textAlign:"center",padding:t.spacing(1),fontWeight:t.typography.fontWeightBold},searchBar:(e={},Object(S.a)(e,t.breakpoints.down("xs"),{width:"100%"}),Object(S.a)(e,"maxWidth","600px"),Object(S.a)(e,"width","100%"),e),searchBarInput:Object(S.a)({paddingLeft:t.spacing(1),paddingRight:t.spacing(1),paddingTop:t.spacing(.5),paddingBottom:t.spacing(.5),width:"100%"},t.breakpoints.down("xs"),{paddingRight:0}),toolbar:{gap:t.spacing(1)}}})),I=n(126),T=n(2);function D(){var t=B(),e=Object(m.h)(),n=Object(C.a)(),a=Object(r.useState)(null),S=Object(i.a)(a,2),N=S[0],D=S[1],L=Object(r.useContext)(k.a),E=function(){return D(null)},A=Object(m.g)(),U=Object(r.useState)(!1),R=Object(i.a)(U,2),F=R[0],z=R[1],W=Object(r.useState)(""),P=Object(i.a)(W,2),J=P[0],G=P[1],M=new URLSearchParams(e.search).get("from"),q=null!==M&&void 0!==M?M:w.a.home,H=Object(T.jsxs)(o.a,{open:null!==N,anchorEl:N,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},getContentAnchorEl:void 0,onClose:E,children:[Object(T.jsx)(s.a,{className:t.menuUsername,children:null===L||void 0===L?void 0:L.username.toLocaleUpperCase()}),Object(T.jsx)(u.a,{}),Object(T.jsx)(l.a,{onClick:function(){E(),A.push(w.a.accountSettings)},children:"Manage account"}),Object(T.jsx)(l.a,{onClick:function(){D(null),y.a.logOut().then((function(){return A.push(w.a.home)}))},children:"Sign out"})]}),V=Object(T.jsx)(I.a,{username:null===L||void 0===L?void 0:L.username}),Y=y.a.isAuthenticated()?Object(T.jsx)(d.a,{"aria-label":"Account settings",className:t.avatarButton,color:"inherit",onClick:function(t){return D(t.currentTarget)},children:V}):Object(T.jsx)(c.a,{className:t.button,component:g.b,to:w.a.login,color:"inherit",children:"Log in"}),K=Object(T.jsx)(j.a,{className:t.searchBar,children:Object(T.jsx)("form",{onSubmit:function(t){t.preventDefault(),A.push({pathname:w.a.deckSearch,search:"?from=".concat(encodeURIComponent(e.pathname),"&term=").concat(encodeURIComponent(J))})},children:Object(T.jsx)(p.a,{inputProps:{"aria-label":"Search"},value:J,autoFocus:n,fullWidth:n,placeholder:"Search",className:t.searchBarInput,startAdornment:Object(T.jsx)(b.a,{position:"start",children:Object(T.jsx)(O.a,{})}),endAdornment:n?Object(T.jsx)(b.a,{position:"end",children:Object(T.jsx)(d.a,{"aria-label":"close search",onClick:e.pathname===w.a.deckSearch?function(){z(!1),G(""),A.push(q)}:function(){z(!1),G("")},children:Object(T.jsx)(x.a,{})})}):void 0,onChange:function(t){return G(t.target.value)}})})}),Q=Object(T.jsx)(h.a,{className:t.toolbar,children:e.pathname===w.a.deckSearch||F?K:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:t.titleContainer,children:Object(T.jsx)(c.a,{color:"inherit",component:g.b,to:w.a.home,className:Object(v.a)(t.button,t.homeLink),children:Object(T.jsx)(s.a,{variant:"h6",component:"span",children:"Basic Flashcards"})})}),Object(T.jsx)(d.a,{"aria-label":"toggle search",color:"inherit",onClick:function(){return z(!0)},children:Object(T.jsx)(O.a,{})}),Y]})}),X=Object(T.jsxs)(h.a,{className:t.toolbar,children:[Object(T.jsx)("div",{className:t.titleContainer,children:Object(T.jsx)(c.a,{color:"inherit",component:g.b,to:w.a.home,className:Object(v.a)(t.button,t.homeLink),children:Object(T.jsx)(s.a,{variant:"h6",component:"span",children:"Basic Flashcards"})})}),K,Y]});return Object(T.jsxs)(f.a,{position:"sticky",children:[H,n?Q:X]})}var L=Object(N.a)((function(t){return{page:{display:"flex",flexDirection:"column",height:"100%"},content:{flexGrow:1,overflow:"auto"},skipLink:{position:"fixed",top:t.spacing(-10),left:t.spacing(2),color:t.palette.secondary.dark,backgroundColor:t.palette.background.paper,textTransform:"none",zIndex:t.zIndex.appBar+1,transition:t.transitions.create(["top"],{duration:t.transitions.duration.leavingScreen,easing:t.transitions.easing.easeOut}),"&:focus":{top:t.spacing(2),left:t.spacing(2),textDecoration:"underline",transition:t.transitions.create(["top"],{duration:t.transitions.duration.enteringScreen,easing:t.transitions.easing.easeIn})}}}}));function E(t){var e=t.title,n=t.skipLinks,i=t.children,o=L();!function(t){Object(r.useEffect)((function(){var t=document.title;return function(){document.title=t}}),[]),Object(r.useEffect)((function(){document.title="".concat(t," - Basic Flashcards")}),[t])}(e);return Object(T.jsxs)(T.Fragment,{children:[void 0!==n&&Object(T.jsx)(T.Fragment,{children:n.map((function(t,e){var n=t.fragment,r=t.text;return Object(T.jsx)(a.a,{className:o.skipLink,tabIndex:0,onClick:function(t){t.target.blur(),function(t){var e=document.querySelector("#".concat(t));null===e||void 0===e||e.scrollIntoView(),null===e||void 0===e||e.focus()}(n)},component:c.a,color:"secondary",disableRipple:!0,children:r},e)}))}),Object(T.jsxs)("div",{className:o.page,children:[Object(T.jsx)(D,{}),Object(T.jsx)("div",{className:o.content,children:i})]})]})}},130:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(21),c=n(377),r=n(124),i=n(2);function o(t){var e=Object(r.a)();return Object(i.jsx)(c.a,Object(a.a)({id:e},t))}},132:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n(14),c=n.n(a),r=n(27),i=n(23),o=n(18),s=n(19),u=n(45),l=n(30),d=new(function(){function t(e){Object(o.a)(this,t),this.http=e}return Object(s.a)(t,[{key:"create",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a,i,o,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.title,a=e.description,i=e.visibility,o=e.cards,t.next=3,this.http.post("/decks",{authorId:u.a.getCurrentUser(),title:n,description:a,visibility:i,cards:o.map((function(t){var e=Object(r.a)(t.sides,2);return{frontText:e[0].text,backText:e[1].text}}))});case 3:return s=t.sent,l=s.data,t.abrupt("return",l);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findOne",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks/".concat(e));case 2:return n=t.sent,a=n.data,t.abrupt("return",j(a));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks",{params:e});case 2:return n=t.sent,a=n.data,t.abrupt("return",{decks:a.decks.map(j),count:a.count});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a,i,o,s,l,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,a=e.title,i=e.description,o=e.visibility,s=e.cards,t.next=3,this.http.put("/decks/".concat(n),{authorId:u.a.getCurrentUser(),title:a,description:i,visibility:o,cards:s.map((function(t){var e=t.id,n=Object(r.a)(t.sides,2);return{id:e,frontText:n[0].text,backText:n[1].text}}))});case 3:return l=t.sent,d=l.data,t.abrupt("return",d);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.delete("/decks/".concat(e)));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(l.a);function j(t){return{id:t.id,authorId:t.authorId,title:t.title,description:t.description,visibility:t.visibility,cards:t.cards.map((function(t){return{id:t.id,sides:[{text:t.frontText},{text:t.backText}]}})),tags:[]}}},135:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(27),c=n(179),r=n(20),i=n(0),o=n(347),s=Object(o.a)({root:{display:"flex",justifyContent:"center"}}),u=n(2);function l(t){var e=t.loading,n=t.children,o=t.className,l=t.delay,d=void 0===l?300:l,j=s(),p=Object(i.useState)(d<=0),b=Object(a.a)(p,2),h=b[0],f=b[1];return Object(i.useEffect)((function(){var t=setTimeout((function(){f(!0)}),d);return function(){return clearTimeout(t)}}),[d]),e?Object(u.jsx)("div",{className:Object(r.a)(j.root,o),children:h&&Object(u.jsx)(c.a,{})}):Object(u.jsx)(u.Fragment,{children:n})}},139:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=6e3},142:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(360),c=n(28),r=n(2);function i(t){var e=t.to,n=t.color,i=t.children;return Object(r.jsx)(a.a,{component:c.b,to:e,color:n,children:i})}},152:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(351),c=n(348),r=n(354),i=n(142);var o=n(347),s=Object(o.a)((function(t){return{root:{padding:t.spacing(2)},title:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},buttonBox:{display:"flex",justifyContent:"flex-end"},deleteButton:{color:t.palette.error.main}}})),u=n(2);function l(t){var e,n=t.title,o=t.deckId,l=t.numberOfCards,d=t.author,j=t.onDelete,p=t.onExport,b=t.onEdit,h=s();return Object(u.jsxs)(a.a,{className:h.root,children:[Object(u.jsx)(i.a,{to:(e=o,"/decks/".concat(e)),children:Object(u.jsx)(c.a,{className:h.title,variant:"h5",component:"div",children:n})}),Object(u.jsx)(c.a,{children:"".concat(l," cards")}),d&&Object(u.jsxs)(c.a,{onClick:function(t){return t.stopPropagation()},component:"span",children:["By ",Object(u.jsx)(i.a,{to:"/users/".concat(d),children:d})]}),(j||p||b)&&Object(u.jsxs)("div",{className:h.buttonBox,children:[j&&Object(u.jsx)(r.a,{className:h.deleteButton,onClick:function(t){t.stopPropagation(),j()},children:"Delete"}),p&&Object(u.jsx)(r.a,{onClick:function(t){t.stopPropagation(),p()},children:"Export"}),b&&Object(u.jsx)(r.a,{color:"primary",onClick:function(t){t.stopPropagation(),b()},children:"Edit"})]})]})}},380:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return U}));var a=n(21),c=n(27),r=n(49),i=n(348),o=n(388),s=n(354),u=n(370),l=n(330),d=n(362),j=n(327),p=n(0),b=n(3),h=n(28),f=n(7);var O=n(125),x=n(132),v=n(152),m=n(46),g=n(347),k=Object(g.a)((function(t){return{content:{display:"flex",flexDirection:"column",gap:t.spacing(2),padding:t.spacing(3)},paginationContainer:{display:"flex",flexDirection:"column",gap:t.spacing(2)},paginationControls:{display:"flex",justifyContent:"center"},deckList:{display:"flex",flexDirection:"column",gap:t.spacing(1)},sortAndSearchContainer:{display:"flex",gap:t.spacing(2)},fab:{position:"fixed",bottom:t.spacing(2),right:t.spacing(2)},buttonBox:{display:"flex",alignItems:"center",gap:t.spacing(1),marginLeft:"auto"},uploadInput:{display:"none"},snackbar:Object(m.a)({},t.breakpoints.down("xs"),{bottom:90})}})),y=n(29),C=n(365),w=n(366),S=n(367),N=n(368),B=n(369),I=n(2);function T(t){var e=t.deckTitle,n=t.open,a=t.onBackDropClick,c=t.onCancel,r=t.onDelete,i=t.onExited;return Object(I.jsxs)(C.a,{open:n,onBackdropClick:a,onExited:i,children:[Object(I.jsx)(w.a,{children:"Delete deck?"}),Object(I.jsxs)(S.a,{children:[Object(I.jsxs)(N.a,{children:['Are you sure you want to delete deck "',e,'"? This action cannot be undone.']}),Object(I.jsxs)(B.a,{children:[Object(I.jsx)(s.a,{color:"primary",autoFocus:!0,onClick:c,children:"Cancel"}),Object(I.jsx)(s.a,{color:"primary",onClick:r,children:"Delete"})]})]})]})}var D=n(139),L=n(135),E=n(130),A=n(127);function U(t){var e,n,m=t.pageSize,g=void 0===m?10:m,C=Object(r.a)(),w=Object(O.a)(),S=(null!==(e=Object(p.useContext)(y.a))&&void 0!==e?e:{}).id;if(!S)throw new Error("Unexpected nullish value: userId");var N=Object(p.useState)(!0),B=Object(c.a)(N,2),U=B[0],R=B[1],F=Object(p.useState)([]),z=Object(c.a)(F,2),W=z[0],P=z[1],J=Object(p.useState)(0),G=Object(c.a)(J,2),M=G[0],q=G[1],H=Object(p.useState)(1),V=Object(c.a)(H,2),Y=V[0],K=V[1],Q=Object(p.useState)(!1),X=Object(c.a)(Q,2),Z=X[0],$=X[1],_=Object(b.g)(),tt=k(),et=Object(p.useState)(""),nt=Object(c.a)(et,2),at=nt[0],ct=nt[1],rt=function(t,e){var n=Object(p.useState)(t),a=Object(c.a)(n,2),r=a[0],i=a[1],o=Object(p.useRef)(Date.now());return Object(p.useEffect)((function(){var n=setTimeout((function(){i(t),o.current=Date.now()}),e-(Date.now()-o.current));return function(){return clearTimeout(n)}}),[t,e]),r}(at,C.transitions.duration.short),it=function(t){var e=JSON.stringify(t,void 0,2);!function(t){var e=window.URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download="",n.click(),window.URL.revokeObjectURL(e)}(new Blob([e],{type:"application/json"}))},ot=function(t){$(!0),x.a.findAll(Object(a.a)({},t)).then((function(t){P(t.decks),q(t.count)})).finally((function(){$(!1),R(!1)}))};Object(p.useEffect)((function(){ot({authorId:[S],orderTitleBy:"asc",take:g,skip:(Y-1)*g,caseInsensitive:!0,titleContains:rt||void 0})}),[Y,g,rt,S]);var st=Object(p.useState)(!1),ut=Object(c.a)(st,2),lt=ut[0],dt=ut[1],jt=Object(p.useState)(null),pt=Object(c.a)(jt,2),bt=pt[0],ht=pt[1],ft=Object(p.useState)(!1),Ot=Object(c.a)(ft,2),xt=Ot[0],vt=Ot[1],mt=Object(p.useState)(""),gt=Object(c.a)(mt,2),kt=gt[0],yt=gt[1];return Object(I.jsxs)(A.a,{title:"Dashboard",skipLinks:[{fragment:"content",text:"Skip to content"}],children:[Object(I.jsx)(T,{deckTitle:null!==(n=null===bt||void 0===bt?void 0:bt.title)&&void 0!==n?n:"",open:lt,onBackDropClick:function(){return dt(!1)},onExited:function(){return ht(null)},onCancel:function(){return dt(!1)},onDelete:function(){var t;x.a.remove(null!==(t=null===bt||void 0===bt?void 0:bt.id)&&void 0!==t?t:"").then((function(){return ot({authorId:[S],orderTitleBy:"asc",take:g,skip:(Y-1)*g,caseInsensitive:!0,titleContains:rt||void 0})})).finally((function(){return dt(!1)}))}}),Object(I.jsxs)("main",{id:"content",className:tt.content,children:[Object(I.jsx)(i.a,{variant:"h1",children:"Your decks"}),Object(I.jsxs)("div",{className:tt.sortAndSearchContainer,children:[Object(I.jsx)("div",{children:Object(I.jsx)(E.a,{label:"Sort by",variant:"outlined",select:!0,value:"title",children:Object(I.jsx)(o.a,{value:"title",children:"Title"})})}),Object(I.jsx)(E.a,{label:"Search",variant:"outlined",value:at,onChange:function(t){return ct(t.target.value)}}),Object(I.jsxs)("div",{className:tt.buttonBox,children:[Object(I.jsxs)("label",{children:[Object(I.jsx)(s.a,{color:"primary",component:"span",children:"Import"}),Object(I.jsx)("input",{type:"file",accept:"application/json",hidden:!0,onChange:function(t){var e;$(!0);var n=new FileReader,a=null===(e=t.target.files)||void 0===e?void 0:e[0];a&&(n.onload=function(e){var n,a=(null!==(n=e.target)&&void 0!==n?n:{}).result;if(a){var c=JSON.parse(a);x.a.create(c).then((function(){return ot({authorId:[S],orderTitleBy:"asc",take:g,skip:(Y-1)*g,caseInsensitive:!0,titleContains:rt||void 0})})).then((function(){yt("Deck successfully imported"),vt(!0)})).catch((function(){yt("Failed to import deck."),vt(!0)})).finally((function(){t.target.value="",$(!1)}))}},n.readAsText(a))}})]}),!w&&Object(I.jsx)(s.a,{color:"primary",variant:"contained",component:h.b,to:f.a.deckAdd,children:"Create"})]})]}),Object(I.jsx)(L.a,{loading:U,children:Object(I.jsxs)("div",{className:tt.paginationContainer,children:[Object(I.jsx)("div",{className:tt.deckList,children:W.map((function(t){var e;return Object(I.jsx)(v.a,{deckId:null!==(e=t.id)&&void 0!==e?e:"",title:t.title,numberOfCards:t.cards.length,onDelete:function(){ht(t),dt(!0)},onExport:function(){return it(t)},onEdit:function(){return _.push("".concat(f.a.decks,"/").concat(t.id,"/edit"))}},t.id)}))}),M/g>1&&Object(I.jsx)("div",{className:tt.paginationControls,children:Object(I.jsx)(j.a,{count:Math.ceil(M/g),page:Y,onChange:function(t,e){return K(e)},disabled:Z})})]})}),w&&Object(I.jsx)(u.a,{"aria-label":"create deck",className:tt.fab,color:"secondary",component:h.b,to:f.a.deckAdd,children:Object(I.jsx)(d.a,{})}),Object(I.jsx)(l.a,{className:tt.snackbar,open:xt,message:kt,autoHideDuration:D.a,onClose:function(){return vt(!1)}})]})]})}}}]);
//# sourceMappingURL=8.1441e75e.chunk.js.map