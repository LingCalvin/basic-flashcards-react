{"version":3,"sources":["common/hooks/use-unique-id.tsx","common/components/text-field.tsx","deck/services/decks.service.ts","common/components/loadable-component.styles.tsx","common/components/loadable-component.tsx","common/constants/snackbar.ts","deck/pages/add-deck.page.styles.tsx","deck/components/edit-card-tile.styles.tsx","deck/components/edit-card-tile.tsx","deck/components/edit-deck-form.styles.tsx","deck/components/edit-deck-form.tsx","deck/pages/edit-deck.page.tsx"],"names":["uniqueIdNumber","useUniqueId","useRef","current","TextField","props","id","decksService","http","a","title","description","visibility","cards","this","post","authorId","authService","getCurrentUser","map","sides","frontText","text","backText","data","get","findOneDeckResponseToDeck","params","decks","count","put","cardId","delete","apiClient","card","tags","useStyles","makeStyles","root","display","justifyContent","LoadableComponent","loading","children","className","delay","classes","useState","showProgress","setShowProgress","useEffect","timeout","setTimeout","clearTimeout","clsx","CircularProgress","autoHideDuration","theme","backdrop","zIndex","appBar","flexDirection","gap","spacing","padding","header","textFieldContainer","gridTemplateColumns","breakpoints","down","gridTemplateRows","actionArea","EditCardTileInner","index","variant","defaultTerm","defaultDefinition","termError","definitionError","removeDisabled","moveUpDisabled","moveDownDisabled","onRemove","onMove","register","draggableId","handleRemove","useCallback","handleMoveUp","handleMoveDown","provided","Paper","draggableProps","innerRef","Typography","component","aria-label","dragHandleProps","style","height","DragHandle","label","required","multiline","defaultValue","inputProps","error","undefined","helperText","IconButton","onClick","disabled","Delete","ArrowUpward","ArrowDownward","EditCardTile","memo","form","marginTop","marginBottom","generalInfoContainer","cardList","saveButtonContainer","editCardTileContainer","paddingTop","schema","yup","shape","max","oneOf","of","EditDeckForm","defaultValues","onSubmit","useForm","resolver","yupResolver","control","errors","formState","handleSubmit","useFieldArray","name","keyName","append","fields","move","remove","handleDragEnd","source","destination","droppableId","noValidate","message","select","MenuItem","value","onDragEnd","ref","droppableProps","key","length","placeholder","Button","fullWidth","startIcon","Add","type","color","EditDeckPage","deckId","useParams","submitting","setSubmitting","history","useHistory","deck","setDeck","setLoading","showSnackbar","setShowsSnackbar","snackbarMessage","setSnackbarMessage","findOne","then","finally","open","update","goBack","catch","onClose"],"mappings":"wIAAA,6CAEIA,EAAiB,EAEN,SAASC,IAEtB,OADiBC,iBAAO,aAAD,OAAcF,MACrBG,U,wGCIH,SAASC,EAAUC,GAChC,IAAMC,EAAKL,cACX,OAAO,cAAC,IAAD,aAAcK,GAAIA,GAAQD,M,wICuDtBE,EAAe,IA3D5B,WACE,WAAoBC,GAAsB,yBAAtBA,OADtB,iFAGE,uCAAAC,EAAA,6DAAeC,EAAf,EAAeA,MAAOC,EAAtB,EAAsBA,YAAaC,EAAnC,EAAmCA,WAAYC,EAA/C,EAA+CA,MAA/C,SACyBC,KAAKN,KAAKO,KAAK,SAAU,CAC9CC,SAAUC,IAAYC,iBACtBR,QACAC,cACAC,aACAC,MAAOA,EAAMM,KACX,gCAAGC,MAAH,SAA2D,CACzDC,UADF,KAAaC,KAEXC,SAFF,KAAkCD,WAPxC,uBACUE,EADV,EACUA,KADV,kBAaSA,GAbT,gDAHF,mHAmBE,WAAclB,GAAd,iBAAAG,EAAA,sEACyBK,KAAKN,KAAKiB,IAAV,iBAA6CnB,IADtE,uBACUkB,EADV,EACUA,KADV,kBAESE,EAA0BF,IAFnC,gDAnBF,mHAwBE,WACEG,GADF,iBAAAlB,EAAA,sEAGyBK,KAAKN,KAAKiB,IAAV,SAA8C,CACnEE,WAJJ,uBAGUH,EAHV,EAGUA,KAHV,kBAOS,CACLI,MAAOJ,EAAKI,MAAMT,IAAIO,GACtBG,MAAOL,EAAKK,QAThB,gDAxBF,kHAqCE,yCAAApB,EAAA,6DAAeH,EAAf,EAAeA,GAAII,EAAnB,EAAmBA,MAAOC,EAA1B,EAA0BA,YAAaC,EAAvC,EAAuCA,WAAYC,EAAnD,EAAmDA,MAAnD,SACyBC,KAAKN,KAAKsB,IAAV,iBAAwBxB,GAAM,CACnDU,SAAUC,IAAYC,iBACtBR,QACAC,cACAC,aACAC,MAAOA,EAAMM,KACX,gBAAOY,EAAP,EAAGzB,GAAH,gBAAec,MAAf,SAAuE,CACrEd,GAAIyB,EACJV,UAFF,KAAyBC,KAGvBC,SAHF,KAA8CD,WAPpD,uBACUE,EADV,EACUA,KADV,kBAcSA,GAdT,gDArCF,kHAsDE,WAAalB,GAAb,SAAAG,EAAA,+EACSK,KAAKN,KAAKwB,OAAV,iBAA2B1B,KADpC,gDAtDF,8DA2D4B,CAAiB2B,KAE7C,SAASP,EAA0BF,GAEjC,MAAO,CACLlB,GAFuDkB,EAAjDlB,GAGNU,SAHuDQ,EAA7CR,SAIVN,MAJuDc,EAAnCd,MAKpBC,YALuDa,EAA5Bb,YAM3BC,WANuDY,EAAfZ,WAOxCC,MAAOW,EAAKX,MAAMM,KAAI,SAACe,GAAD,MAAW,CAC/B5B,GAAI4B,EAAK5B,GACTc,MAAO,CAAC,CAAEE,KAAMY,EAAKb,WAAa,CAAEC,KAAMY,EAAKX,eAEjDY,KAAM,M,+GCxEKC,EAPGC,YAAW,CAC3BC,KAAM,CACJC,QAAS,OACTC,eAAgB,Y,OCOL,SAASC,EAAT,GAKa,IAJ1BC,EAIyB,EAJzBA,QACAC,EAGyB,EAHzBA,SACAC,EAEyB,EAFzBA,UAEyB,IADzBC,aACyB,MADjB,IACiB,EACnBC,EAAUV,IAEhB,EAAwCW,mBAASF,GAAS,GAA1D,mBAAOG,EAAP,KAAqBC,EAArB,KASA,OAPAC,qBAAU,WACR,IAAMC,EAAUC,YAAW,WACzBH,GAAgB,KACfJ,GACH,OAAO,kBAAMQ,aAAaF,MACzB,CAACN,IAEGH,EACL,qBAAKE,UAAWU,YAAKR,EAAQR,KAAMM,GAAnC,SACGI,GAAgB,cAACO,EAAA,EAAD,MAGnB,mCAAGZ,M,iCClCP,kCAAO,IAAMa,EAAmB,K,iCCAhC,aAEMpB,EAAYC,aAAW,SAACoB,GAAD,MAAY,CACvCC,SAAU,CACRC,OAAQF,EAAME,OAAOC,OAAS,OAInBxB,O,+PCmBAA,EAzBGC,aAAW,SAACoB,GAAD,MAAY,CACvCnB,KAAM,CACJC,QAAS,OACTsB,cAAe,SACfC,IAAKL,EAAMM,QAAQ,GACnBC,QAASP,EAAMM,QAAQ,IAEzBE,OAAQ,CACN1B,QAAS,OACTC,eAAgB,iBAElB0B,mBAAmB,aACjB3B,QAAS,OACT4B,oBAAqB,UACrBL,IAAKL,EAAMM,QAAQ,IAClBN,EAAMW,YAAYC,KAAK,MAAQ,CAC9BF,oBAAqB,MACrBG,iBAAkB,YAGtBC,WAAY,CACVhC,QAAS,OACTC,eAAgB,gB,OCMb,SAASgC,EAAkBnE,GAChC,IACEoE,EAYEpE,EAZFoE,MACAC,EAWErE,EAXFqE,QACAC,EAUEtE,EAVFsE,YACAC,EASEvE,EATFuE,kBACAC,EAQExE,EARFwE,UACAC,EAOEzE,EAPFyE,gBACAC,EAME1E,EANF0E,eACAC,EAKE3E,EALF2E,eACAC,EAIE5E,EAJF4E,iBACAC,EAGE7E,EAHF6E,SACAC,EAEE9E,EAFF8E,OACAC,EACE/E,EADF+E,SAEItC,EAAUV,IAEViD,EAAcpF,cAEdqF,EAAeC,uBAAY,kBAAML,EAAST,KAAQ,CAACA,EAAOS,IAE1DM,EAAeD,uBACnB,kBAAMJ,EAAOV,EAAOA,EAAQ,KAC5B,CAACA,EAAOU,IAGJM,EAAiBF,uBACrB,kBAAMJ,EAAOV,EAAOA,EAAQ,KAC5B,CAACA,EAAOU,IAGV,OACE,cAAC,IAAD,CAAWE,YAAaA,EAAaZ,MAAOA,EAA5C,SACG,SAACiB,GAAD,OACC,eAACC,EAAA,EAAD,yBACE/C,UAAWE,EAAQR,MACfoD,EAASE,gBAFf,IAGEC,SAAUH,EAASG,SAHrB,UAKE,sBAAKjD,UAAWE,EAAQmB,OAAxB,UACE,cAAC6B,EAAA,EAAD,CAAYpB,QAAQ,KAAKqB,UAAU,MAAnC,wBACEtB,EAAQ,KAEV,6CACEuB,aAAW,4BACPN,EAASO,iBAFf,IAGEC,MAAO,CAAEC,OAAQ,QAHnB,SAKE,cAACC,EAAA,EAAD,UAGJ,sBAAKxD,UAAWE,EAAQoB,mBAAxB,UACE,cAAC,IAAD,CACEmC,MAAM,OACNC,UAAQ,EACRC,WAAS,EACT7B,QAASA,EACT8B,aAAc7B,EACd8B,WAAU,eACLrB,EAAS,SAAD,OAAUX,EAAV,mBAEbiC,WAAqBC,IAAd9B,EACP+B,WAAY/B,IAEd,cAAC,IAAD,CACEwB,MAAM,aACNC,UAAQ,EACRC,WAAS,EACT7B,QAASA,EACT8B,aAAc5B,EACd6B,WAAU,eACLrB,EAAS,SAAD,OAAUX,EAAV,mBAEbiC,WAA2BC,IAApB7B,EACP8B,WAAY9B,OAGhB,sBAAKlC,UAAWE,EAAQyB,WAAxB,UACE,cAACsC,EAAA,EAAD,CACEb,aAAW,SACXc,QAASxB,EACTyB,SAAUhC,EAHZ,SAKE,cAACiC,EAAA,EAAD,MAEF,cAACH,EAAA,EAAD,CACEb,aAAW,UACXc,QAAStB,EACTuB,SAAU/B,EAHZ,SAKE,cAACiC,EAAA,EAAD,MAEF,cAACJ,EAAA,EAAD,CACEb,aAAW,YACXc,QAASrB,EACTsB,SAAU9B,EAHZ,SAKE,cAACiC,EAAA,EAAD,gBASd,IACeC,EADMC,eAAK5C,GC3GXpC,EA3BGC,aAAW,SAACoB,GAAD,MAAY,CACvC4D,KAAM,CACJ9E,QAAS,OACTsB,cAAe,SACfC,IAAKL,EAAMM,QAAQ,GACnBuD,UAAW7D,EAAMM,QAAQ,GACzBwD,aAAc9D,EAAMM,QAAQ,IAE9ByD,qBAAsB,CACpBjF,QAAS,OACTsB,cAAe,SACfC,IAAKL,EAAMM,QAAQ,IAErB0D,SAAU,CACRlF,QAAS,OACTsB,cAAe,SACfC,IAAKL,EAAMM,QAAQ,IAErB2D,oBAAqB,CACnBnF,QAAS,OACTC,eAAgB,YAElBmF,sBAAuB,CACrBC,WAAYnE,EAAMM,QAAQ,QCJxB8D,EAASC,MAAaC,MAAM,CAChCrH,MAAOoH,MAAazB,MAAM,SAASC,WAAW0B,IAAI,KAClDrH,YAAamH,MAAazB,MAAM,eAAe2B,IAAI,MACnDpH,WAAYkH,MAAazB,MAAM,cAAc4B,MAAM,CAAC,UAAW,WAC/DpH,MAAOiH,MAAYI,GACjBJ,MAAaC,MAAM,CACjB3G,MAAO0G,MAAYI,GACjBJ,MAAaC,MAAM,CACjBzG,KAAMwG,MAAazB,MAAM,QAAQC,WAAW0B,IAAI,cAa3C,SAASG,EAAT,GAIQ,IAAD,QAHpBC,EAGoB,EAHpBA,cACA1D,EAEoB,EAFpBA,QACA2D,EACoB,EADpBA,SAEMvF,EAAUV,IAEhB,EAKIkG,YAAoB,CACtBF,gBACAG,SAAUC,YAAYX,KANtBY,EADF,EACEA,QACaC,EAFf,EAEEC,UAAaD,OACbE,EAHF,EAGEA,aACAxD,EAJF,EAIEA,SAMF,EAAyCyD,YAAc,CACrDJ,UACAK,KAAM,QACNC,QAAS,QAHHC,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,OAAQC,EAAxB,EAAwBA,KAAMC,EAA9B,EAA8BA,OAMxBC,EAAgB7D,uBACpB,YAA0C,IAAvC8D,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,aAENA,GACAA,EAAYC,cAAgBF,EAAOE,aAClCD,EAAY7E,QAAU4E,EAAO5E,OAIjCyE,EAAKG,EAAO5E,MAAO6E,EAAY7E,SAEjC,CAACyE,IAGGK,EAActJ,cAEpB,OACE,uBAAM2C,UAAWE,EAAQuE,KAAMmC,YAAU,EAACnB,SAAUO,EAAaP,GAAjE,UACE,sBAAKzF,UAAWE,EAAQ0E,qBAAxB,UACE,cAAC,IAAD,CACEnB,MAAM,QACNC,UAAQ,EACR5B,QAASA,EACT8B,aAAa,GACbC,WAAU,eAAOrB,EAAS,UAC1BsB,WAAwBC,IAAjB+B,EAAOhI,MACdkG,WAAU,UAAE8B,EAAOhI,aAAT,aAAE,EAAc+I,UAE5B,cAAC,IAAD,CACEpD,MAAM,cACN3B,QAASA,EACT8B,aAAa,GACbC,WAAU,eAAOrB,EAAS,gBAC1BsB,WAA8BC,IAAvB+B,EAAO/H,YACdiG,WAAU,UAAE8B,EAAO/H,mBAAT,aAAE,EAAoB8I,UAElC,eAAC,IAAD,CACEpD,MAAM,aACNqD,QAAM,EACNhF,QAASA,EACT8B,aAAY,iBAAE4B,QAAF,IAAEA,OAAF,EAAEA,EAAexH,kBAAjB,QAA+B,UAC3C6F,WAAU,eAAOrB,EAAS,eAC1BsB,WAA6BC,IAAtB+B,EAAO9H,WACdgG,WAAU,UAAE8B,EAAO9H,kBAAT,aAAE,EAAmB6I,QAPjC,UASE,cAACE,EAAA,EAAD,CAAUC,MAAM,UAAhB,qBACA,cAACD,EAAA,EAAD,CAAUC,MAAM,SAAhB,0BAIJ,cAAC,IAAD,CAAiBC,UAAWT,EAA5B,SACE,cAAC,IAAD,CAAWG,YAAaA,EAAxB,SACG,SAAC7D,GAAD,OACC,8CACE9C,UAAWE,EAAQ2E,SACnBqC,IAAKpE,EAASG,UACVH,EAASqE,gBAHf,cAKGd,EAAO9H,KACN,WAKEsD,GALF,wBAEIuF,EAFJ,EAEIA,IAFJ,gBAGI5I,MAHJ,GAGoBuD,EAHpB,KAGcrD,KAA6BsD,EAH3C,KAGqCtD,KAHrC,OAOE,cAAC,EAAD,CAEEmD,MAAOA,EACPC,QAASA,EACTC,YAAaA,EACbC,kBAAmBA,EACnBC,UAAS,UAAE6D,EAAO7H,aAAT,iBAAE,EAAe4D,UAAjB,iBAAE,EAAuBrD,aAAzB,iBAAE,EAA+B,UAAjC,iBAAE,EAAmCE,YAArC,aAAE,EAAyCmI,QACpD3E,gBAAe,UACb4D,EAAO7H,aADM,iBACb,EAAe4D,UADF,iBACb,EAAuBrD,aADV,iBACb,EAA+B,UADlB,iBACb,EAAmCE,YADtB,aACb,EAAyCmI,QAE3CvE,SAAUiE,EACVhE,OAAQ+D,EACRnE,eAAgBkE,EAAOgB,QAAU,EACjCjF,eAA0B,IAAVP,EAChBQ,iBAAkBR,GAASwE,EAAOgB,OAAS,EAC3C7E,SAAUA,GAdL4E,MAkBVtE,EAASwE,qBAMlB,cAACC,EAAA,EAAD,CACEzF,QAAQ,WACR0F,WAAS,EACTC,UAAW,cAACC,EAAA,EAAD,IACXxD,QAAS,kBAAMkC,EAAO,CAAE5H,MAAO,CAAC,CAAEE,KAAM,IAAM,CAAEA,KAAM,QAJxD,sBAQA,qBAAKsB,UAAWE,EAAQ4E,oBAAxB,SACE,cAACyC,EAAA,EAAD,CAAQI,KAAK,SAAS7F,QAAQ,YAAY8F,MAAM,UAAhD,yB,mNCpJO,SAASC,IACtB,IAAM3H,EAAUV,cACJsI,EAAWC,cAAfrK,GACR,EAAoCyC,oBAAS,GAA7C,mBAAO6H,EAAP,KAAmBC,EAAnB,KACMC,EAAUC,cAEhB,EAAwBhI,mBAAsB,MAA9C,mBAAOiI,EAAP,KAAaC,EAAb,KACA,EAA8BlI,oBAAS,GAAvC,mBAAOL,EAAP,KAAgBwI,EAAhB,KAEA,EAAyCnI,oBAAS,GAAlD,mBAAOoI,EAAP,KAAqBC,EAArB,KACA,EAA8CrI,mBAAS,IAAvD,mBAAOsI,EAAP,KAAwBC,EAAxB,KAUA,OARApI,qBAAU,WACRgI,GAAW,GACX3K,IACGgL,QAAQb,GACRc,MAAK,SAACR,GAAD,OAAUC,EAAQD,MACvBS,SAAQ,kBAAMP,GAAW,QAC3B,CAACR,IAGF,iCACE,cAAC,IAAD,CAAUgB,KAAMd,EAAYhI,UAAWE,EAAQY,SAA/C,SACE,cAAC,IAAD,CAAkB8G,MAAM,cAE1B,cAAC,IAAD,CAAmB9H,QAASA,EAA5B,SACGsI,GACC,eAAC,IAAD,WACE,cAAC,IAAD,CAAYtG,QAAQ,KAApB,uBAEA,cAAC,IAAD,CACEA,QAAQ,WACR0D,cAAe4C,EACf3C,SAAU,SAACuB,GACTiB,GAAc,GACdtK,IACGoL,OADH,aACYxJ,KAAM,IAAOyH,IACtB4B,MAAK,kBAAMV,EAAQc,YACnBC,OAAM,WACLP,EAAmB,0BACnBF,GAAiB,GACjBP,GAAc,cAO5B,cAAC,IAAD,CACEa,KAAMP,EACN1B,QAAS4B,EACT7H,iBAAkBA,IAClBsI,QAAS,kBAAMV,GAAiB","file":"static/js/9.178fad9d.chunk.js","sourcesContent":["import { useRef } from 'react';\n\nlet uniqueIdNumber = 0;\n\nexport default function useUniqueId() {\n  const uniqueId = useRef(`unique-id-${uniqueIdNumber++}`);\n  return uniqueId.current;\n}\n","import {\n  TextField as MuiTextField,\n  TextFieldProps as MuiTextFieldProps,\n} from '@material-ui/core';\nimport useUniqueId from '../hooks/use-unique-id';\n\nexport interface TextFieldProps extends Omit<MuiTextFieldProps, 'label'> {\n  label?: string;\n}\n\nexport default function TextField(props: TextFieldProps) {\n  const id = useUniqueId();\n  return <MuiTextField id={id} {...props} />;\n}\n","import { AxiosInstance } from 'axios';\nimport { authService } from '../../auth/services/auth.service';\nimport apiClient from '../../common/constants/api-client';\nimport Deck from '../interfaces/deck';\nimport { FindAllDecksParams } from '../interfaces/find-all-decks-params';\nimport { FindAllDecksResponse } from '../interfaces/find-all-decks-response';\nimport FindOneDeckResponse from '../interfaces/find-one-deck-response';\n\nexport class DecksService {\n  constructor(private http: AxiosInstance) {}\n\n  async create({ title, description, visibility, cards }: Deck) {\n    const { data } = await this.http.post('/decks', {\n      authorId: authService.getCurrentUser(),\n      title,\n      description,\n      visibility,\n      cards: cards.map(\n        ({ sides: [{ text: frontText }, { text: backText }] }) => ({\n          frontText,\n          backText,\n        })\n      ),\n    });\n    return data;\n  }\n\n  async findOne(id: string): Promise<Deck | null> {\n    const { data } = await this.http.get<FindOneDeckResponse>(`/decks/${id}`);\n    return findOneDeckResponseToDeck(data);\n  }\n\n  async findAll(\n    params: FindAllDecksParams\n  ): Promise<{ decks: Deck[]; count: number }> {\n    const { data } = await this.http.get<FindAllDecksResponse>(`/decks`, {\n      params,\n    });\n\n    return {\n      decks: data.decks.map(findOneDeckResponseToDeck),\n      count: data.count,\n    };\n  }\n\n  async update({ id, title, description, visibility, cards }: Deck) {\n    const { data } = await this.http.put(`/decks/${id}`, {\n      authorId: authService.getCurrentUser(),\n      title,\n      description,\n      visibility,\n      cards: cards.map(\n        ({ id: cardId, sides: [{ text: frontText }, { text: backText }] }) => ({\n          id: cardId,\n          frontText,\n          backText,\n        })\n      ),\n    });\n    return data;\n  }\n\n  async remove(id: string) {\n    return this.http.delete(`/decks/${id}`);\n  }\n}\n\nexport const decksService = new DecksService(apiClient);\n\nfunction findOneDeckResponseToDeck(data: FindOneDeckResponse): Deck {\n  const { id, authorId, title, description, visibility } = data;\n  return {\n    id,\n    authorId,\n    title,\n    description,\n    visibility,\n    cards: data.cards.map((card) => ({\n      id: card.id,\n      sides: [{ text: card.frontText }, { text: card.backText }],\n    })),\n    tags: [],\n  };\n}\n","import { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    justifyContent: 'center',\n  },\n});\n\nexport default useStyles;\n","import { CircularProgress } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { ReactNode, useEffect, useState } from 'react';\nimport useStyles from './loadable-component.styles';\n\ninterface LoadableComponentProps {\n  loading?: boolean;\n  children: ReactNode;\n  className?: string;\n  delay?: number;\n}\n\nexport default function LoadableComponent({\n  loading,\n  children,\n  className,\n  delay = 300,\n}: LoadableComponentProps) {\n  const classes = useStyles();\n\n  const [showProgress, setShowProgress] = useState(delay <= 0);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setShowProgress(true);\n    }, delay);\n    return () => clearTimeout(timeout);\n  }, [delay]);\n\n  return loading ? (\n    <div className={clsx(classes.root, className)}>\n      {showProgress && <CircularProgress />}\n    </div>\n  ) : (\n    <>{children}</>\n  );\n}\n","export const autoHideDuration = 6000;\n","import { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.appBar + 1,\n  },\n}));\n\nexport default useStyles;\n","import { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: theme.spacing(1),\n    padding: theme.spacing(2),\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between',\n  },\n  textFieldContainer: {\n    display: 'grid',\n    gridTemplateColumns: '1fr 1fr',\n    gap: theme.spacing(2),\n    [theme.breakpoints.down('xs')]: {\n      gridTemplateColumns: '1fr',\n      gridTemplateRows: '1fr 1fr',\n    },\n  },\n  actionArea: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n}));\nexport default useStyles;\n","import { IconButton, Paper, Typography } from '@material-ui/core';\nimport {\n  ArrowDownward,\n  ArrowUpward,\n  Delete,\n  DragHandle,\n} from '@material-ui/icons';\nimport { memo, useCallback } from 'react';\nimport { Draggable } from 'react-beautiful-dnd';\nimport { UseFormRegister } from 'react-hook-form';\nimport TextField, { TextFieldProps } from '../../common/components/text-field';\nimport useUniqueId from '../../common/hooks/use-unique-id';\nimport useStyles from './edit-card-tile.styles';\nimport { FormValues } from './edit-deck-form';\n\nexport interface EditCardTileProps {\n  index: number;\n  variant?: TextFieldProps['variant'];\n  defaultTerm: string;\n  defaultDefinition: string;\n  termError?: string;\n  definitionError?: string;\n  removeDisabled?: boolean;\n  moveUpDisabled?: boolean;\n  moveDownDisabled?: boolean;\n  onRemove: (index: number) => void;\n  onMove: (source: number, destination: number) => void;\n  register: UseFormRegister<FormValues>;\n}\n\nexport function EditCardTileInner(props: EditCardTileProps) {\n  const {\n    index,\n    variant,\n    defaultTerm,\n    defaultDefinition,\n    termError,\n    definitionError,\n    removeDisabled,\n    moveUpDisabled,\n    moveDownDisabled,\n    onRemove,\n    onMove,\n    register,\n  } = props;\n  const classes = useStyles();\n\n  const draggableId = useUniqueId();\n\n  const handleRemove = useCallback(() => onRemove(index), [index, onRemove]);\n\n  const handleMoveUp = useCallback(\n    () => onMove(index, index - 1),\n    [index, onMove]\n  );\n\n  const handleMoveDown = useCallback(\n    () => onMove(index, index + 1),\n    [index, onMove]\n  );\n\n  return (\n    <Draggable draggableId={draggableId} index={index}>\n      {(provided) => (\n        <Paper\n          className={classes.root}\n          {...provided.draggableProps}\n          innerRef={provided.innerRef}\n        >\n          <div className={classes.header}>\n            <Typography variant=\"h5\" component=\"div\">{`Card ${\n              index + 1\n            }`}</Typography>\n            <div\n              aria-label=\"card reorder drag handle\"\n              {...provided.dragHandleProps}\n              style={{ height: '24px' }}\n            >\n              <DragHandle />\n            </div>\n          </div>\n          <div className={classes.textFieldContainer}>\n            <TextField\n              label=\"Term\"\n              required\n              multiline\n              variant={variant}\n              defaultValue={defaultTerm}\n              inputProps={{\n                ...register(`cards.${index}.sides.0.text` as const),\n              }}\n              error={termError !== undefined}\n              helperText={termError}\n            />\n            <TextField\n              label=\"Definition\"\n              required\n              multiline\n              variant={variant}\n              defaultValue={defaultDefinition}\n              inputProps={{\n                ...register(`cards.${index}.sides.1.text` as const),\n              }}\n              error={definitionError !== undefined}\n              helperText={definitionError}\n            />\n          </div>\n          <div className={classes.actionArea}>\n            <IconButton\n              aria-label=\"delete\"\n              onClick={handleRemove}\n              disabled={removeDisabled}\n            >\n              <Delete />\n            </IconButton>\n            <IconButton\n              aria-label=\"move up\"\n              onClick={handleMoveUp}\n              disabled={moveUpDisabled}\n            >\n              <ArrowUpward />\n            </IconButton>\n            <IconButton\n              aria-label=\"move down\"\n              onClick={handleMoveDown}\n              disabled={moveDownDisabled}\n            >\n              <ArrowDownward />\n            </IconButton>\n          </div>\n        </Paper>\n      )}\n    </Draggable>\n  );\n}\n\nconst EditCardTile = memo(EditCardTileInner);\nexport default EditCardTile;\n","import { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: theme.spacing(3),\n    marginTop: theme.spacing(3),\n    marginBottom: theme.spacing(3),\n  },\n  generalInfoContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: theme.spacing(2),\n  },\n  cardList: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: theme.spacing(2),\n  },\n  saveButtonContainer: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  editCardTileContainer: {\n    paddingTop: theme.spacing(2),\n  },\n}));\n\nexport default useStyles;\n","import { yupResolver } from '@hookform/resolvers/yup';\nimport { Button, MenuItem } from '@material-ui/core';\nimport { Add } from '@material-ui/icons';\nimport { useCallback } from 'react';\nimport { DragDropContext, Droppable, DropResult } from 'react-beautiful-dnd';\nimport { useFieldArray, useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport Card from '../../card/interfaces/card';\nimport TextField, { TextFieldProps } from '../../common/components/text-field';\nimport useUniqueId from '../../common/hooks/use-unique-id';\nimport { DeckVisibility } from '../types/deck-visibility';\nimport EditCardTile from './edit-card-tile';\nimport useStyles from './edit-deck-form.styles';\n\nexport type FormValues = {\n  title: string;\n  description: string;\n  visibility: DeckVisibility;\n  cards: Card[];\n};\n\nconst schema = yup.object().shape({\n  title: yup.string().label('Title').required().max(255),\n  description: yup.string().label('Description').max(4096),\n  visibility: yup.string().label('Visibility').oneOf(['PRIVATE', 'PUBLIC']),\n  cards: yup.array().of(\n    yup.object().shape({\n      sides: yup.array().of(\n        yup.object().shape({\n          text: yup.string().label('This').required().max(4096),\n        })\n      ),\n    })\n  ),\n});\n\ninterface EditDeckFormProps {\n  defaultValues?: FormValues;\n  variant?: TextFieldProps['variant'];\n  onSubmit: (value: FormValues) => void;\n}\n\nexport default function EditDeckForm({\n  defaultValues,\n  variant,\n  onSubmit,\n}: EditDeckFormProps) {\n  const classes = useStyles();\n\n  const {\n    control,\n    formState: { errors },\n    handleSubmit,\n    register,\n  } = useForm<FormValues>({\n    defaultValues,\n    resolver: yupResolver(schema),\n  });\n\n  const { append, fields, move, remove } = useFieldArray({\n    control,\n    name: 'cards',\n    keyName: 'key', // A Card already has an id field\n  });\n\n  const handleDragEnd = useCallback(\n    ({ source, destination }: DropResult) => {\n      if (\n        !destination ||\n        (destination.droppableId === source.droppableId &&\n          destination.index === source.index)\n      ) {\n        return;\n      }\n      move(source.index, destination.index);\n    },\n    [move]\n  );\n\n  const droppableId = useUniqueId();\n\n  return (\n    <form className={classes.form} noValidate onSubmit={handleSubmit(onSubmit)}>\n      <div className={classes.generalInfoContainer}>\n        <TextField\n          label=\"Title\"\n          required\n          variant={variant}\n          defaultValue=\"\"\n          inputProps={{ ...register('title') }}\n          error={errors.title !== undefined}\n          helperText={errors.title?.message}\n        />\n        <TextField\n          label=\"Description\"\n          variant={variant}\n          defaultValue=\"\"\n          inputProps={{ ...register('description') }}\n          error={errors.description !== undefined}\n          helperText={errors.description?.message}\n        />\n        <TextField\n          label=\"Visibility\"\n          select\n          variant={variant}\n          defaultValue={defaultValues?.visibility ?? 'PRIVATE'}\n          inputProps={{ ...register('visibility') }}\n          error={errors.visibility !== undefined}\n          helperText={errors.visibility?.message}\n        >\n          <MenuItem value=\"PRIVATE\">Private</MenuItem>\n          <MenuItem value=\"PUBLIC\">Public</MenuItem>\n        </TextField>\n      </div>\n\n      <DragDropContext onDragEnd={handleDragEnd}>\n        <Droppable droppableId={droppableId}>\n          {(provided) => (\n            <div\n              className={classes.cardList}\n              ref={provided.innerRef}\n              {...provided.droppableProps}\n            >\n              {fields.map(\n                (\n                  {\n                    key,\n                    sides: [{ text: defaultTerm }, { text: defaultDefinition }],\n                  },\n                  index\n                ) => (\n                  <EditCardTile\n                    key={key}\n                    index={index}\n                    variant={variant}\n                    defaultTerm={defaultTerm}\n                    defaultDefinition={defaultDefinition}\n                    termError={errors.cards?.[index]?.sides?.[0]?.text?.message}\n                    definitionError={\n                      errors.cards?.[index]?.sides?.[1]?.text?.message\n                    }\n                    onRemove={remove}\n                    onMove={move}\n                    removeDisabled={fields.length <= 1}\n                    moveUpDisabled={index === 0}\n                    moveDownDisabled={index >= fields.length - 1}\n                    register={register}\n                  />\n                )\n              )}\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n\n      <Button\n        variant=\"outlined\"\n        fullWidth\n        startIcon={<Add />}\n        onClick={() => append({ sides: [{ text: '' }, { text: '' }] })}\n      >\n        Add card\n      </Button>\n      <div className={classes.saveButtonContainer}>\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n          Save\n        </Button>\n      </div>\n    </form>\n  );\n}\n","import {\n  Backdrop,\n  CircularProgress,\n  Container,\n  Snackbar,\n  Typography,\n} from '@material-ui/core';\nimport { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport { useParams } from 'react-router-dom';\nimport LoadableComponent from '../../common/components/loadable-component';\nimport { autoHideDuration } from '../../common/constants/snackbar';\nimport EditDeckForm from '../components/edit-deck-form';\nimport Deck from '../interfaces/deck';\nimport { decksService } from '../services/decks.service';\nimport useStyles from './add-deck.page.styles';\n\nexport default function EditDeckPage() {\n  const classes = useStyles();\n  const { id: deckId } = useParams<{ id: string }>();\n  const [submitting, setSubmitting] = useState(false);\n  const history = useHistory();\n\n  const [deck, setDeck] = useState<Deck | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  const [showSnackbar, setShowsSnackbar] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState('');\n\n  useEffect(() => {\n    setLoading(true);\n    decksService\n      .findOne(deckId)\n      .then((deck) => setDeck(deck))\n      .finally(() => setLoading(false));\n  }, [deckId]);\n\n  return (\n    <main>\n      <Backdrop open={submitting} className={classes.backdrop}>\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n      <LoadableComponent loading={loading}>\n        {deck && (\n          <Container>\n            <Typography variant=\"h1\">Edit deck</Typography>\n\n            <EditDeckForm\n              variant=\"outlined\"\n              defaultValues={deck}\n              onSubmit={(value) => {\n                setSubmitting(true);\n                decksService\n                  .update({ tags: [], ...value })\n                  .then(() => history.goBack())\n                  .catch(() => {\n                    setSnackbarMessage('Failed to update deck.');\n                    setShowsSnackbar(true);\n                    setSubmitting(false);\n                  });\n              }}\n            />\n          </Container>\n        )}\n      </LoadableComponent>\n      <Snackbar\n        open={showSnackbar}\n        message={snackbarMessage}\n        autoHideDuration={autoHideDuration}\n        onClose={() => setShowsSnackbar(false)}\n      />\n    </main>\n  );\n}\n"],"sourceRoot":""}