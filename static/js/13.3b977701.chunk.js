(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[13],{175:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var a=i(28),n=i.n(a),r=i(24),c=i(47),s=i(31),l=i(32),o=i(40),d=i(46),u=new(function(){function e(t){Object(s.a)(this,e),this.http=t}return Object(l.a)(e,[{key:"create",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var i,a,c,s,l,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.title,a=t.description,c=t.visibility,s=t.cards,e.next=3,this.http.post("/decks",{authorId:o.a.getCurrentUser(),title:i,description:a,visibility:c,cards:s.map((function(e){var t=Object(r.a)(e.sides,2);return{frontText:t[0].text,backText:t[1].text}}))});case 3:return l=e.sent,d=l.data,e.abrupt("return",d);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var i,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks/".concat(t));case 2:return i=e.sent,a=i.data,e.abrupt("return",b(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var i,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks",{params:t});case 2:return i=e.sent,a=i.data,e.abrupt("return",{decks:a.decks.map(b),count:a.count});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var i,a,c,s,l,d,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.id,a=t.title,c=t.description,s=t.visibility,l=t.cards,e.next=3,this.http.put("/decks/".concat(i),{authorId:o.a.getCurrentUser(),title:a,description:c,visibility:s,cards:l.map((function(e){var t=e.id,i=Object(r.a)(e.sides,2);return{id:t,frontText:i[0].text,backText:i[1].text}}))});case 3:return d=e.sent,u=d.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.delete("/decks/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(d.a);function b(e){return{id:e.id,authorId:e.authorId,title:e.title,description:e.description,visibility:e.visibility,cards:e.cards.map((function(e){return{id:e.id,sides:[{text:e.frontText},{text:e.backText}]}})),tags:[]}}},185:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var a=6e3},213:function(e,t,i){"use strict";var a=i(157),n=Object(a.a)((function(e){return{backdrop:{zIndex:e.zIndex.appBar+1}}}));t.a=n},215:function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var a=i(39),n=i(242),r=i(201),c=i(390),s=i(171),l=i(162),o=i(371),d=i(385),u=i(0),b=i(178),v=i(241),p=i(200),j=i(24),f=i(129),x=i(130),m=i(161),O=i(373),h=i(374),g=i(375),y=i(157),k=Object(y.a)((function(e){return{root:{display:"flex",flexDirection:"column",gap:e.spacing(1),padding:e.spacing(2)},textFieldContainer:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e.spacing(2)},actionArea:{display:"flex",justifyContent:"flex-end"}}})),C=i(2);function T(e){var t,i,n,r,s,l,o,d,v,p,y,T,w,D,I=e.index,V=e.variant,P=e.removeDisabled,N=e.moveUpDisabled,S=e.moveDownDisabled,A=e.onRemove,B=e.onMove,R=k(),U=Object(b.g)(),q=U.formState.errors.cards,E=U.getValues,F=U.register,L=Object(j.a)(E("cards")[I].sides,2),z=L[0].text,J=L[1].text,M=Object(u.useCallback)((function(){return A(I)}),[I,A]),W=Object(u.useCallback)((function(){return B(I,I-1)}),[I,B]),H=Object(u.useCallback)((function(){return B(I,I+1)}),[I,B]);return Object(C.jsxs)(f.a,{className:R.root,children:[Object(C.jsx)(x.a,{variant:"h6",component:"div",children:"Card ".concat(I+1)}),Object(C.jsxs)("div",{className:R.textFieldContainer,children:[Object(C.jsx)(c.a,{label:"Term",required:!0,multiline:!0,variant:V,defaultValue:z,inputProps:Object(a.a)({"aria-label":"term"},F("cards.".concat(I,".sides.0.text"))),error:void 0!==(null===q||void 0===q||null===(t=q[I])||void 0===t||null===(i=t.sides)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.text),helperText:null===q||void 0===q||null===(r=q[I])||void 0===r||null===(s=r.sides)||void 0===s||null===(l=s[0])||void 0===l||null===(o=l.text)||void 0===o?void 0:o.message}),Object(C.jsx)(c.a,{label:"Definition",required:!0,multiline:!0,variant:V,defaultValue:J,inputProps:Object(a.a)({"aria-label":"definition"},F("cards.".concat(I,".sides.1.text"))),error:void 0!==(null===q||void 0===q||null===(d=q[I])||void 0===d||null===(v=d.sides)||void 0===v||null===(p=v[1])||void 0===p?void 0:p.text),helperText:null===q||void 0===q||null===(y=q[I])||void 0===y||null===(T=y.sides)||void 0===T||null===(w=T[1])||void 0===w||null===(D=w.text)||void 0===D?void 0:D.message})]}),Object(C.jsxs)("div",{className:R.actionArea,children:[Object(C.jsx)(m.a,{"aria-label":"delete",onClick:M,disabled:P,children:Object(C.jsx)(O.a,{})}),Object(C.jsx)(m.a,{"aria-label":"move up",onClick:W,disabled:N,children:Object(C.jsx)(h.a,{})}),Object(C.jsx)(m.a,{"aria-label":"move down",onClick:H,disabled:S,children:Object(C.jsx)(g.a,{})})]})]})}var w=Object(u.memo)(T),D=Object(y.a)((function(e){return{form:{display:"flex",flexDirection:"column",gap:e.spacing(3),marginTop:e.spacing(3),marginBottom:e.spacing(3)},generalInfoContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2)},cardList:{display:"flex",flexDirection:"column",gap:e.spacing(2)},saveButtonContainer:{display:"flex",justifyContent:"flex-end"},editCardTileContainer:{paddingTop:e.spacing(2)}}})),I=p.b().shape({title:p.d().label("Title").required().max(255),description:p.d().label("Description").max(4096),visibility:p.d().label("Visibility").oneOf(["PRIVATE","PUBLIC"]),cards:p.a().of(p.b().shape({sides:p.a().of(p.b().shape({text:p.d().label("This").required().max(4096)}))}))}),V=Object(u.memo)((function(e){var t=e.className,i=Object(n.a)(e,["className"]);return Object(C.jsx)("div",{className:t,children:Object(C.jsx)(w,Object(a.a)({},i))})}));function P(e){var t,i,n,u,p=e.defaultValues,j=e.variant,f=e.onSubmit,x=D(),m=Object(b.f)({defaultValues:p,resolver:Object(r.a)(I)}),O=m.control,h=m.formState.errors,g=m.handleSubmit,y=m.register,k=Object(b.e)({control:O,name:"cards",keyName:"key"}),T=k.append,w=k.fields,P=k.move,N=k.remove;return Object(C.jsxs)("form",{className:x.form,noValidate:!0,onSubmit:g(f,(function(e){e.title||e.description||e.visibility||void 0===e.cards||window.scrollTo({top:0})})),children:[void 0,Object.values(h).length>0&&Object(C.jsx)(d.a,{color:"error",children:"Please correct all errors."}),Object(C.jsxs)("div",{className:x.generalInfoContainer,children:[Object(C.jsx)(c.a,{label:"Title",required:!0,variant:j,defaultValue:"",inputProps:Object(a.a)({"aria-label":"title"},y("title")),error:void 0!==h.title,helperText:null===(t=h.title)||void 0===t?void 0:t.message}),Object(C.jsx)(c.a,{label:"Description",variant:j,defaultValue:"",inputProps:Object(a.a)({"aria-label":"description"},y("description")),error:void 0!==h.description,helperText:null===(i=h.description)||void 0===i?void 0:i.message}),Object(C.jsxs)(c.a,{label:"Visibility",select:!0,variant:j,defaultValue:null!==(n=null===p||void 0===p?void 0:p.visibility)&&void 0!==n?n:"PRIVATE",inputProps:Object(a.a)({"aria-label":"visibility"},y("visibility")),error:void 0!==h.visibility,helperText:null===(u=h.visibility)||void 0===u?void 0:u.message,children:[Object(C.jsx)(s.a,{value:"PRIVATE",children:"Private"}),Object(C.jsx)(s.a,{value:"PUBLIC",children:"Public"})]})]}),Object(C.jsx)(b.a,Object(a.a)(Object(a.a)({},m),{},{children:Object(C.jsx)(v.a,{useWindowScroll:!0,data:w,computeItemKey:function(e){return w[e].key},itemContent:function(e){return Object(C.jsx)(V,{className:e>0?x.editCardTileContainer:void 0,index:e,variant:"outlined",removeDisabled:w.length<=1,moveUpDisabled:e<=0,moveDownDisabled:e>=w.length-1,onRemove:N,onMove:P})}})})),Object(C.jsx)(l.a,{variant:"outlined",fullWidth:!0,startIcon:Object(C.jsx)(o.a,{}),onClick:function(){return T({sides:[{text:""},{text:""}]})},children:"Add card"}),Object(C.jsx)("div",{className:x.saveButtonContainer,children:Object(C.jsx)(l.a,{type:"submit",variant:"contained",color:"primary",children:"Save"})})]})}},372:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return f}));var a=i(39),n=i(24),r=i(363),c=i(203),s=i(376),l=i(391),o=i(0),d=i(9),u=i(185),b=i(215),v=i(175),p=i(213),j=i(2);function f(){var e=Object(p.a)(),t=Object(o.useState)(!1),i=Object(n.a)(t,2),f=i[0],x=i[1],m=Object(d.g)(),O=Object(o.useState)(!1),h=Object(n.a)(O,2),g=h[0],y=h[1],k=Object(o.useState)(""),C=Object(n.a)(k,2),T=C[0],w=C[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.a,{open:f,className:e.backdrop,children:Object(j.jsx)(c.a,{color:"inherit"})}),Object(j.jsx)(s.a,{children:Object(j.jsx)(b.a,{variant:"outlined",defaultValues:{title:"",description:"",visibility:"PRIVATE",cards:[{sides:[{text:""},{text:""}]}]},onSubmit:function(e){x(!0),v.a.create(Object(a.a)({tags:[]},e)).then((function(){return m.goBack()})).catch((function(){w("Failed to save deck."),y(!0),x(!1)}))}})}),Object(j.jsx)(l.a,{open:g,message:T,autoHideDuration:u.a,onClose:function(){return y(!1)}})]})}}}]);
//# sourceMappingURL=13.3b977701.chunk.js.map