(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[4],{106:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(44),c=n.n(a),s=(n(77),n(27)),o=n(120),i=n(121),u=n(29),l=n(21),h=n(6),d=n(53);function j(){var e=d.a.getCurrentUser(),t=h.a.getItem("accessToken");return e&&t?Object(l.a)(Object(l.a)({},e),{},{accessToken:t}):null}var b=n(3),f=n(7),v=n(45),O=n(2);function m(e){var t=Object(b.h)().pathname;return v.a.isAuthenticated()?Object(O.jsx)(b.b,Object(l.a)({},e)):Object(O.jsx)(b.a,{to:{pathname:f.a.login,search:"?continue=".concat(encodeURIComponent(t))}})}var p=n(116);function g(e){var t=e.delay,n=void 0===t?300:t,a=Object(r.useState)(n<=0),c=Object(s.a)(a,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){i(!0)}),n);return function(){clearTimeout(e)}}),[n]),o?Object(O.jsx)(p.a,{color:"secondary"}):Object(O.jsx)(O.Fragment,{})}var k=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(11)]).then(n.bind(null,382))})),x=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(9)]).then(n.bind(null,361))})),y=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(17),n.e(8)]).then(n.bind(null,380))})),w=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(14),n.e(15)]).then(n.bind(null,378))})),S=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(12)]).then(n.bind(null,383))})),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(13)]).then(n.bind(null,384))})),P=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,386))})),T=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(7)]).then(n.bind(null,375))})),z=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(18),n.e(16)]).then(n.bind(null,385))}));function C(){var e=Object(r.useContext)(u.a);return Object(O.jsx)(r.Suspense,{fallback:Object(O.jsx)(g,{}),children:Object(O.jsxs)(b.d,{children:[Object(O.jsx)(b.b,{exact:!0,path:f.a.home,children:e?Object(O.jsx)(b.a,{to:f.a.dashboard}):Object(O.jsx)(P,{})}),Object(O.jsx)(m,{path:f.a.accountSettings,children:Object(O.jsx)(k,{})}),Object(O.jsx)(m,{path:f.a.dashboard,children:Object(O.jsx)(y,{})}),Object(O.jsx)(b.b,{exact:!0,path:f.a.deckView,children:Object(O.jsx)(w,{})}),Object(O.jsx)(m,{path:f.a.deckAdd,children:Object(O.jsx)(x,{})}),Object(O.jsx)(m,{path:f.a.deckEdit,children:Object(O.jsx)(T,{})}),Object(O.jsx)(b.b,{path:f.a.deckSearch,children:Object(O.jsx)(z,{})}),Object(O.jsx)(b.b,{path:f.a.registration,children:Object(O.jsx)(I,{})}),Object(O.jsx)(b.b,{path:f.a.login,children:Object(O.jsx)(S,{})})]})})}var E=n(68),A=Object(E.a)({palette:{error:{light:"#E94948",main:"#B00020",dark:"#790000"}},typography:{h1:{fontSize:"3.75rem"},h2:{fontSize:"3rem"},h3:{fontSize:"2.125rem"},h4:{fontSize:"1.5rem"},h5:{fontSize:"1.25rem"},h6:{fontSize:"1.2rem"}}});function F(){var e=Object(r.useState)(j),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=function(){a(j)};return document.addEventListener("localStorageServiceChange",e),function(){return document.removeEventListener("localStorageServiceChange",e)}}),[]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(u.a.Provider,{value:n,children:Object(O.jsxs)(o.a,{theme:A,children:[Object(O.jsx)(i.a,{}),Object(O.jsx)(C,{})]})})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=function(e){e&&e instanceof Function&&n.e(19).then(n.bind(null,376)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},U=n(28);n(102),n(103),n(104),n(105);c.a.render(Object(O.jsx)(r.StrictMode,{children:Object(O.jsx)(U.a,{children:Object(O.jsx)(F,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),J()},29:function(e,t,n){"use strict";var r=n(0),a=Object(r.createContext)(null);t.a=a},30:function(e,t,n){"use strict";var r=n(63),a=n.n(r),c=n(6),s=a.a.create({baseURL:"https://basic-flashcards.herokuapp.com",withCredentials:!0});s.interceptors.request.use((function(e){var t=c.a.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),s.interceptors.response.use((function(e){return e}),(function(e){var t;throw 401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&c.a.removeItem("accessToken"),e})),t.a=s},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(14),a=n.n(r),c=n(23),s=n(18),o=n(19),i=n(30),u=n(6),l=new(function(){function e(t){Object(s.a)(this,e),this.http=t}return Object(o.a)(e,[{key:"logIn",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.post("/auth/access-tokens",{username:t,password:n});case 2:return r=e.sent,c=r.data,s=c.accessToken,o=c.decodedAccessToken,u.a.setItem("accessToken",s),u.a.setItem("accessTokenPayload",JSON.stringify(o)),u.a.setItem("user",JSON.stringify({id:o.sub,username:t})),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logOut",value:function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.a.removeItem("accessToken"),u.a.removeItem("accessTokenPayload"),u.a.removeItem("user");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"verifyAccessToken",value:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.get("/auth/access-tokens/".concat(t));case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isAuthenticated",value:function(){return null!==u.a.getItem("accessToken")}},{key:"getCurrentUser",value:function(){var e=u.a.getItem("accessTokenPayload");return e?JSON.parse(e).sub:null}},{key:"changePassword",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.put("/users/".concat(this.getCurrentUser(),"/password"),{currentPassword:t,newPassword:n});case 2:return e.next=4,this.logOut();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}())(i.a)},53:function(e,t,n){"use strict";var r=n(18),a=n(19),c=n(30),s=n(6),o=new(function(){function e(t){Object(r.a)(this,e),this.http=t}return Object(a.a)(e,[{key:"create",value:function(e){return this.http.post("/users",e)}},{key:"getCurrentUser",value:function(){var e=s.a.getItem("user");return e?JSON.parse(e):null}}]),e}())(c.a);t.a=o},6:function(e,t,n){"use strict";var r=n(18),a=n(19),c=new(function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"getItem",value:function(e){return localStorage.getItem(e)}},{key:"removeItem",value:function(e){localStorage.removeItem(e),document.dispatchEvent(new Event("localStorageServiceChange"))}},{key:"setItem",value:function(e,t){localStorage.setItem(e,t),document.dispatchEvent(new Event("localStorageServiceChange"))}}]),e}());t.a=c},7:function(e,t,n){"use strict";t.a={home:"/",accountSettings:"/account/settings",dashboard:"/dashboard",decks:"/decks",deckSearch:"/search",deckAdd:"/add-deck",deckEdit:"/decks/:id/edit",deckView:"/decks/:id",login:"/auth/login",registration:"/auth/register"}},77:function(e,t,n){}},[[106,5,6]]]);
//# sourceMappingURL=main.9581d2ce.chunk.js.map