(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[10],{177:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(28),i=n.n(a),r=n(24),c=n(47),s=n(31),o=n(32),u=n(40),l=n(46),d=new(function(){function e(t){Object(s.a)(this,e),this.http=t}return Object(o.a)(e,[{key:"create",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,s,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,a=t.description,c=t.visibility,s=t.cards,e.next=3,this.http.post("/decks",{authorId:u.a.getCurrentUser(),title:n,description:a,visibility:c,cards:s.map((function(e){var t=Object(r.a)(e.sides,2);return{frontText:t[0].text,backText:t[1].text}}))});case 3:return o=e.sent,l=o.data,e.abrupt("return",l);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks/".concat(t));case 2:return n=e.sent,a=n.data,e.abrupt("return",b(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks",{params:t});case 2:return n=e.sent,a=n.data,e.abrupt("return",{decks:a.decks.map(b),count:a.count});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,s,o,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.title,c=t.description,s=t.visibility,o=t.cards,e.next=3,this.http.put("/decks/".concat(n),{authorId:u.a.getCurrentUser(),title:a,description:c,visibility:s,cards:o.map((function(e){var t=e.id,n=Object(r.a)(e.sides,2);return{id:t,frontText:n[0].text,backText:n[1].text}}))});case 3:return l=e.sent,d=l.data,e.abrupt("return",d);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.delete("/decks/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(l.a);function b(e){return{id:e.id,authorId:e.authorId,title:e.title,description:e.description,visibility:e.visibility,cards:e.cards.map((function(e){return{id:e.id,sides:[{text:e.frontText},{text:e.backText}]}})),tags:[]}}},178:function(e,t,n){"use strict";t.a="This field is required."},179:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(24),i=n(194),r=n(4),c=n(0),s=n(157),o=Object(s.a)({root:{display:"flex",justifyContent:"center"}}),u=n(2);function l(e){var t=e.loading,n=e.children,s=e.className,l=e.delay,d=void 0===l?300:l,b=o(),j=Object(c.useState)(d<=0),f=Object(a.a)(j,2),p=f[0],h=f[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){h(!0)}),d);return function(){return clearTimeout(e)}}),[d]),t?Object(u.jsx)("div",{className:Object(r.a)(b.root,s),children:p&&Object(u.jsx)(i.a,{})}):Object(u.jsx)(u.Fragment,{children:n})}},180:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0),i=0;function r(){return Object(a.useRef)("unique-id-".concat(i++)).current}},184:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=6e3},195:function(e,t,n){"use strict";var a=n(157),i=Object(a.a)((function(e){return{backdrop:{zIndex:e.zIndex.appBar+1}}}));t.a=i},201:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n(39),i=n(182),r=n(24),c=n(344),s=n(171),o=n(162),u=n(326),l=n(0),d=n(178),b=n(225),j=n(130),f=n(161),p=n(328),h=n(329),O=n(330),x=n(331),v=n(191),g=n(180),m=n(157),y=Object(m.a)((function(e){return{textFieldContainer:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e.spacing(2)},cardContent:{display:"flex",flexDirection:"column",gap:e.spacing(1),margin:e.spacing(2)},actionArea:{display:"flex",justifyContent:"flex-end"},header:{display:"flex",justifyContent:"space-between",alignItems:"center"}}})),C=n(2);function k(e){var t=e.cardNumber,n=e.frontText,i=e.backText,s=e.forceValidate,o=e.onFrontTextChange,u=e.onBackTextChange,m=e.onDelete,k=e.onMoveUp,T=e.onMoveDown,w=y(),I=Object(g.a)(),D=Object(l.useState)(!1),S=Object(r.a)(D,2),N=S[0],P=S[1],B=n.length>0,F=(s||N)&&!B,V=Object(l.useState)(!1),q=Object(r.a)(V,2),A=q[0],R=q[1],U=i.length>0,E=(s||A)&&!U;return Object(C.jsx)(v.b,{draggableId:I,index:t-1,children:function(e){return Object(C.jsx)(b.a,Object(a.a)(Object(a.a)({},e.draggableProps),{},{innerRef:e.innerRef,children:Object(C.jsxs)("div",{className:w.cardContent,children:[Object(C.jsxs)("div",{className:w.header,children:[Object(C.jsx)(j.a,{variant:"h5",component:"div",children:"Card ".concat(t)}),Object(C.jsx)("div",Object(a.a)(Object(a.a)({"aria-label":"card reorder drag handle"},e.dragHandleProps),{},{style:{height:"24px"},children:Object(C.jsx)(p.a,{})}))]}),Object(C.jsxs)("div",{className:w.textFieldContainer,children:[Object(C.jsx)(c.a,{label:"Term",required:!0,variant:"outlined",multiline:!0,value:n,error:F,helperText:F?d.a:void 0,onChange:function(e){P(!0),o(e.target.value)},inputProps:{"aria-label":"term"}}),Object(C.jsx)(c.a,{label:"Definition",required:!0,variant:"outlined",multiline:!0,value:i,error:E,helperText:E?d.a:void 0,onChange:function(e){R(!0),u(e.target.value)},inputProps:{"aria-label":"definition"}})]}),Object(C.jsxs)("div",{className:w.actionArea,children:[Object(C.jsx)(f.a,{"aria-label":"delete",onClick:m,disabled:!m,children:Object(C.jsx)(h.a,{})}),Object(C.jsx)(f.a,{"aria-label":"move up",onClick:k,disabled:!k,children:Object(C.jsx)(O.a,{})}),Object(C.jsx)(f.a,{"aria-label":"move down",onClick:T,disabled:!T,children:Object(C.jsx)(x.a,{})})]})]})}))}})}var T=Object(m.a)((function(e){return{form:{display:"flex",flexDirection:"column",gap:e.spacing(3),marginTop:e.spacing(3),marginBottom:e.spacing(3)},generalInfoContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2)},cardList:{display:"flex",flexDirection:"column",gap:e.spacing(2)},saveButtonContainer:{display:"flex",justifyContent:"flex-end"}}}));function w(e,t,n){var a=Object(i.a)(e);return a.splice(n,0,a.splice(t,1)[0]),a}function I(e){var t=e.title,n=e.description,b=e.visibility,j=e.cards,f=e.onTitleChange,p=e.onDescriptionChange,h=e.onChangeVisibility,O=e.onCardsChange,x=e.onSubmit,m=T(),y=Object(g.a)(),I=Object(l.useState)(!1),D=Object(r.a)(I,2),S=D[0],N=D[1],P=Object(l.useState)(!1),B=Object(r.a)(P,2),F=B[0],V=B[1],q=(F||S)&&0===t.length,A=function(e,t,n){var r=Object(i.a)(j),c=Object(a.a)({},j[e]);c.sides[t].text=n,r[e]=c,O(r)},R=function(e,t){O(w(j,e,t))};return Object(C.jsxs)("form",{noValidate:!0,className:m.form,onSubmit:function(e){e.preventDefault(),0===t.length||j.some((function(e){return e.sides.some((function(e){return 0===e.text.length}))}))?V(!0):x()},children:[Object(C.jsxs)("div",{className:m.generalInfoContainer,children:[Object(C.jsx)(c.a,{required:!0,variant:"outlined",label:"Title",fullWidth:!0,error:q,helperText:q?d.a:void 0,value:t,onChange:function(e){N(!0),f(e.target.value)},inputProps:{"aria-label":"title"}}),Object(C.jsx)(c.a,{variant:"outlined",label:"Description",fullWidth:!0,value:n,onChange:function(e){return p(e.target.value)},inputProps:{"aria-label":"description"}}),Object(C.jsxs)(c.a,{variant:"outlined",value:b,onChange:function(e){return h(e.target.value)},select:!0,label:"Visibility",inputProps:{"aria-label":"visibility"},children:[Object(C.jsx)(s.a,{value:"PRIVATE",children:"Private"}),Object(C.jsx)(s.a,{value:"PUBLIC",children:"Public"})]})]}),Object(C.jsx)(v.a,{onDragEnd:function(e){var t=e.source,n=e.destination;!n||n.droppableId===t.droppableId&&n.index===t.index||O(w(j,t.index,n.index))},children:Object(C.jsx)(v.c,{droppableId:y,children:function(e){return Object(C.jsxs)("div",Object(a.a)(Object(a.a)({className:m.cardList,ref:e.innerRef},e.droppableProps),{},{children:[j.map((function(e,t){var n=Object(r.a)(e.sides,2),a=n[0].text,c=n[1].text;return Object(C.jsx)(k,{forceValidate:F,cardNumber:t+1,frontText:a,backText:c,onFrontTextChange:function(e){return A(t,0,e)},onBackTextChange:function(e){return A(t,1,e)},onDelete:j.length>1?function(){return e=t,void O([].concat(Object(i.a)(j.slice(0,e)),Object(i.a)(j.slice(e+1))));var e}:void 0,onMoveUp:0!==t?function(){return R(t,t-1)}:void 0,onMoveDown:t!==j.length-1?function(){return R(t,t+1)}:void 0},t)})),e.placeholder]}))}})}),Object(C.jsx)(o.a,{variant:"outlined",fullWidth:!0,startIcon:Object(C.jsx)(u.a,{}),onClick:function(){O([].concat(Object(i.a)(j),[{sides:[{text:""},{text:""}]}]))},children:"Add card"}),Object(C.jsx)("div",{className:m.saveButtonContainer,children:Object(C.jsx)(o.a,{type:"submit",variant:"contained",color:"primary",children:"Save"})})]})}},335:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var a=n(39),i=n(24),r=n(318),c=n(194),s=n(226),o=n(345),u=n(0),l=n(9),d=n(179),b=n(184),j=n(201),f=n(177),p=n(195),h=n(2);function O(){var e=Object(p.a)(),t=Object(l.i)().id,n=Object(u.useState)(!1),O=Object(i.a)(n,2),x=O[0],v=O[1],g=Object(l.g)(),m=Object(u.useState)(null),y=Object(i.a)(m,2),C=y[0],k=y[1],T=Object(u.useState)(!0),w=Object(i.a)(T,2),I=w[0],D=w[1],S=Object(u.useState)(!1),N=Object(i.a)(S,2),P=N[0],B=N[1],F=Object(u.useState)(""),V=Object(i.a)(F,2),q=V[0],A=V[1];return Object(u.useEffect)((function(){D(!0),f.a.findOne(t).then((function(e){return k(e)})).finally((function(){return D(!1)}))}),[t]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(r.a,{open:x,className:e.backdrop,children:Object(h.jsx)(c.a,{color:"inherit"})}),Object(h.jsx)(d.a,{loading:I,children:C&&Object(h.jsx)(s.a,{children:Object(h.jsx)(j.a,{title:C.title,description:C.description,visibility:C.visibility,cards:C.cards,onTitleChange:function(e){return k((function(t){return t?Object(a.a)(Object(a.a)({},t),{},{title:e}):t}))},onDescriptionChange:function(e){return k((function(t){return t?Object(a.a)(Object(a.a)({},t),{},{description:e}):t}))},onChangeVisibility:function(e){return k((function(t){return t?Object(a.a)(Object(a.a)({},t),{},{visibility:e}):t}))},onCardsChange:function(e){return k((function(t){return t?Object(a.a)(Object(a.a)({},t),{},{cards:e}):t}))},onSubmit:function(){v(!0),f.a.update({id:C.id,title:C.title,description:C.description,visibility:C.visibility,cards:C.cards,tags:[]}).then((function(){return g.goBack()})).catch((function(){A("Failed to update deck."),B(!0),v(!1)}))}})})}),Object(h.jsx)(o.a,{open:P,message:q,autoHideDuration:b.a,onClose:function(){return B(!1)}})]})}}}]);
//# sourceMappingURL=10.11bd9ac7.chunk.js.map