(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[12],{177:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(28),a=i.n(n),r=i(24),c=i(47),s=i(31),l=i(32),o=i(40),d=i(46),u=new(function(){function e(t){Object(s.a)(this,e),this.http=t}return Object(l.a)(e,[{key:"create",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var i,n,c,s,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.title,n=t.description,c=t.visibility,s=t.cards,e.next=3,this.http.post("/decks",{authorId:o.a.getCurrentUser(),title:i,description:n,visibility:c,cards:s.map((function(e){var t=Object(r.a)(e.sides,2);return{frontText:t[0].text,backText:t[1].text}}))});case 3:return l=e.sent,d=l.data,e.abrupt("return",d);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var i,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks/".concat(t));case 2:return i=e.sent,n=i.data,e.abrupt("return",b(n));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var i,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks",{params:t});case 2:return i=e.sent,n=i.data,e.abrupt("return",{decks:n.decks.map(b),count:n.count});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var i,n,c,s,l,d,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.id,n=t.title,c=t.description,s=t.visibility,l=t.cards,e.next=3,this.http.put("/decks/".concat(i),{authorId:o.a.getCurrentUser(),title:n,description:c,visibility:s,cards:l.map((function(e){var t=e.id,i=Object(r.a)(e.sides,2);return{id:t,frontText:i[0].text,backText:i[1].text}}))});case 3:return d=e.sent,u=d.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.delete("/decks/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(d.a);function b(e){return{id:e.id,authorId:e.authorId,title:e.title,description:e.description,visibility:e.visibility,cards:e.cards.map((function(e){return{id:e.id,sides:[{text:e.frontText},{text:e.backText}]}})),tags:[]}}},179:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(24),a=i(205),r=i(4),c=i(0),s=i(158),l=Object(s.a)({root:{display:"flex",justifyContent:"center"}}),o=i(2);function d(e){var t=e.loading,i=e.children,s=e.className,d=e.delay,u=void 0===d?300:d,b=l(),j=Object(c.useState)(u<=0),v=Object(n.a)(j,2),p=v[0],f=v[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){f(!0)}),u);return function(){return clearTimeout(e)}}),[u]),t?Object(o.jsx)("div",{className:Object(r.a)(b.root,s),children:p&&Object(o.jsx)(a.a,{})}):Object(o.jsx)(o.Fragment,{children:i})}},188:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=6e3},215:function(e,t,i){"use strict";var n=i(158),a=Object(n.a)((function(e){return{backdrop:{zIndex:e.zIndex.appBar+1}}}));t.a=a},217:function(e,t,i){"use strict";i.d(t,"a",(function(){return B}));var n=i(39),a=i(244),r=i(203),c=i(161),s=i(131),l=i(379),o=i(394),d=i(163),u=i(165),b=i(373),j=i(389),v=i(378),p=i(0),f=i(180),x=i(243),O=i(202),h=i(24),m=i(129),g=i(130),y=i(164),k=i(375),C=i(376),T=i(377),w=i(158),D=Object(w.a)((function(e){return{root:{display:"flex",flexDirection:"column",gap:e.spacing(1),padding:e.spacing(2)},textFieldContainer:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e.spacing(2)},actionArea:{display:"flex",justifyContent:"flex-end"}}})),I=i(2);function V(e){var t,i,a,r,c,s,l,d,u,b,j,v,x,O,w=e.index,V=e.variant,N=e.removeDisabled,S=e.moveUpDisabled,P=e.moveDownDisabled,A=e.onRemove,B=e.onMove,F=D(),U=Object(f.g)(),q=U.formState.errors.cards,E=U.getValues,R=U.register,L=Object(h.a)(E("cards")[w].sides,2),z=L[0].text,J=L[1].text,M=Object(p.useCallback)((function(){return A(w)}),[w,A]),W=Object(p.useCallback)((function(){return B(w,w-1)}),[w,B]),H=Object(p.useCallback)((function(){return B(w,w+1)}),[w,B]);return Object(I.jsxs)(m.a,{className:F.root,children:[Object(I.jsx)(g.a,{variant:"h6",component:"div",children:"Card ".concat(w+1)}),Object(I.jsxs)("div",{className:F.textFieldContainer,children:[Object(I.jsx)(o.a,{label:"Term",required:!0,multiline:!0,variant:V,defaultValue:z,inputProps:Object(n.a)({"aria-label":"term"},R("cards.".concat(w,".sides.0.text"))),error:void 0!==(null===q||void 0===q||null===(t=q[w])||void 0===t||null===(i=t.sides)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.text),helperText:null===q||void 0===q||null===(r=q[w])||void 0===r||null===(c=r.sides)||void 0===c||null===(s=c[0])||void 0===s||null===(l=s.text)||void 0===l?void 0:l.message}),Object(I.jsx)(o.a,{label:"Definition",required:!0,multiline:!0,variant:V,defaultValue:J,inputProps:Object(n.a)({"aria-label":"definition"},R("cards.".concat(w,".sides.1.text"))),error:void 0!==(null===q||void 0===q||null===(d=q[w])||void 0===d||null===(u=d.sides)||void 0===u||null===(b=u[1])||void 0===b?void 0:b.text),helperText:null===q||void 0===q||null===(j=q[w])||void 0===j||null===(v=j.sides)||void 0===v||null===(x=v[1])||void 0===x||null===(O=x.text)||void 0===O?void 0:O.message})]}),Object(I.jsxs)("div",{className:F.actionArea,children:[Object(I.jsx)(y.a,{"aria-label":"delete",onClick:M,disabled:N,children:Object(I.jsx)(k.a,{})}),Object(I.jsx)(y.a,{"aria-label":"move up",onClick:W,disabled:S,children:Object(I.jsx)(C.a,{})}),Object(I.jsx)(y.a,{"aria-label":"move down",onClick:H,disabled:P,children:Object(I.jsx)(T.a,{})})]})]})}var N=Object(p.memo)(V),S=Object(w.a)((function(e){return{form:{display:"flex",flexDirection:"column",gap:e.spacing(3),marginTop:e.spacing(3),marginBottom:e.spacing(3)},generalInfoContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2)},cardList:{display:"flex",flexDirection:"column",gap:e.spacing(2)},saveButtonContainer:{display:"flex",justifyContent:"flex-end"},editCardTileContainer:{paddingTop:e.spacing(2)}}})),P=O.b().shape({title:O.d().label("Title").required().max(255),description:O.d().label("Description").max(4096),visibility:O.d().label("Visibility").oneOf(["PRIVATE","PUBLIC"]),cards:O.a().of(O.b().shape({sides:O.a().of(O.b().shape({text:O.d().required().max(4096)}))}))}),A=Object(p.memo)((function(e){var t=e.className,i=Object(a.a)(e,["className"]);return Object(I.jsx)("div",{className:t,children:Object(I.jsx)(N,Object(n.a)({},i))})}));function B(e){var t,i,a,O,h=e.defaultValues,m=e.variant,g=e.onSubmit,y=S(),k=Object(f.f)({defaultValues:h,resolver:Object(r.a)(P)}),C=k.control,T=k.formState.errors,w=k.handleSubmit,D=k.register,V=Object(f.e)({control:C,name:"cards",keyName:"key"}),N=V.append,B=V.fields,F=V.move,U=V.remove;return Object(I.jsxs)("form",{className:y.form,noValidate:!0,onSubmit:w(g,(function(e){e.title||e.description||e.visibility||void 0===e.cards||window.scrollTo({top:0})})),children:[Object.values(T).length>0&&Object(I.jsxs)(j.a,{severity:"error",children:[Object(I.jsx)(v.a,{children:"Please correct the following errors"}),Object(I.jsxs)(c.a,{dense:!0,children:[T.title&&Object(I.jsx)(s.a,{children:Object(I.jsx)(l.a,{children:T.title.message})}),T.description&&Object(I.jsx)(s.a,{children:Object(I.jsx)(l.a,{children:T.description.message})}),T.cards&&T.cards.map((function(e,t){var i,n,a,r;return Object(I.jsxs)(p.Fragment,{children:[(null===e||void 0===e||null===(i=e.sides)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.text)&&Object(I.jsx)(s.a,{children:Object(I.jsx)(l.a,{children:e.sides[0].text.message})}),(null===e||void 0===e||null===(a=e.sides)||void 0===a||null===(r=a[1])||void 0===r?void 0:r.text)&&Object(I.jsx)(s.a,{children:Object(I.jsx)(l.a,{children:e.sides[1].text.message})})]},t)}))]})]}),Object(I.jsxs)("div",{className:y.generalInfoContainer,children:[Object(I.jsx)(o.a,{label:"Title",required:!0,variant:m,defaultValue:"",inputProps:Object(n.a)({"aria-label":"title"},D("title")),error:void 0!==T.title,helperText:null===(t=T.title)||void 0===t?void 0:t.message}),Object(I.jsx)(o.a,{label:"Description",variant:m,defaultValue:"",inputProps:Object(n.a)({"aria-label":"description"},D("description")),error:void 0!==T.description,helperText:null===(i=T.description)||void 0===i?void 0:i.message}),Object(I.jsxs)(o.a,{label:"Visibility",select:!0,variant:m,defaultValue:null!==(a=null===h||void 0===h?void 0:h.visibility)&&void 0!==a?a:"PRIVATE",inputProps:Object(n.a)({"aria-label":"visibility"},D("visibility")),error:void 0!==T.visibility,helperText:null===(O=T.visibility)||void 0===O?void 0:O.message,children:[Object(I.jsx)(d.a,{value:"PRIVATE",children:"Private"}),Object(I.jsx)(d.a,{value:"PUBLIC",children:"Public"})]})]}),Object(I.jsx)(f.a,Object(n.a)(Object(n.a)({},k),{},{children:Object(I.jsx)(x.a,{useWindowScroll:!0,data:B,computeItemKey:function(e){return B[e].key},itemContent:function(e){return Object(I.jsx)(A,{className:e>0?y.editCardTileContainer:void 0,index:e,variant:"outlined",removeDisabled:B.length<=1,moveUpDisabled:e<=0,moveDownDisabled:e>=B.length-1,onRemove:U,onMove:F})}})})),Object(I.jsx)(u.a,{variant:"outlined",fullWidth:!0,startIcon:Object(I.jsx)(b.a,{}),onClick:function(){return N({sides:[{text:""},{text:""}]})},children:"Add card"}),Object(I.jsx)("div",{className:y.saveButtonContainer,children:Object(I.jsx)(u.a,{type:"submit",variant:"contained",color:"primary",children:"Save"})})]})}},385:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return x}));var n=i(39),a=i(24),r=i(365),c=i(205),s=i(380),l=i(395),o=i(0),d=i(9),u=i(179),b=i(188),j=i(217),v=i(177),p=i(215),f=i(2);function x(){var e=Object(p.a)(),t=Object(d.i)().id,i=Object(o.useState)(!1),x=Object(a.a)(i,2),O=x[0],h=x[1],m=Object(d.g)(),g=Object(o.useState)(null),y=Object(a.a)(g,2),k=y[0],C=y[1],T=Object(o.useState)(!0),w=Object(a.a)(T,2),D=w[0],I=w[1],V=Object(o.useState)(!1),N=Object(a.a)(V,2),S=N[0],P=N[1],A=Object(o.useState)(""),B=Object(a.a)(A,2),F=B[0],U=B[1];return Object(o.useEffect)((function(){I(!0),v.a.findOne(t).then((function(e){return C(e)})).finally((function(){return I(!1)}))}),[t]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(r.a,{open:O,className:e.backdrop,children:Object(f.jsx)(c.a,{color:"inherit"})}),Object(f.jsx)(u.a,{loading:D,children:k&&Object(f.jsx)(s.a,{children:Object(f.jsx)(j.a,{variant:"outlined",defaultValues:k,onSubmit:function(e){h(!0),v.a.update(Object(n.a)({tags:[]},e)).then((function(){return m.goBack()})).catch((function(){U("Failed to update deck."),P(!0),h(!1)}))}})})}),Object(f.jsx)(l.a,{open:S,message:F,autoHideDuration:b.a,onClose:function(){return P(!1)}})]})}}}]);
//# sourceMappingURL=12.aeb4d2b9.chunk.js.map