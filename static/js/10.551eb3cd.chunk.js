(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[10],{179:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0),i=0;function r(){return Object(a.useRef)("unique-id-".concat(i++)).current}},180:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(40),i=n(387),r=n(179),c=n(2);function s(e){var t=Object(r.a)();return Object(c.jsx)(i.a,Object(a.a)({id:t},e))}},181:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(23),i=n.n(a),r=n(25),c=n(42),s=n(31),o=n(32),l=n(41),u=n(47),d=new(function(){function e(t){Object(s.a)(this,e),this.http=t}return Object(o.a)(e,[{key:"create",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,s,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,a=t.description,c=t.visibility,s=t.cards,e.next=3,this.http.post("/decks",{authorId:l.a.getCurrentUser(),title:n,description:a,visibility:c,cards:s.map((function(e){var t=Object(r.a)(e.sides,2);return{frontText:t[0].text,backText:t[1].text}}))});case 3:return o=e.sent,u=o.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks/".concat(t));case 2:return n=e.sent,a=n.data,e.abrupt("return",b(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks",{params:t});case 2:return n=e.sent,a=n.data,e.abrupt("return",{decks:a.decks.map(b),count:a.count});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,c,s,o,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.title,c=t.description,s=t.visibility,o=t.cards,e.next=3,this.http.put("/decks/".concat(n),{authorId:l.a.getCurrentUser(),title:a,description:c,visibility:s,cards:o.map((function(e){var t=e.id,n=Object(r.a)(e.sides,2);return{id:t,frontText:n[0].text,backText:n[1].text}}))});case 3:return u=e.sent,d=u.data,e.abrupt("return",d);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.delete("/decks/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(u.a);function b(e){return{id:e.id,authorId:e.authorId,title:e.title,description:e.description,visibility:e.visibility,cards:e.cards.map((function(e){return{id:e.id,sides:[{text:e.frontText},{text:e.backText}]}})),tags:[]}}},183:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(25),i=n(219),r=n(4),c=n(0),s=n(160),o=Object(s.a)({root:{display:"flex",justifyContent:"center"}}),l=n(2);function u(e){var t=e.loading,n=e.children,s=e.className,u=e.delay,d=void 0===u?300:u,b=o(),j=Object(c.useState)(d<=0),f=Object(a.a)(j,2),p=f[0],v=f[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){v(!0)}),d);return function(){return clearTimeout(e)}}),[d]),t?Object(l.jsx)("div",{className:Object(r.a)(b.root,s),children:p&&Object(l.jsx)(i.a,{})}):Object(l.jsx)(l.Fragment,{children:n})}},185:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=6e3},218:function(e,t,n){"use strict";var a=n(160),i=Object(a.a)((function(e){return{backdrop:{zIndex:e.zIndex.appBar+1}}}));t.a=i},221:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var a=n(25),i=n(40),r=n(198),c=n(175),s=n(165),o=n(372),l=n(0),u=n(207),d=n(186),b=n(196),j=n(180),f=n(179),p=n(132),v=n(133),x=n(164),O=n(368),h=n(369),m=n(370),g=n(371),y=n(29),k=n(160),C=Object(k.a)((function(e){return{root:{display:"flex",flexDirection:"column",gap:e.spacing(1),padding:e.spacing(2)},header:{display:"flex",justifyContent:"space-between"},textFieldContainer:Object(y.a)({display:"grid",gridTemplateColumns:"1fr 1fr",gap:e.spacing(2)},e.breakpoints.down("xs"),{gridTemplateColumns:"1fr",gridTemplateRows:"1fr 1fr"}),actionArea:{display:"flex",justifyContent:"flex-end"}}})),T=n(2);function w(e){var t=e.index,n=e.variant,a=e.defaultTerm,r=e.defaultDefinition,c=e.termError,s=e.definitionError,o=e.removeDisabled,d=e.moveUpDisabled,b=e.moveDownDisabled,y=e.onRemove,k=e.onMove,w=e.register,D=C(),I=Object(f.a)(),P=Object(l.useCallback)((function(){return y(t)}),[t,y]),V=Object(l.useCallback)((function(){return k(t,t-1)}),[t,k]),N=Object(l.useCallback)((function(){return k(t,t+1)}),[t,k]);return Object(T.jsx)(u.b,{draggableId:I,index:t,children:function(e){return Object(T.jsxs)(p.a,Object(i.a)(Object(i.a)({className:D.root},e.draggableProps),{},{innerRef:e.innerRef,children:[Object(T.jsxs)("div",{className:D.header,children:[Object(T.jsx)(v.a,{variant:"h5",component:"div",children:"Card ".concat(t+1)}),Object(T.jsx)("div",Object(i.a)(Object(i.a)({"aria-label":"card reorder drag handle"},e.dragHandleProps),{},{style:{height:"24px"},children:Object(T.jsx)(O.a,{})}))]}),Object(T.jsxs)("div",{className:D.textFieldContainer,children:[Object(T.jsx)(j.a,{label:"Term",required:!0,multiline:!0,variant:n,defaultValue:a,inputProps:Object(i.a)({},w("cards.".concat(t,".sides.0.text"))),error:void 0!==c,helperText:c}),Object(T.jsx)(j.a,{label:"Definition",required:!0,multiline:!0,variant:n,defaultValue:r,inputProps:Object(i.a)({},w("cards.".concat(t,".sides.1.text"))),error:void 0!==s,helperText:s})]}),Object(T.jsxs)("div",{className:D.actionArea,children:[Object(T.jsx)(x.a,{"aria-label":"delete",onClick:P,disabled:o,children:Object(T.jsx)(h.a,{})}),Object(T.jsx)(x.a,{"aria-label":"move up",onClick:V,disabled:d,children:Object(T.jsx)(m.a,{})}),Object(T.jsx)(x.a,{"aria-label":"move down",onClick:N,disabled:b,children:Object(T.jsx)(g.a,{})})]})]}))}})}var D=Object(l.memo)(w),I=Object(k.a)((function(e){return{form:{display:"flex",flexDirection:"column",gap:e.spacing(3),marginTop:e.spacing(3),marginBottom:e.spacing(3)},generalInfoContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2)},cardList:{display:"flex",flexDirection:"column",gap:e.spacing(2)},saveButtonContainer:{display:"flex",justifyContent:"flex-end"},editCardTileContainer:{paddingTop:e.spacing(2)}}})),P=b.b().shape({title:b.d().label("Title").required().max(255),description:b.d().label("Description").max(4096),visibility:b.d().label("Visibility").oneOf(["PRIVATE","PUBLIC"]),cards:b.a().of(b.b().shape({sides:b.a().of(b.b().shape({text:b.d().label("This").required().max(4096)}))}))});function V(e){var t,n,b,p,v=e.defaultValues,x=e.variant,O=e.onSubmit,h=I(),m=Object(d.e)({defaultValues:v,resolver:Object(r.a)(P)}),g=m.control,y=m.formState.errors,k=m.handleSubmit,C=m.register,w=Object(d.d)({control:g,name:"cards",keyName:"key"}),V=w.append,N=w.fields,S=w.move,E=w.remove,R=Object(l.useCallback)((function(e){var t=e.source,n=e.destination;!n||n.droppableId===t.droppableId&&n.index===t.index||S(t.index,n.index)}),[S]),A=Object(f.a)();return Object(T.jsxs)("form",{className:h.form,noValidate:!0,onSubmit:k(O),children:[Object(T.jsxs)("div",{className:h.generalInfoContainer,children:[Object(T.jsx)(j.a,{label:"Title",required:!0,variant:x,defaultValue:"",inputProps:Object(i.a)({},C("title")),error:void 0!==y.title,helperText:null===(t=y.title)||void 0===t?void 0:t.message}),Object(T.jsx)(j.a,{label:"Description",variant:x,defaultValue:"",inputProps:Object(i.a)({},C("description")),error:void 0!==y.description,helperText:null===(n=y.description)||void 0===n?void 0:n.message}),Object(T.jsxs)(j.a,{label:"Visibility",select:!0,variant:x,defaultValue:null!==(b=null===v||void 0===v?void 0:v.visibility)&&void 0!==b?b:"PRIVATE",inputProps:Object(i.a)({},C("visibility")),error:void 0!==y.visibility,helperText:null===(p=y.visibility)||void 0===p?void 0:p.message,children:[Object(T.jsx)(c.a,{value:"PRIVATE",children:"Private"}),Object(T.jsx)(c.a,{value:"PUBLIC",children:"Public"})]})]}),Object(T.jsx)(u.a,{onDragEnd:R,children:Object(T.jsx)(u.c,{droppableId:A,children:function(e){return Object(T.jsxs)("div",Object(i.a)(Object(i.a)({className:h.cardList,ref:e.innerRef},e.droppableProps),{},{children:[N.map((function(e,t){var n,i,r,c,s,o,l,u,d,b,j=e.key,f=Object(a.a)(e.sides,2),p=f[0].text,v=f[1].text;return Object(T.jsx)(D,{index:t,variant:x,defaultTerm:p,defaultDefinition:v,termError:null===(n=y.cards)||void 0===n||null===(i=n[t])||void 0===i||null===(r=i.sides)||void 0===r||null===(c=r[0])||void 0===c||null===(s=c.text)||void 0===s?void 0:s.message,definitionError:null===(o=y.cards)||void 0===o||null===(l=o[t])||void 0===l||null===(u=l.sides)||void 0===u||null===(d=u[1])||void 0===d||null===(b=d.text)||void 0===b?void 0:b.message,onRemove:E,onMove:S,removeDisabled:N.length<=1,moveUpDisabled:0===t,moveDownDisabled:t>=N.length-1,register:C},j)})),e.placeholder]}))}})}),Object(T.jsx)(s.a,{variant:"outlined",fullWidth:!0,startIcon:Object(T.jsx)(o.a,{}),onClick:function(){return V({sides:[{text:""},{text:""}]})},children:"Add card"}),Object(T.jsx)("div",{className:h.saveButtonContainer,children:Object(T.jsx)(s.a,{type:"submit",variant:"contained",color:"primary",children:"Save"})})]})}},385:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var a=n(40),i=n(25),r=n(373),c=n(219),s=n(247),o=n(133),l=n(359),u=n(0),d=n(9),b=n(183),j=n(185),f=n(221),p=n(181),v=n(218),x=n(2);function O(){var e=Object(v.a)(),t=Object(d.i)().id,n=Object(u.useState)(!1),O=Object(i.a)(n,2),h=O[0],m=O[1],g=Object(d.g)(),y=Object(u.useState)(null),k=Object(i.a)(y,2),C=k[0],T=k[1],w=Object(u.useState)(!0),D=Object(i.a)(w,2),I=D[0],P=D[1],V=Object(u.useState)(!1),N=Object(i.a)(V,2),S=N[0],E=N[1],R=Object(u.useState)(""),A=Object(i.a)(R,2),B=A[0],q=A[1];return Object(u.useEffect)((function(){P(!0),p.a.findOne(t).then((function(e){return T(e)})).finally((function(){return P(!1)}))}),[t]),Object(x.jsxs)("main",{children:[Object(x.jsx)(r.a,{open:h,className:e.backdrop,children:Object(x.jsx)(c.a,{color:"inherit"})}),Object(x.jsx)(b.a,{loading:I,children:C&&Object(x.jsxs)(s.a,{children:[Object(x.jsx)(o.a,{variant:"h1",children:"Edit deck"}),Object(x.jsx)(f.a,{variant:"outlined",defaultValues:C,onSubmit:function(e){m(!0),p.a.update(Object(a.a)({tags:[]},e)).then((function(){return g.goBack()})).catch((function(){q("Failed to update deck."),E(!0),m(!1)}))}})]})}),Object(x.jsx)(l.a,{open:S,message:B,autoHideDuration:j.a,onClose:function(){return E(!1)}})]})}}}]);
//# sourceMappingURL=10.551eb3cd.chunk.js.map