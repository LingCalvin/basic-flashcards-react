(this["webpackJsonpflashcards-react"]=this["webpackJsonpflashcards-react"]||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(21),s=n.n(r),i=(n(76),n(46)),o=n(18),l=n(134),d=Object(c.createContext)((function(){})),u=Object(c.createContext)({loggedIn:!1}),j=n(27),b=n(9),h={home:"/",dashboard:"/dashboard",decks:"/decks"},f=n(123),p=n(124),x=n(125),O=n(103),m=n(121),g=Object(m.a)({homeLink:{textTransform:"none"}}),v=n(2);function k(){var e=g();return Object(v.jsx)(f.a,{position:"sticky",children:Object(v.jsx)(p.a,{children:Object(v.jsx)(x.a,{color:"inherit",component:j.b,to:h.home,className:e.homeLink,children:Object(v.jsx)(O.a,{variant:"h6",children:"Basic Flashcards"})})})})}function y(){return Object(v.jsx)(k,{})}var w,S=n(135),N=n(127),C=n(62),I=null!==(w="792394819697-o8bra7r13g841c7f41goqu0uj2t3pqpm.apps.googleusercontent.com")?w:"",T=n(19),B=n.n(T),F=n(25),D=n(39),L=n(40),A=n(63),P=n.n(A).a.create({baseURL:"https://basic-flashcards.herokuapp.com",withCredentials:!0});P.interceptors.request.use((function(e){var t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}));var E=P,z=new(function(){function e(t){Object(D.a)(this,e),this.http=t}return Object(L.a)(e,[{key:"logIn",value:function(){var e=Object(F.a)(B.a.mark((function e(t){var n,c,a,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.post("/auth/access-tokens",{idToken:t});case 2:return n=e.sent,c=n.data,a=c.accessToken,r=c.decodedAccessToken,localStorage.setItem("accessToken",a),localStorage.setItem("accessTokenPayload",JSON.stringify(r)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logOut",value:function(){var e=Object(F.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("accessToken"),localStorage.removeItem("accessTokenPayload");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"verifyAccessToken",value:function(){var e=Object(F.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.http.get("/auth/access-tokens/".concat(t));case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}]),e}())(E),J=new(function(){function e(t){Object(D.a)(this,e),this.http=t}return Object(L.a)(e,[{key:"findOne",value:function(){var e=Object(F.a)(B.a.mark((function e(t){var n,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks/".concat(t));case 2:return n=e.sent,c=n.data,e.abrupt("return",W(c));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(F.a)(B.a.mark((function e(t){var n,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks",{params:t});case 2:return n=e.sent,c=n.data,e.abrupt("return",{decks:c.decks.map(W),count:c.count});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(E);function W(e){return{id:e.id,authorId:e.authorId,title:e.title,description:e.description,cards:e.cards.map((function(e){return{sides:[{text:e.frontText},{text:e.backText}]}})),tags:[]}}var q=n(66),R=n(126);function G(e){var t=e.to,n=e.color,c=e.children;return Object(v.jsx)(R.a,{component:j.b,to:t,color:n,children:c})}var M=Object(m.a)((function(e){return{root:{cursor:"pointer",padding:e.spacing(2),"&:hover":{backgroundColor:e.palette.grey[50]}}}}));function X(e){var t=e.title,n=e.numberOfCards,c=e.author,a=e.onClick,r=M();return Object(v.jsxs)(q.a,{className:r.root,onClick:a,children:[Object(v.jsx)(O.a,{variant:"h5",children:t}),Object(v.jsx)(O.a,{children:"".concat(n," cards")}),Object(v.jsxs)(O.a,{children:["By ",Object(v.jsx)(G,{to:"/users/".concat(c),children:c})]})]})}var U=Object(m.a)((function(e){return{backDrop:{zIndex:e.zIndex.appBar+1},loginSection:{backgroundColor:e.palette.primary.dark,color:e.palette.primary.contrastText,padding:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(2)},exampleDecksContainer:{display:"flex",flexDirection:"column",gap:e.spacing(1)},exampleDecksSection:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}}}));function V(){var e=U(),t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useContext)(d),i=Object(b.g)(),l=Object(c.useState)([]),u=Object(o.a)(l,2),j=u[0],f=u[1];return Object(c.useEffect)((function(){J.findAll({orderTitleBy:"asc",take:3}).then((function(e){var t=e.decks;return f(t)}))}),[]),Object(v.jsxs)("div",{children:[Object(v.jsx)(S.a,{className:e.backDrop,open:a,children:Object(v.jsx)(N.a,{color:"inherit"})}),Object(v.jsx)(k,{}),Object(v.jsxs)("main",{children:[Object(v.jsxs)("div",{className:e.loginSection,children:[Object(v.jsx)(O.a,{variant:"h1",children:"Log in to create decks."}),Object(v.jsx)(C.GoogleLogin,{clientId:I,responseType:"id_token",onRequest:function(){return r(!0)},onSuccess:function(e){z.logIn(e.tokenId).then((function(){return s({loggedIn:!0})})).finally((function(){return r(!1)}))},onFailure:function(){return r(!1)}})]}),Object(v.jsxs)("div",{className:e.exampleDecksSection,children:[Object(v.jsx)(O.a,{variant:"h2",children:"Decks"}),Object(v.jsx)("div",{className:e.exampleDecksContainer,children:j.map((function(e){var t;return Object(v.jsx)(X,{title:e.title,numberOfCards:e.cards.length,author:null!==(t=e.authorId)&&void 0!==t?t:"",onClick:function(){return i.push("".concat(h.decks,"/").concat(e.id))}},e.id)}))})]})]})]})}var $=n(64),_=n(136),H=n(137),K=n(128),Q=Object(m.a)((function(e){return{root:{display:"grid",gridTemplateColumns:"2fr auto 3fr",columnGap:e.spacing(2),gap:e.spacing(3)}}}));function Y(e){var t=e.cards,n=Q();return Object(v.jsx)("div",{className:n.root,children:t.map((function(e){var t;return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(O.a,{children:e.sides[0].text}),Object(v.jsx)(K.a,{orientation:"vertical"}),Object(v.jsx)(O.a,{children:e.sides[1].text})]},null!==(t=e.id)&&void 0!==t?t:JSON.stringify(e))}))})}var Z=n(3),ee=n(129),te=n(130),ne=Object(m.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center"},content:{display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",padding:e.spacing(3)},typography:{fontSize:e.typography.h5.fontSize}}}));function ce(e){var t=e.text,n=e.className,c=ne();return Object(v.jsx)(ee.a,{className:Object(Z.a)(c.root,n),children:Object(v.jsx)(te.a,{className:c.content,children:Object(v.jsx)(O.a,{className:c.typography,children:t})})})}var ae=Object(m.a)({root:{display:"grid",gridTemplateAreas:'"main"',transformStyle:"preserve-3d"},cardFlipTransition:{transition:"transform 0.3s"},flip:{transform:"rotateX(180deg)"},cardSide:{gridArea:"main",backfaceVisibility:"hidden"},cardBack:{transform:"rotateX(180deg)"}});function re(e){var t=e.frontText,n=e.backText,c=e.showBack,a=e.className,r=e.onFlip,s=ae();return Object(v.jsxs)("div",{className:Object(Z.a)(s.root,s.cardFlipTransition,c&&s.flip,a),onClick:r,children:[Object(v.jsx)(ce,{className:s.cardSide,text:t}),Object(v.jsx)(ce,{className:Object(Z.a)(s.cardSide,s.cardBack),text:n})]})}var se=Object(m.a)({card:{height:"100%",width:"100%"},hiddenCard:{display:"none"}});function ie(e){var t=e.cards,n=e.activeIndex,a=e.showCardBack,r=e.className,s=e.onFlipCard,i=t[n],l=se(),d=Object(c.useState)(!1),u=Object(o.a)(d,2),j=u[0],b=u[1];return Object(c.useLayoutEffect)((function(){b(!0)}),[n]),Object(c.useLayoutEffect)((function(){j&&b(!1)}),[j]),i?Object(v.jsx)("div",{className:r,children:!j&&Object(v.jsx)(re,{className:l.card,frontText:i.sides[0].text,backText:i.sides[1].text,showBack:a,onFlip:s})}):Object(v.jsx)("div",{className:r,children:!j&&Object(v.jsx)(re,{className:l.card,frontText:"",backText:"",showBack:!1,onFlip:function(){}})})}var oe=n(131),le=n(132),de=n(133),ue=Object(m.a)({root:{display:"flex",alignItems:"center"},positionIndicator:{width:"10ch"}});function je(e){var t=e.currentIndex,n=e.numberOfCards,c=e.onBack,a=e.onForward,r=ue();return Object(v.jsxs)("div",{className:r.root,children:[Object(v.jsx)(oe.a,{onClick:c,disabled:0===t||0===n,children:Object(v.jsx)(le.a,{})}),Object(v.jsx)("div",{children:Object(v.jsx)(O.a,{variant:"subtitle2",align:"center",className:r.positionIndicator,children:"".concat(n>0?t+1:0,"/").concat(n)})}),Object(v.jsx)(oe.a,{onClick:a,disabled:t===n-1||0===n,children:Object(v.jsx)(de.a,{})})]})}var be=Object(m.a)((function(e){return{root:{display:"flex",flexDirection:"column",gap:e.spacing(2),margin:e.spacing(3)},deckStack:{height:280,width:"100%",maxWidth:397},deckStackContainer:{display:"flex",flexDirection:"column",alignItems:"center"},section:{display:"flex",flexDirection:"column",gap:e.spacing(1)},progressBar:{width:"100%",maxWidth:400},tagList:{display:"flex",flexWrap:"wrap",gap:e.spacing(.5)}}}));function he(){var e=be(),t=Object(c.useState)(0),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),i=Object(o.a)(s,2),l=i[0],d=i[1],u=Object(b.h)().id,j=Object(c.useState)(!0),h=Object(o.a)(j,2),f=h[0],p=h[1],x=Object(c.useState)(null),m=Object(o.a)(x,2),g=m[0],y=m[1];Object(c.useEffect)((function(){p(!0),J.findOne(u).then((function(e){return y(e)})).finally((function(){return p(!1)}))}),[u]),Object(c.useLayoutEffect)((function(){d(!1)}),[a]);var w=Object(c.useMemo)((function(){return(null===g||void 0===g?void 0:g.tags)?Object($.a)(g.tags).sort():[]}),[null===g||void 0===g?void 0:g.tags]);return Object(v.jsxs)("div",{children:[Object(v.jsx)(k,{}),!f&&g&&Object(v.jsxs)("div",{className:e.root,children:[Object(v.jsxs)("section",{className:e.section,children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(O.a,{variant:"h4",children:g.title}),Object(v.jsxs)(O.a,{variant:"subtitle1",children:["by"," ",Object(v.jsx)(G,{to:"/users/".concat(g.authorId),color:"inherit",children:g.authorId})]})]}),Object(v.jsxs)("div",{className:e.deckStackContainer,children:[Object(v.jsx)(ie,{className:e.deckStack,cards:g.cards,activeIndex:a,showCardBack:l,onFlipCard:function(){return d((function(e){return!e}))}}),Object(v.jsx)(je,{currentIndex:a,numberOfCards:g.cards.length,onBack:function(){r((function(e){return e-1}))},onForward:function(){r((function(e){return e+1}))}}),Object(v.jsx)(_.a,{className:e.progressBar,value:a,max:g.cards.length-1,valueLabelFormat:function(e){return e+1},onChange:function(e,t){return r(t)}})]})]}),Object(v.jsxs)("section",{className:e.section,children:[Object(v.jsx)(O.a,{variant:"h5",children:"Tags"}),Object(v.jsx)("div",{className:e.tagList,children:w.map((function(e){return Object(v.jsx)(H.a,{label:e,variant:"outlined"},e)}))})]}),Object(v.jsxs)("section",{className:e.section,children:[Object(v.jsx)(O.a,{variant:"h5",children:"Terms"}),Object(v.jsx)(Y,{cards:g.cards})]})]})]})}function fe(e){var t=e.isAuthenticated;return Object(v.jsx)(j.a,{children:Object(v.jsxs)(b.d,{children:[Object(v.jsx)(b.b,{exact:!0,path:h.home,children:t?Object(v.jsx)(b.a,{to:h.dashboard}):Object(v.jsx)(V,{})}),Object(v.jsx)(b.b,{path:h.dashboard,children:Object(v.jsx)(y,{})}),Object(v.jsx)(b.b,{path:"".concat(h.decks,"/:id"),children:Object(v.jsx)(he,{})})]})})}function pe(){var e,t=Object(c.useState)({loggedIn:new Date(1e3*JSON.parse(null!==(e=localStorage.getItem("accessTokenPayload"))&&void 0!==e?e:'{"exp": 0}').exp)>new Date}),n=Object(o.a)(t,2),a=n[0],r=n[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(l.a,{}),Object(v.jsx)(u.Provider,{value:a,children:Object(v.jsx)(d.Provider,{value:function(e){r((function(t){return Object(i.a)(Object(i.a)({},t),e)}))},children:Object(v.jsx)(fe,{isAuthenticated:a.loggedIn})})})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,138)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(v.jsx)(c.StrictMode,{children:Object(v.jsx)(pe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),xe()},76:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.dfb1e903.chunk.js.map