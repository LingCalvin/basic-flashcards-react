(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[11],{175:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(28),a=n.n(r),c=n(24),i=n(47),s=n(31),o=n(32),u=n(40),l=n(46),d=new(function(){function t(e){Object(s.a)(this,t),this.http=e}return Object(o.a)(t,[{key:"create",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r,i,s,o,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.title,r=e.description,i=e.visibility,s=e.cards,t.next=3,this.http.post("/decks",{authorId:u.a.getCurrentUser(),title:n,description:r,visibility:i,cards:s.map((function(t){var e=Object(c.a)(t.sides,2);return{frontText:e[0].text,backText:e[1].text}}))});case 3:return o=t.sent,l=o.data,t.abrupt("return",l);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findOne",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks/".concat(e));case 2:return n=t.sent,r=n.data,t.abrupt("return",p(r));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks",{params:e});case 2:return n=t.sent,r=n.data,t.abrupt("return",{decks:r.decks.map(p),count:r.count});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r,i,s,o,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,r=e.title,i=e.description,s=e.visibility,o=e.cards,t.next=3,this.http.put("/decks/".concat(n),{authorId:u.a.getCurrentUser(),title:r,description:i,visibility:s,cards:o.map((function(t){var e=t.id,n=Object(c.a)(t.sides,2);return{id:e,frontText:n[0].text,backText:n[1].text}}))});case 3:return l=t.sent,d=l.data,t.abrupt("return",d);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=Object(i.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.delete("/decks/".concat(e)));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(l.a);function p(t){return{id:t.id,authorId:t.authorId,title:t.title,description:t.description,visibility:t.visibility,cards:t.cards.map((function(t){return{id:t.id,sides:[{text:t.frontText},{text:t.backText}]}})),tags:[]}}},177:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(24),a=n(203),c=n(4),i=n(0),s=n(157),o=Object(s.a)({root:{display:"flex",justifyContent:"center"}}),u=n(2);function l(t){var e=t.loading,n=t.children,s=t.className,l=t.delay,d=void 0===l?300:l,p=o(),f=Object(i.useState)(d<=0),h=Object(r.a)(f,2),j=h[0],b=h[1];return Object(i.useEffect)((function(){var t=setTimeout((function(){b(!0)}),d);return function(){return clearTimeout(t)}}),[d]),e?Object(u.jsx)("div",{className:Object(c.a)(p.root,s),children:j&&Object(u.jsx)(a.a,{})}):Object(u.jsx)(u.Fragment,{children:n})}},180:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(202),a=n(25),c=n(2);function i(t){var e=t.to,n=t.color,i=t.children;return Object(c.jsx)(r.a,{component:a.b,to:e,color:n,children:i})}},184:function(t,e,n){"use strict";function r(t){return"/decks/".concat(t)}n.d(e,"a",(function(){return r}))},190:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(129),a=n(130),c=n(162),i=n(180),s=n(157),o=Object(s.a)((function(t){return{root:{cursor:"pointer",padding:t.spacing(2),"&:hover":{backgroundColor:t.palette.action.hover}},title:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},buttonBox:{display:"flex",justifyContent:"flex-end"},deleteButton:{color:t.palette.error.dark}}})),u=n(2);function l(t){var e=t.title,n=(t.deckId,t.numberOfCards),s=t.author,l=t.onClick,d=t.onDelete,p=t.onExport,f=t.onEdit,h=o();return Object(u.jsxs)(r.a,{className:h.root,onClick:l,children:[Object(u.jsx)(a.a,{className:h.title,variant:"h5",component:"div",children:e}),Object(u.jsx)(a.a,{children:"".concat(n," cards")}),s&&Object(u.jsxs)(a.a,{onClick:function(t){return t.stopPropagation()},component:"span",children:["By ",Object(u.jsx)(i.a,{to:"/users/".concat(s),children:s})]}),(d||p||f)&&Object(u.jsxs)("div",{className:h.buttonBox,children:[d&&Object(u.jsx)(c.a,{className:h.deleteButton,onClick:function(t){t.stopPropagation(),d()},children:"Delete"}),p&&Object(u.jsx)(c.a,{onClick:function(t){t.stopPropagation(),p()},children:"Export"}),f&&Object(u.jsx)(c.a,{color:"primary",onClick:function(t){t.stopPropagation(),f()},children:"Edit"})]})]})}},389:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return x}));var r=n(24),a=n(350),c=n(0),i=n(9),s=n(177),o=n(190),u=n(12),l=n(184),d=n(175),p=n(157),f=Object(p.a)((function(t){return{content:{height:"100%",padding:t.spacing(3)},paginationContainer:{display:"flex",flexDirection:"column",gap:t.spacing(2)},paginationControls:{display:"flex",justifyContent:"center"},results:{display:"flex",flexDirection:"column",gap:t.spacing(1)},emptyResults:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"100%"},emptyResultsIcon:{fontSize:t.typography.h1.fontSize}}}));function h(t,e,n){return Math.max(t,Math.min(e,n))}var j=n(164),b=n(130),v=n(2);function x(){var t,e=f(),n=Object(c.useState)([]),p=Object(r.a)(n,2),x=p[0],O=p[1],m=Object(c.useState)(0),g=Object(r.a)(m,2),k=g[0],y=g[1],C=Object(i.h)().search,w=new URLSearchParams(C),I=null!==(t=w.get("term"))&&void 0!==t?t:"",N=w.get("pageSize"),S=h(1,50,N?+N:10),E=Math.max(1,Math.ceil(k/S)),R=w.get("page"),T=h(1,E,R?+R:1),U=w.get("from"),B=Object(c.useState)(!0),D=Object(r.a)(B,2),P=D[0],z=D[1],M=Object(i.g)();Object(c.useEffect)((function(){U&&(w.delete("from"),M.replace({search:w.toString()}))})),Object(c.useEffect)((function(){if(!U){if(!I)return z(!1),void O([]);z(!0),d.a.findAll({titleContains:I,caseInsensitive:!0,take:S,skip:(T-1)*S}).then((function(t){var e=t.decks,n=t.count;O(e),y(n)})).finally((function(){return z(!1)}))}}),[U,T,S,I]);var A=Object(v.jsxs)("div",{className:e.paginationContainer,children:[Object(v.jsx)("div",{className:e.results,children:x.map((function(t){var e,n;return Object(v.jsx)(o.a,{deckId:null!==(e=t.id)&&void 0!==e?e:"",title:t.title,numberOfCards:t.cards.length,author:null!==(n=t.authorId)&&void 0!==n?n:"",onClick:function(){var e;return M.push(Object(l.a)(null!==(e=t.id)&&void 0!==e?e:""))}},t.id)}))}),k/S>1&&Object(v.jsx)("div",{className:e.paginationControls,children:Object(v.jsx)(a.a,{count:E,page:T,onChange:function(t,e){return M.push({pathname:u.a.deckSearch,search:"?term=".concat(encodeURIComponent(I),"&page=").concat(encodeURIComponent(e),"&pageSize=").concat(encodeURIComponent(S))})},disabled:P})})]}),J=Object(v.jsxs)("div",{className:e.emptyResults,children:[Object(v.jsx)(j.a,{className:e.emptyResultsIcon}),Object(v.jsx)(b.a,{variant:"h4",component:"div",children:"No results found"}),Object(v.jsx)(b.a,{children:"Enter a new search and results will show up here."})]});return Object(v.jsx)("div",{className:e.content,children:Object(v.jsx)(s.a,{loading:P,children:k>0?A:J})})}}}]);
//# sourceMappingURL=11.e4686516.chunk.js.map