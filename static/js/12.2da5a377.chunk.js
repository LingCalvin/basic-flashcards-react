(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[12],{175:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var a=i(28),n=i.n(a),r=i(24),c=i(47),s=i(31),l=i(32),o=i(39),d=i(46),u=new(function(){function e(t){Object(s.a)(this,e),this.http=t}return Object(l.a)(e,[{key:"create",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var i,a,c,s,l,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.title,a=t.description,c=t.visibility,s=t.cards,e.next=3,this.http.post("/decks",{authorId:o.a.getCurrentUser(),title:i,description:a,visibility:c,cards:s.map((function(e){var t=Object(r.a)(e.sides,2);return{frontText:t[0].text,backText:t[1].text}}))});case 3:return l=e.sent,d=l.data,e.abrupt("return",d);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var i,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks/".concat(t));case 2:return i=e.sent,a=i.data,e.abrupt("return",b(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var i,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks",{params:t});case 2:return i=e.sent,a=i.data,e.abrupt("return",{decks:a.decks.map(b),count:a.count});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var i,a,c,s,l,d,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.id,a=t.title,c=t.description,s=t.visibility,l=t.cards,e.next=3,this.http.put("/decks/".concat(i),{authorId:o.a.getCurrentUser(),title:a,description:c,visibility:s,cards:l.map((function(e){var t=e.id,i=Object(r.a)(e.sides,2);return{id:t,frontText:i[0].text,backText:i[1].text}}))});case 3:return d=e.sent,u=d.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.delete("/decks/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(d.a);function b(e){return{id:e.id,authorId:e.authorId,title:e.title,description:e.description,visibility:e.visibility,cards:e.cards.map((function(e){return{id:e.id,sides:[{text:e.frontText},{text:e.backText}]}})),tags:[]}}},177:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var a=i(24),n=i(203),r=i(4),c=i(0),s=i(157),l=Object(s.a)({root:{display:"flex",justifyContent:"center"}}),o=i(2);function d(e){var t=e.loading,i=e.children,s=e.className,d=e.delay,u=void 0===d?300:d,b=l(),p=Object(c.useState)(u<=0),f=Object(a.a)(p,2),j=f[0],v=f[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){v(!0)}),u);return function(){return clearTimeout(e)}}),[u]),t?Object(o.jsx)("div",{className:Object(r.a)(b.root,s),children:j&&Object(o.jsx)(n.a,{})}):Object(o.jsx)(o.Fragment,{children:i})}},185:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var a=6e3},213:function(e,t,i){"use strict";var a=i(157),n=Object(a.a)((function(e){return{backdrop:{zIndex:e.zIndex.appBar+1}}}));t.a=n},215:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var a=i(40),n=i(201),r=i(389),c=i(171),s=i(129),l=i(130),o=i(161),d=i(162),u=i(372),b=i(373),p=i(374),f=i(370),j=i(384),v=i(182),x=i(241),h=i(200),O=i(157),m=Object(O.a)((function(e){return{form:{display:"flex",flexDirection:"column",gap:e.spacing(3),marginTop:e.spacing(3),marginBottom:e.spacing(3)},generalInfoContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2)},cardList:{display:"flex",flexDirection:"column",gap:e.spacing(2)},saveButtonContainer:{display:"flex",justifyContent:"flex-end"},editCardTile:{display:"flex",flexDirection:"column",gap:e.spacing(1),padding:e.spacing(2)},editCardTileFieldContainer:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e.spacing(2)},editCardTileActionArea:{display:"flex",justifyContent:"flex-end"},editCardTileContainer:{paddingTop:e.spacing(2)}}})),g=i(2),y=h.b().shape({title:h.d().label("Title").required().max(255),description:h.d().label("Description").max(4096),visibility:h.d().label("Visibility").oneOf(["PRIVATE","PUBLIC"]),cards:h.a().of(h.b().shape({sides:h.a().of(h.b().shape({text:h.d().label("This").required().max(4096)}))}))});function k(e){var t,i,h,O,k=e.defaultValues,T=e.variant,C=e.onSubmit,w=m(),I=Object(v.e)({defaultValues:k,resolver:Object(n.a)(y)}),V=I.control,P=I.formState.errors,S=I.getValues,N=I.handleSubmit,A=I.register,D=Object(v.d)({control:V,name:"cards",keyName:"key"}),B=D.append,q=D.fields,E=D.move,F=D.remove;return Object(g.jsxs)("form",{className:w.form,noValidate:!0,onSubmit:N(C,(function(e){e.title||e.description||e.visibility||void 0===e.cards||window.scrollTo({top:0})})),children:[Object.values(P).length>0&&Object(g.jsx)(j.a,{color:"error",children:"Please correct all errors."}),Object(g.jsxs)("div",{className:w.generalInfoContainer,children:[Object(g.jsx)(r.a,{label:"Title",required:!0,variant:T,defaultValue:"",inputProps:Object(a.a)({"aria-label":"title"},A("title")),error:void 0!==P.title,helperText:null===(t=P.title)||void 0===t?void 0:t.message}),Object(g.jsx)(r.a,{label:"Description",variant:T,defaultValue:"",inputProps:Object(a.a)({"aria-label":"description"},A("description")),error:void 0!==P.description,helperText:null===(i=P.description)||void 0===i?void 0:i.message}),Object(g.jsxs)(r.a,{label:"Visibility",select:!0,variant:T,defaultValue:null!==(h=null===k||void 0===k?void 0:k.visibility)&&void 0!==h?h:"PRIVATE",inputProps:Object(a.a)({"aria-label":"visibility"},A("visibility")),error:void 0!==P.visibility,helperText:null===(O=P.visibility)||void 0===O?void 0:O.message,children:[Object(g.jsx)(c.a,{value:"PRIVATE",children:"Private"}),Object(g.jsx)(c.a,{value:"PUBLIC",children:"Public"})]})]}),Object(g.jsx)(x.a,{useWindowScroll:!0,data:q,computeItemKey:function(e){return q[e].key},itemContent:function(e){var t,i,n,c,d,f,j,v,x,h,O,m,y,k,C,I,V,N,D=S("cards")[e].sides;return Object(g.jsx)("div",{className:e>0?w.editCardTileContainer:void 0,children:Object(g.jsxs)(s.a,{className:w.editCardTile,children:[Object(g.jsx)(l.a,{variant:"h6",component:"div",children:"Card ".concat(e+1)}),Object(g.jsxs)("div",{className:w.editCardTileFieldContainer,children:[Object(g.jsx)(r.a,{label:"Term",required:!0,multiline:!0,variant:T,defaultValue:D[0].text,inputProps:Object(a.a)({"aria-label":"term"},A("cards.".concat(e,".sides.0.text"))),error:void 0!==(null===(t=P.cards)||void 0===t||null===(i=t[e])||void 0===i||null===(n=i.sides)||void 0===n||null===(c=n[0])||void 0===c?void 0:c.text),helperText:null===(d=P.cards)||void 0===d||null===(f=d[e])||void 0===f||null===(j=f.sides)||void 0===j||null===(v=j[0])||void 0===v||null===(x=v.text)||void 0===x?void 0:x.message}),Object(g.jsx)(r.a,{label:"Definition",required:!0,multiline:!0,variant:T,defaultValue:D[1].text,inputProps:Object(a.a)({"aria-label":"definition"},A("cards.".concat(e,".sides.1.text"))),error:void 0!==(null===(h=P.cards)||void 0===h||null===(O=h[e])||void 0===O||null===(m=O.sides)||void 0===m||null===(y=m[1])||void 0===y?void 0:y.text),helperText:null===(k=P.cards)||void 0===k||null===(C=k[e])||void 0===C||null===(I=C.sides)||void 0===I||null===(V=I[1])||void 0===V||null===(N=V.text)||void 0===N?void 0:N.message})]}),Object(g.jsxs)("div",{className:w.editCardTileActionArea,children:[Object(g.jsx)(o.a,{"aria-label":"delete",onClick:function(){return F(e)},disabled:q.length<=1,children:Object(g.jsx)(u.a,{})}),Object(g.jsx)(o.a,{"aria-label":"move up",onClick:function(){return E(e,e-1)},disabled:e<=0,children:Object(g.jsx)(b.a,{})}),Object(g.jsx)(o.a,{"aria-label":"move down",onClick:function(){return E(e,e+1)},disabled:e>=q.length-1,children:Object(g.jsx)(p.a,{})})]})]})})}}),Object(g.jsx)(d.a,{variant:"outlined",fullWidth:!0,startIcon:Object(g.jsx)(f.a,{}),onClick:function(){return B({sides:[{text:""},{text:""}]})},children:"Add card"}),Object(g.jsx)("div",{className:w.saveButtonContainer,children:Object(g.jsx)(d.a,{type:"submit",variant:"contained",color:"primary",children:"Save"})})]})}},380:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return x}));var a=i(40),n=i(24),r=i(362),c=i(203),s=i(375),l=i(390),o=i(0),d=i(9),u=i(177),b=i(185),p=i(215),f=i(175),j=i(213),v=i(2);function x(){var e=Object(j.a)(),t=Object(d.i)().id,i=Object(o.useState)(!1),x=Object(n.a)(i,2),h=x[0],O=x[1],m=Object(d.g)(),g=Object(o.useState)(null),y=Object(n.a)(g,2),k=y[0],T=y[1],C=Object(o.useState)(!0),w=Object(n.a)(C,2),I=w[0],V=w[1],P=Object(o.useState)(!1),S=Object(n.a)(P,2),N=S[0],A=S[1],D=Object(o.useState)(""),B=Object(n.a)(D,2),q=B[0],E=B[1];return Object(o.useEffect)((function(){V(!0),f.a.findOne(t).then((function(e){return T(e)})).finally((function(){return V(!1)}))}),[t]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(r.a,{open:h,className:e.backdrop,children:Object(v.jsx)(c.a,{color:"inherit"})}),Object(v.jsx)(u.a,{loading:I,children:k&&Object(v.jsx)(s.a,{children:Object(v.jsx)(p.a,{variant:"outlined",defaultValues:k,onSubmit:function(e){O(!0),f.a.update(Object(a.a)({tags:[]},e)).then((function(){return m.goBack()})).catch((function(){E("Failed to update deck."),A(!0),O(!1)}))}})})}),Object(v.jsx)(l.a,{open:N,message:q,autoHideDuration:b.a,onClose:function(){return A(!1)}})]})}}}]);
//# sourceMappingURL=12.2da5a377.chunk.js.map