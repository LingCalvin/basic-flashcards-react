(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[11],{175:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a(28),n=a.n(i),r=a(24),c=a(47),s=a(31),l=a(32),o=a(40),u=a(46),d=new(function(){function e(t){Object(s.a)(this,e),this.http=t}return Object(l.a)(e,[{key:"create",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,i,c,s,l,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,i=t.description,c=t.visibility,s=t.cards,e.next=3,this.http.post("/decks",{authorId:o.a.getCurrentUser(),title:a,description:i,visibility:c,cards:s.map((function(e){var t=Object(r.a)(e.sides,2);return{frontText:t[0].text,backText:t[1].text}}))});case 3:return l=e.sent,u=l.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks/".concat(t));case 2:return a=e.sent,i=a.data,e.abrupt("return",b(i));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks",{params:t});case 2:return a=e.sent,i=a.data,e.abrupt("return",{decks:i.decks.map(b),count:i.count});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,i,c,s,l,u,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,i=t.title,c=t.description,s=t.visibility,l=t.cards,e.next=3,this.http.put("/decks/".concat(a),{authorId:o.a.getCurrentUser(),title:i,description:c,visibility:s,cards:l.map((function(e){var t=e.id,a=Object(r.a)(e.sides,2);return{id:t,frontText:a[0].text,backText:a[1].text}}))});case 3:return u=e.sent,d=u.data,e.abrupt("return",d);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.delete("/decks/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(u.a);function b(e){return{id:e.id,authorId:e.authorId,title:e.title,description:e.description,visibility:e.visibility,cards:e.cards.map((function(e){return{id:e.id,sides:[{text:e.frontText},{text:e.backText}]}})),tags:[]}}},177:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a(24),n=a(203),r=a(4),c=a(0),s=a(157),l=Object(s.a)({root:{display:"flex",justifyContent:"center"}}),o=a(2);function u(e){var t=e.loading,a=e.children,s=e.className,u=e.delay,d=void 0===u?300:u,b=l(),p=Object(c.useState)(d<=0),f=Object(i.a)(p,2),j=f[0],v=f[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){v(!0)}),d);return function(){return clearTimeout(e)}}),[d]),t?Object(o.jsx)("div",{className:Object(r.a)(b.root,s),children:j&&Object(o.jsx)(n.a,{})}):Object(o.jsx)(o.Fragment,{children:a})}},185:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var i=6e3},213:function(e,t,a){"use strict";var i=a(157),n=Object(i.a)((function(e){return{backdrop:{zIndex:e.zIndex.appBar+1}}}));t.a=n},215:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var i=a(24),n=a(39),r=a(200),c=a(384),s=a(171),l=a(162),o=a(369),u=a(182),d=a(199),b=a(129),p=a(130),f=a(161),j=a(0),v=a(51),x=Object(v.a)(j.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),h=Object(v.a)(j.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),O=Object(v.a)(j.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),m=a(157),g=Object(m.a)((function(e){return{root:{display:"flex",flexDirection:"column",gap:e.spacing(1),padding:e.spacing(2)},textFieldContainer:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e.spacing(2)},actionArea:{display:"flex",justifyContent:"flex-end"}}})),y=a(2);function k(e){var t=e.index,a=e.variant,i=e.defaultTerm,r=e.defaultDefinition,s=e.termError,l=e.definitionError,o=e.removeDisabled,u=e.moveUpDisabled,d=e.moveDownDisabled,v=e.onRemove,m=e.onMove,k=e.register,T=g(),C=Object(j.useCallback)((function(){return v(t)}),[t,v]),w=Object(j.useCallback)((function(){return m(t,t-1)}),[t,m]),D=Object(j.useCallback)((function(){return m(t,t+1)}),[t,m]);return Object(y.jsxs)(b.a,{className:T.root,children:[Object(y.jsx)(p.a,{variant:"h6",component:"div",children:"Card ".concat(t+1)}),Object(y.jsxs)("div",{className:T.textFieldContainer,children:[Object(y.jsx)(c.a,{label:"Term",required:!0,multiline:!0,variant:a,defaultValue:i,inputProps:Object(n.a)({"aria-label":"term"},k("cards.".concat(t,".sides.0.text"))),error:void 0!==s,helperText:s}),Object(y.jsx)(c.a,{label:"Definition",required:!0,multiline:!0,variant:a,defaultValue:r,inputProps:Object(n.a)({"aria-label":"definition"},k("cards.".concat(t,".sides.1.text"))),error:void 0!==l,helperText:l})]}),Object(y.jsxs)("div",{className:T.actionArea,children:[Object(y.jsx)(f.a,{"aria-label":"delete",onClick:C,disabled:o,children:Object(y.jsx)(x,{})}),Object(y.jsx)(f.a,{"aria-label":"move up",onClick:w,disabled:u,children:Object(y.jsx)(h,{})}),Object(y.jsx)(f.a,{"aria-label":"move down",onClick:D,disabled:d,children:Object(y.jsx)(O,{})})]})]})}var T=Object(j.memo)(k),C=Object(m.a)((function(e){return{form:{display:"flex",flexDirection:"column",gap:e.spacing(3),marginTop:e.spacing(3),marginBottom:e.spacing(3)},generalInfoContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2)},cardList:{display:"flex",flexDirection:"column",gap:e.spacing(2)},saveButtonContainer:{display:"flex",justifyContent:"flex-end"},editCardTileContainer:{paddingTop:e.spacing(2)}}})),w=d.b().shape({title:d.d().label("Title").required().max(255),description:d.d().label("Description").max(4096),visibility:d.d().label("Visibility").oneOf(["PRIVATE","PUBLIC"]),cards:d.a().of(d.b().shape({sides:d.a().of(d.b().shape({text:d.d().label("This").required().max(4096)}))}))});function D(e){var t,a,d,b,p=e.defaultValues,f=e.variant,j=e.onSubmit,v=C(),x=Object(u.e)({defaultValues:p,resolver:Object(r.a)(w)}),h=x.control,O=x.formState.errors,m=x.handleSubmit,g=x.register,k=Object(u.d)({control:h,name:"cards",keyName:"key"}),D=k.append,V=k.fields,I=k.move,E=k.remove;return Object(y.jsxs)("form",{className:v.form,noValidate:!0,onSubmit:m(j),children:[Object(y.jsxs)("div",{className:v.generalInfoContainer,children:[Object(y.jsx)(c.a,{label:"Title",required:!0,variant:f,defaultValue:"",inputProps:Object(n.a)({"aria-label":"title"},g("title")),error:void 0!==O.title,helperText:null===(t=O.title)||void 0===t?void 0:t.message}),Object(y.jsx)(c.a,{label:"Description",variant:f,defaultValue:"",inputProps:Object(n.a)({"aria-label":"description"},g("description")),error:void 0!==O.description,helperText:null===(a=O.description)||void 0===a?void 0:a.message}),Object(y.jsxs)(c.a,{label:"Visibility",select:!0,variant:f,defaultValue:null!==(d=null===p||void 0===p?void 0:p.visibility)&&void 0!==d?d:"PRIVATE",inputProps:Object(n.a)({"aria-label":"visibility"},g("visibility")),error:void 0!==O.visibility,helperText:null===(b=O.visibility)||void 0===b?void 0:b.message,children:[Object(y.jsx)(s.a,{value:"PRIVATE",children:"Private"}),Object(y.jsx)(s.a,{value:"PUBLIC",children:"Public"})]})]}),Object(y.jsx)("div",{className:v.cardList,children:V.map((function(e,t){var a,n,r,c,s,l,o,u,d,b,p=e.key,j=Object(i.a)(e.sides,2),v=j[0].text,x=j[1].text;return Object(y.jsx)(T,{index:t,variant:f,defaultTerm:v,defaultDefinition:x,termError:null===(a=O.cards)||void 0===a||null===(n=a[t])||void 0===n||null===(r=n.sides)||void 0===r||null===(c=r[0])||void 0===c||null===(s=c.text)||void 0===s?void 0:s.message,definitionError:null===(l=O.cards)||void 0===l||null===(o=l[t])||void 0===o||null===(u=o.sides)||void 0===u||null===(d=u[1])||void 0===d||null===(b=d.text)||void 0===b?void 0:b.message,onRemove:E,onMove:I,removeDisabled:V.length<=1,moveUpDisabled:0===t,moveDownDisabled:t>=V.length-1,register:g},p)}))}),Object(y.jsx)(l.a,{variant:"outlined",fullWidth:!0,startIcon:Object(y.jsx)(o.a,{}),onClick:function(){return D({sides:[{text:""},{text:""}]})},children:"Add card"}),Object(y.jsx)("div",{className:v.saveButtonContainer,children:Object(y.jsx)(l.a,{type:"submit",variant:"contained",color:"primary",children:"Save"})})]})}},376:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return x}));var i=a(39),n=a(24),r=a(361),c=a(203),s=a(371),l=a(385),o=a(0),u=a(9),d=a(177),b=a(185),p=a(215),f=a(175),j=a(213),v=a(2);function x(){var e=Object(j.a)(),t=Object(u.i)().id,a=Object(o.useState)(!1),x=Object(n.a)(a,2),h=x[0],O=x[1],m=Object(u.g)(),g=Object(o.useState)(null),y=Object(n.a)(g,2),k=y[0],T=y[1],C=Object(o.useState)(!0),w=Object(n.a)(C,2),D=w[0],V=w[1],I=Object(o.useState)(!1),E=Object(n.a)(I,2),P=E[0],S=E[1],N=Object(o.useState)(""),A=Object(n.a)(N,2),L=A[0],B=A[1];return Object(o.useEffect)((function(){V(!0),f.a.findOne(t).then((function(e){return T(e)})).finally((function(){return V(!1)}))}),[t]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(r.a,{open:h,className:e.backdrop,children:Object(v.jsx)(c.a,{color:"inherit"})}),Object(v.jsx)(d.a,{loading:D,children:k&&Object(v.jsx)(s.a,{children:Object(v.jsx)(p.a,{variant:"outlined",defaultValues:k,onSubmit:function(e){O(!0),f.a.update(Object(i.a)({tags:[]},e)).then((function(){return m.goBack()})).catch((function(){B("Failed to update deck."),S(!0),O(!1)}))}})})}),Object(v.jsx)(l.a,{open:P,message:L,autoHideDuration:b.a,onClose:function(){return S(!1)}})]})}}}]);
//# sourceMappingURL=11.e3c8d9dd.chunk.js.map