(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[11],{175:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n(28),c=n.n(a),r=n(24),i=n(47),o=n(31),s=n(32),u=n(39),l=n(46),d=new(function(){function t(e){Object(o.a)(this,t),this.http=e}return Object(s.a)(t,[{key:"create",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a,i,o,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.title,a=e.description,i=e.visibility,o=e.cards,t.next=3,this.http.post("/decks",{authorId:u.a.getCurrentUser(),title:n,description:a,visibility:i,cards:o.map((function(t){var e=Object(r.a)(t.sides,2);return{frontText:e[0].text,backText:e[1].text}}))});case 3:return s=t.sent,l=s.data,t.abrupt("return",l);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findOne",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks/".concat(e));case 2:return n=t.sent,a=n.data,t.abrupt("return",p(a));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks",{params:e});case 2:return n=t.sent,a=n.data,t.abrupt("return",{decks:a.decks.map(p),count:a.count});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a,i,o,s,l,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,a=e.title,i=e.description,o=e.visibility,s=e.cards,t.next=3,this.http.put("/decks/".concat(n),{authorId:u.a.getCurrentUser(),title:a,description:i,visibility:o,cards:s.map((function(t){var e=t.id,n=Object(r.a)(t.sides,2);return{id:e,frontText:n[0].text,backText:n[1].text}}))});case 3:return l=t.sent,d=l.data,t.abrupt("return",d);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.delete("/decks/".concat(e)));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(l.a);function p(t){return{id:t.id,authorId:t.authorId,title:t.title,description:t.description,visibility:t.visibility,cards:t.cards.map((function(t){return{id:t.id,sides:[{text:t.frontText},{text:t.backText}]}})),tags:[]}}},178:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(24),c=n(201),r=n(4),i=n(0),o=n(157),s=Object(o.a)({root:{display:"flex",justifyContent:"center"}}),u=n(2);function l(t){var e=t.loading,n=t.children,o=t.className,l=t.delay,d=void 0===l?300:l,p=s(),j=Object(i.useState)(d<=0),f=Object(a.a)(j,2),b=f[0],h=f[1];return Object(i.useEffect)((function(){var t=setTimeout((function(){h(!0)}),d);return function(){return clearTimeout(t)}}),[d]),e?Object(u.jsx)("div",{className:Object(r.a)(p.root,o),children:b&&Object(u.jsx)(c.a,{})}):Object(u.jsx)(u.Fragment,{children:n})}},180:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(200),c=n(25),r=n(2);function i(t){var e=t.to,n=t.color,i=t.children;return Object(r.jsx)(a.a,{component:c.b,to:e,color:n,children:i})}},182:function(t,e,n){"use strict";function a(t){return"/decks/".concat(t)}n.d(e,"a",(function(){return a}))},183:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=6e3},188:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(129),c=n(130),r=n(162),i=n(180),o=n(157),s=Object(o.a)((function(t){return{root:{cursor:"pointer",padding:t.spacing(2),"&:hover":{backgroundColor:t.palette.action.hover}},title:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},buttonBox:{display:"flex",justifyContent:"flex-end"},deleteButton:{color:t.palette.error.dark}}})),u=n(2);function l(t){var e=t.title,n=(t.deckId,t.numberOfCards),o=t.author,l=t.onClick,d=t.onDelete,p=t.onExport,j=t.onEdit,f=s();return Object(u.jsxs)(a.a,{className:f.root,onClick:l,children:[Object(u.jsx)(c.a,{className:f.title,variant:"h5",component:"div",children:e}),Object(u.jsx)(c.a,{children:"".concat(n," cards")}),o&&Object(u.jsxs)(c.a,{onClick:function(t){return t.stopPropagation()},component:"span",children:["By ",Object(u.jsx)(i.a,{to:"/users/".concat(o),children:o})]}),(d||p||j)&&Object(u.jsxs)("div",{className:f.buttonBox,children:[d&&Object(u.jsx)(r.a,{className:f.deleteButton,onClick:function(t){t.stopPropagation(),d()},children:"Delete"}),p&&Object(u.jsx)(r.a,{onClick:function(t){t.stopPropagation(),p()},children:"Export"}),j&&Object(u.jsx)(r.a,{color:"primary",onClick:function(t){t.stopPropagation(),j()},children:"Edit"})]})]})}},378:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return F}));var a=n(40),c=n(24),r=n(29),i=n(130),o=n(387),s=n(380),u=n(171),l=n(384),d=n(162),p=n(369),j=n(385),f=n(370),b=n(349),h=n(0),v=n(9),O=n(25),x=n(12);var k=n(78),m=0;var g=n(175),y=n(188),C=n(30),w=n(157),S=Object(w.a)((function(t){return{content:{display:"flex",flexDirection:"column",gap:t.spacing(2),padding:t.spacing(3)},paginationContainer:{display:"flex",flexDirection:"column",gap:t.spacing(2)},paginationControls:{display:"flex",justifyContent:"center"},deckList:{display:"flex",flexDirection:"column",gap:t.spacing(1)},sortAndSearchContainer:{display:"flex",gap:t.spacing(2)},fab:{position:"fixed",bottom:t.spacing(2),right:t.spacing(2)},buttonBox:{display:"flex",alignItems:"center",gap:t.spacing(1),marginLeft:"auto"},uploadInput:{display:"none"},snackbar:Object(C.a)({},t.breakpoints.down("xs"),{bottom:90})}})),T=n(182),D=n(33),I=n(360),N=n(363),B=n(364),E=n(365),A=n(366),L=n(2);function R(t){var e=t.deckTitle,n=t.open,a=t.onBackDropClick,c=t.onCancel,r=t.onDelete,i=t.onExited;return Object(L.jsxs)(I.a,{open:n,onBackdropClick:a,onExited:i,children:[Object(L.jsx)(N.a,{children:"Delete deck?"}),Object(L.jsxs)(B.a,{children:[Object(L.jsxs)(E.a,{children:['Are you sure you want to delete deck "',e,'"? This action cannot be undone.']}),Object(L.jsxs)(A.a,{children:[Object(L.jsx)(d.a,{color:"primary",autoFocus:!0,onClick:c,children:"Cancel"}),Object(L.jsx)(d.a,{color:"primary",onClick:r,children:"Delete"})]})]})]})}var U=n(183),P=n(178);function F(t){var e,n,C=t.pageSize,w=void 0===C?10:C,I=Object(r.a)(),N=Object(k.a)(),B=(null!==(e=Object(h.useContext)(D.a))&&void 0!==e?e:{}).id;if(!B)throw new Error("Unexpected nullish value: userId");var E=Object(h.useState)(!0),A=Object(c.a)(E,2),F=A[0],J=A[1],q=Object(h.useState)([]),z=Object(c.a)(q,2),H=z[0],M=z[1],Y=Object(h.useState)(0),G=Object(c.a)(Y,2),K=G[0],Q=G[1],V=Object(h.useState)(1),W=Object(c.a)(V,2),X=W[0],Z=W[1],$=Object(h.useState)(!1),_=Object(c.a)($,2),tt=_[0],et=_[1],nt=Object(v.g)(),at=S(),ct=Object(h.useRef)("unique-id-".concat(m++)).current,rt=Object(h.useState)(""),it=Object(c.a)(rt,2),ot=it[0],st=it[1],ut=function(t,e){var n=Object(h.useState)(t),a=Object(c.a)(n,2),r=a[0],i=a[1],o=Object(h.useRef)(Date.now());return Object(h.useEffect)((function(){var n=setTimeout((function(){i(t),o.current=Date.now()}),e-(Date.now()-o.current));return function(){return clearTimeout(n)}}),[t,e]),r}(ot,I.transitions.duration.short),lt=function(t){var e=JSON.stringify(t,void 0,2);!function(t){var e=window.URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download="",n.click(),window.URL.revokeObjectURL(e)}(new Blob([e],{type:"application/json"}))},dt=function(t){et(!0),g.a.findAll(Object(a.a)({},t)).then((function(t){M(t.decks),Q(t.count)})).finally((function(){et(!1),J(!1)}))};Object(h.useEffect)((function(){dt({authorId:[B],orderTitleBy:"asc",take:w,skip:(X-1)*w,caseInsensitive:!0,titleContains:ut||void 0})}),[X,w,ut,B]);var pt=Object(h.useState)(!1),jt=Object(c.a)(pt,2),ft=jt[0],bt=jt[1],ht=Object(h.useState)(null),vt=Object(c.a)(ht,2),Ot=vt[0],xt=vt[1],kt=Object(h.useState)(!1),mt=Object(c.a)(kt,2),gt=mt[0],yt=mt[1],Ct=Object(h.useState)(""),wt=Object(c.a)(Ct,2),St=wt[0],Tt=wt[1];return Object(L.jsxs)("div",{children:[Object(L.jsx)(R,{deckTitle:null!==(n=null===Ot||void 0===Ot?void 0:Ot.title)&&void 0!==n?n:"",open:ft,onBackDropClick:function(){return bt(!1)},onExited:function(){return xt(null)},onCancel:function(){return bt(!1)},onDelete:function(){var t;g.a.remove(null!==(t=null===Ot||void 0===Ot?void 0:Ot.id)&&void 0!==t?t:"").then((function(){return dt({authorId:[B],orderTitleBy:"asc",take:w,skip:(X-1)*w,caseInsensitive:!0,titleContains:ut||void 0})})).finally((function(){return bt(!1)}))}}),Object(L.jsxs)("div",{className:at.content,children:[Object(L.jsx)(i.a,{variant:"h2",children:"Your decks"}),Object(L.jsxs)("div",{className:at.sortAndSearchContainer,children:[Object(L.jsxs)("div",{children:[Object(L.jsx)(o.a,{id:ct,children:"Sort by"}),Object(L.jsx)(s.a,{labelId:ct,value:"title",children:Object(L.jsx)(u.a,{value:"title",children:"Title"})})]}),Object(L.jsx)(l.a,{label:"Search",inputProps:{"aria-label":"search"},value:ot,onChange:function(t){return st(t.target.value)}}),Object(L.jsxs)("div",{className:at.buttonBox,children:[Object(L.jsxs)("label",{children:[Object(L.jsx)(d.a,{color:"primary",component:"span",children:"Import"}),Object(L.jsx)("input",{type:"file",accept:"application/json",hidden:!0,onChange:function(t){var e;et(!0);var n=new FileReader,a=null===(e=t.target.files)||void 0===e?void 0:e[0];a&&(n.onload=function(e){var n,a=(null!==(n=e.target)&&void 0!==n?n:{}).result;if(a){var c=JSON.parse(a);g.a.create(c).then((function(){return dt({authorId:[B],orderTitleBy:"asc",take:w,skip:(X-1)*w,caseInsensitive:!0,titleContains:ut||void 0})})).then((function(){Tt("Deck successfully imported"),yt(!0)})).catch((function(){Tt("Failed to import deck."),yt(!0)})).finally((function(){t.target.value="",et(!1)}))}},n.readAsText(a))}})]}),!N&&Object(L.jsx)(d.a,{color:"primary",variant:"contained",component:O.b,to:x.a.deckAdd,children:"Create"})]})]}),Object(L.jsx)(P.a,{loading:F,children:Object(L.jsxs)("div",{className:at.paginationContainer,children:[Object(L.jsx)("div",{className:at.deckList,children:H.map((function(t){var e;return Object(L.jsx)(y.a,{deckId:null!==(e=t.id)&&void 0!==e?e:"",title:t.title,numberOfCards:t.cards.length,onClick:function(){var e;return nt.push(Object(T.a)(null!==(e=t.id)&&void 0!==e?e:""))},onDelete:function(){xt(t),bt(!0)},onExport:function(){return lt(t)},onEdit:function(){return nt.push("".concat(x.a.decks,"/").concat(t.id,"/edit"))}},t.id)}))}),K/w>1&&Object(L.jsx)("div",{className:at.paginationControls,children:Object(L.jsx)(b.a,{count:Math.ceil(K/w),page:X,onChange:function(t,e){return Z(e)},disabled:tt})})]})}),N&&Object(L.jsx)(p.a,{"aria-label":"create deck",className:at.fab,color:"primary",component:O.b,to:x.a.deckAdd,children:Object(L.jsx)(f.a,{})}),Object(L.jsx)(j.a,{className:at.snackbar,open:gt,message:St,autoHideDuration:U.a,onClose:function(){return yt(!1)}})]})]})}}}]);
//# sourceMappingURL=11.5ec7b7a9.chunk.js.map