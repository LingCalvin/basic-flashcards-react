(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[16],{125:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(49),r=n(349);function c(){var t=Object(a.a)();return Object(r.a)(t.breakpoints.down("xs"),{noSsr:!0})}},126:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n(387),r=n(348),c=n(20),i=n(347),o=Object(i.a)((function(t){return{root:{color:t.palette.getContrastText(t.palette.grey[600]),backgroundColor:t.palette.grey[600],display:"flex"},text:{fontSize:t.typography.h4.fontSize,fontWeight:t.typography.fontWeightBold}}})),s=n(2);function u(t){var e=t.username,n=t.className,i=t.typographyClassName,u=o();return Object(s.jsx)(a.a,{className:Object(c.a)(u.root,n),"aria-hidden":!0,children:void 0!==e&&Object(s.jsx)(r.a,{className:Object(c.a)(u.text,i),component:"div",children:e.substring(0,1).toLocaleUpperCase()})})}},127:function(t,e,n){"use strict";n.d(e,"a",(function(){return U}));var a=n(360),r=n(354),c=n(27),i=n(329),o=n(348),s=n(352),u=n(388),l=n(353),d=n(351),p=n(389),h=n(355),j=n(358),b=n(359),f=n(356),x=n(357),m=n(20),O=n(0),g=n(3),v=n(28),k=n(29),y=n(45),C=n(125),w=n(7),S=n(46),N=n(347),I=Object(N.a)((function(t){var e;return{button:{whiteSpace:"nowrap"},homeLink:{textTransform:"none"},titleContainer:{flexGrow:1},avatarButton:{padding:t.spacing(.5)},avatarText:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightBold},menuUsername:{textAlign:"center",padding:t.spacing(1),fontWeight:t.typography.fontWeightBold},searchBar:(e={},Object(S.a)(e,t.breakpoints.down("xs"),{width:"100%"}),Object(S.a)(e,"maxWidth","600px"),Object(S.a)(e,"width","100%"),e),searchBarInput:Object(S.a)({paddingLeft:t.spacing(1),paddingRight:t.spacing(1),paddingTop:t.spacing(.5),paddingBottom:t.spacing(.5),width:"100%"},t.breakpoints.down("xs"),{paddingRight:0}),toolbar:{gap:t.spacing(1)}}})),B=n(126),R=n(2);function T(){var t=I(),e=Object(g.h)(),n=Object(C.a)(),a=Object(O.useState)(null),S=Object(c.a)(a,2),N=S[0],T=S[1],L=Object(O.useContext)(k.a),U=function(){return T(null)},z=Object(g.g)(),E=Object(O.useState)(!1),A=Object(c.a)(E,2),D=A[0],W=A[1],F=Object(O.useState)(""),P=Object(c.a)(F,2),M=P[0],G=P[1],J=new URLSearchParams(e.search).get("from"),q=null!==J&&void 0!==J?J:w.a.home,V=Object(R.jsxs)(i.a,{open:null!==N,anchorEl:N,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},getContentAnchorEl:void 0,onClose:U,children:[Object(R.jsx)(o.a,{className:t.menuUsername,children:null===L||void 0===L?void 0:L.username.toLocaleUpperCase()}),Object(R.jsx)(s.a,{}),Object(R.jsx)(u.a,{onClick:function(){U(),z.push(w.a.accountSettings)},children:"Manage account"}),Object(R.jsx)(u.a,{onClick:function(){T(null),y.a.logOut().then((function(){return z.push(w.a.home)}))},children:"Sign out"})]}),H=Object(R.jsx)(B.a,{username:null===L||void 0===L?void 0:L.username}),K=y.a.isAuthenticated()?Object(R.jsx)(l.a,{"aria-label":"Account settings",className:t.avatarButton,color:"inherit",onClick:function(t){return T(t.currentTarget)},children:H}):Object(R.jsx)(r.a,{className:t.button,component:v.b,to:w.a.login,color:"inherit",children:"Log in"}),Q=Object(R.jsx)(d.a,{className:t.searchBar,children:Object(R.jsx)("form",{onSubmit:function(t){t.preventDefault(),z.push({pathname:w.a.deckSearch,search:"?from=".concat(encodeURIComponent(e.pathname),"&term=").concat(encodeURIComponent(M))})},children:Object(R.jsx)(p.a,{inputProps:{"aria-label":"Search"},value:M,autoFocus:n,fullWidth:n,placeholder:"Search",className:t.searchBarInput,startAdornment:Object(R.jsx)(h.a,{position:"start",children:Object(R.jsx)(f.a,{})}),endAdornment:n?Object(R.jsx)(h.a,{position:"end",children:Object(R.jsx)(l.a,{"aria-label":"close search",onClick:e.pathname===w.a.deckSearch?function(){W(!1),G(""),z.push(q)}:function(){W(!1),G("")},children:Object(R.jsx)(x.a,{})})}):void 0,onChange:function(t){return G(t.target.value)}})})}),X=Object(R.jsx)(j.a,{className:t.toolbar,children:e.pathname===w.a.deckSearch||D?Q:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{className:t.titleContainer,children:Object(R.jsx)(r.a,{color:"inherit",component:v.b,to:w.a.home,className:Object(m.a)(t.button,t.homeLink),children:Object(R.jsx)(o.a,{variant:"h6",component:"span",children:"Basic Flashcards"})})}),Object(R.jsx)(l.a,{"aria-label":"toggle search",color:"inherit",onClick:function(){return W(!0)},children:Object(R.jsx)(f.a,{})}),K]})}),Y=Object(R.jsxs)(j.a,{className:t.toolbar,children:[Object(R.jsx)("div",{className:t.titleContainer,children:Object(R.jsx)(r.a,{color:"inherit",component:v.b,to:w.a.home,className:Object(m.a)(t.button,t.homeLink),children:Object(R.jsx)(o.a,{variant:"h6",component:"span",children:"Basic Flashcards"})})}),Q,K]});return Object(R.jsxs)(b.a,{position:"sticky",children:[V,n?X:Y]})}var L=Object(N.a)((function(t){return{page:{display:"flex",flexDirection:"column",height:"100%"},content:{flexGrow:1,overflow:"auto"},skipLink:{position:"fixed",top:t.spacing(-10),left:t.spacing(2),color:t.palette.secondary.dark,backgroundColor:t.palette.background.paper,textTransform:"none",zIndex:t.zIndex.appBar+1,transition:t.transitions.create(["top"],{duration:t.transitions.duration.leavingScreen,easing:t.transitions.easing.easeOut}),"&:focus":{top:t.spacing(2),left:t.spacing(2),textDecoration:"underline",transition:t.transitions.create(["top"],{duration:t.transitions.duration.enteringScreen,easing:t.transitions.easing.easeIn})}}}}));function U(t){var e=t.skipLinks,n=t.children,c=L();return Object(R.jsxs)(R.Fragment,{children:[void 0!==e&&Object(R.jsx)(R.Fragment,{children:e.map((function(t,e){var n=t.fragment,i=t.text;return Object(R.jsx)(a.a,{className:c.skipLink,tabIndex:0,onClick:function(t){t.target.blur(),function(t){var e=document.querySelector("#".concat(t));null===e||void 0===e||e.scrollIntoView(),null===e||void 0===e||e.focus()}(n)},component:r.a,color:"secondary",disableRipple:!0,children:i},e)}))}),Object(R.jsxs)("div",{className:c.page,children:[Object(R.jsx)(T,{}),Object(R.jsx)("div",{className:c.content,children:n})]})]})}},132:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n(14),r=n.n(a),c=n(27),i=n(23),o=n(18),s=n(19),u=n(45),l=n(30),d=new(function(){function t(e){Object(o.a)(this,t),this.http=e}return Object(s.a)(t,[{key:"create",value:function(){var t=Object(i.a)(r.a.mark((function t(e){var n,a,i,o,s,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.title,a=e.description,i=e.visibility,o=e.cards,t.next=3,this.http.post("/decks",{authorId:u.a.getCurrentUser(),title:n,description:a,visibility:i,cards:o.map((function(t){var e=Object(c.a)(t.sides,2);return{frontText:e[0].text,backText:e[1].text}}))});case 3:return s=t.sent,l=s.data,t.abrupt("return",l);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findOne",value:function(){var t=Object(i.a)(r.a.mark((function t(e){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks/".concat(e));case 2:return n=t.sent,a=n.data,t.abrupt("return",p(a));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=Object(i.a)(r.a.mark((function t(e){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks",{params:e});case 2:return n=t.sent,a=n.data,t.abrupt("return",{decks:a.decks.map(p),count:a.count});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(i.a)(r.a.mark((function t(e){var n,a,i,o,s,l,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,a=e.title,i=e.description,o=e.visibility,s=e.cards,t.next=3,this.http.put("/decks/".concat(n),{authorId:u.a.getCurrentUser(),title:a,description:i,visibility:o,cards:s.map((function(t){var e=t.id,n=Object(c.a)(t.sides,2);return{id:e,frontText:n[0].text,backText:n[1].text}}))});case 3:return l=t.sent,d=l.data,t.abrupt("return",d);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=Object(i.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.delete("/decks/".concat(e)));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(l.a);function p(t){return{id:t.id,authorId:t.authorId,title:t.title,description:t.description,visibility:t.visibility,cards:t.cards.map((function(t){return{id:t.id,sides:[{text:t.frontText},{text:t.backText}]}})),tags:[]}}},135:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(27),r=n(179),c=n(20),i=n(0),o=n(347),s=Object(o.a)({root:{display:"flex",justifyContent:"center"}}),u=n(2);function l(t){var e=t.loading,n=t.children,o=t.className,l=t.delay,d=void 0===l?300:l,p=s(),h=Object(i.useState)(d<=0),j=Object(a.a)(h,2),b=j[0],f=j[1];return Object(i.useEffect)((function(){var t=setTimeout((function(){f(!0)}),d);return function(){return clearTimeout(t)}}),[d]),e?Object(u.jsx)("div",{className:Object(c.a)(p.root,o),children:b&&Object(u.jsx)(r.a,{})}):Object(u.jsx)(u.Fragment,{children:n})}},142:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(360),r=n(28),c=n(2);function i(t){var e=t.to,n=t.color,i=t.children;return Object(c.jsx)(a.a,{component:r.b,to:e,color:n,children:i})}},152:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(351),r=n(348),c=n(354),i=n(142);var o=n(347),s=Object(o.a)((function(t){return{root:{padding:t.spacing(2)},title:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},buttonBox:{display:"flex",justifyContent:"flex-end"},deleteButton:{color:t.palette.error.main}}})),u=n(2);function l(t){var e,n=t.title,o=t.deckId,l=t.numberOfCards,d=t.author,p=t.onDelete,h=t.onExport,j=t.onEdit,b=s();return Object(u.jsxs)(a.a,{className:b.root,children:[Object(u.jsx)(i.a,{to:(e=o,"/decks/".concat(e)),children:Object(u.jsx)(r.a,{className:b.title,variant:"h5",component:"div",children:n})}),Object(u.jsx)(r.a,{children:"".concat(l," cards")}),d&&Object(u.jsxs)(r.a,{onClick:function(t){return t.stopPropagation()},component:"span",children:["By ",Object(u.jsx)(i.a,{to:"/users/".concat(d),children:d})]}),(p||h||j)&&Object(u.jsxs)("div",{className:b.buttonBox,children:[p&&Object(u.jsx)(c.a,{className:b.deleteButton,onClick:function(t){t.stopPropagation(),p()},children:"Delete"}),h&&Object(u.jsx)(c.a,{onClick:function(t){t.stopPropagation(),h()},children:"Export"}),j&&Object(u.jsx)(c.a,{color:"primary",onClick:function(t){t.stopPropagation(),j()},children:"Edit"})]})]})}},385:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return m}));var a=n(27),r=n(327),c=n(0),i=n(3),o=n(135),s=n(152),u=n(7),l=n(132),d=n(347),p=Object(d.a)((function(t){return{content:{height:"100%",padding:t.spacing(3)},paginationContainer:{display:"flex",flexDirection:"column",gap:t.spacing(2)},paginationControls:{display:"flex",justifyContent:"center"},results:{display:"flex",flexDirection:"column",gap:t.spacing(1)},emptyResults:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"100%"},emptyResultsIcon:{fontSize:t.typography.h1.fontSize}}}));function h(t,e,n){return Math.max(t,Math.min(e,n))}var j=n(356),b=n(348),f=n(127),x=n(2);function m(){var t,e=p(),n=Object(c.useState)([]),d=Object(a.a)(n,2),m=d[0],O=d[1],g=Object(c.useState)(0),v=Object(a.a)(g,2),k=v[0],y=v[1],C=Object(i.h)().search,w=new URLSearchParams(C),S=null!==(t=w.get("term"))&&void 0!==t?t:"",N=w.get("pageSize"),I=h(1,50,N?+N:10),B=Math.max(1,Math.ceil(k/I)),R=w.get("page"),T=h(1,B,R?+R:1),L=w.get("from"),U=Object(c.useState)(!0),z=Object(a.a)(U,2),E=z[0],A=z[1],D=Object(i.g)();Object(c.useEffect)((function(){L&&(w.delete("from"),D.replace({search:w.toString()}))})),Object(c.useEffect)((function(){if(!L){if(!S)return A(!1),void O([]);A(!0),l.a.findAll({titleContains:S,caseInsensitive:!0,take:I,skip:(T-1)*I}).then((function(t){var e=t.decks,n=t.count;O(e),y(n)})).finally((function(){return A(!1)}))}}),[L,T,I,S]);var W=Object(x.jsxs)("main",{className:e.paginationContainer,children:[Object(x.jsx)(b.a,{variant:"h1",children:"Results"}),Object(x.jsx)("div",{className:e.results,children:m.map((function(t){var e,n;return Object(x.jsx)(s.a,{deckId:null!==(e=t.id)&&void 0!==e?e:"",title:t.title,numberOfCards:t.cards.length,author:null!==(n=t.authorId)&&void 0!==n?n:""},t.id)}))}),k/I>1&&Object(x.jsx)("div",{className:e.paginationControls,children:Object(x.jsx)(r.a,{count:B,page:T,onChange:function(t,e){return D.push({pathname:u.a.deckSearch,search:"?term=".concat(encodeURIComponent(S),"&page=").concat(encodeURIComponent(e),"&pageSize=").concat(encodeURIComponent(I))})},disabled:E})})]}),F=Object(x.jsxs)("div",{className:e.emptyResults,children:[Object(x.jsx)(j.a,{className:e.emptyResultsIcon}),Object(x.jsx)(b.a,{variant:"h4",component:"div",children:"No results found"}),Object(x.jsx)(b.a,{children:"Enter a new search and results will show up here."})]});return Object(x.jsx)(f.a,{skipLinks:[{fragment:"content",text:"Skip to content"}],children:Object(x.jsx)("main",{className:e.content,children:Object(x.jsx)(o.a,{loading:E,children:k>0?W:F})})})}}}]);
//# sourceMappingURL=16.a0d34260.chunk.js.map