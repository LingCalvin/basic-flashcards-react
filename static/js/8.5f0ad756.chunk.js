(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[8],{179:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var c=n(0),a=0;function r(){return Object(c.useRef)("unique-id-".concat(a++)).current}},180:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var c=n(40),a=n(387),r=n(179),i=n(2);function o(t){var e=Object(r.a)();return Object(i.jsx)(a.a,Object(c.a)({id:e},t))}},181:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var c=n(23),a=n.n(c),r=n(25),i=n(42),o=n(31),s=n(32),u=n(41),l=n(47),d=new(function(){function t(e){Object(o.a)(this,t),this.http=e}return Object(s.a)(t,[{key:"create",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,c,i,o,s,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.title,c=e.description,i=e.visibility,o=e.cards,t.next=3,this.http.post("/decks",{authorId:u.a.getCurrentUser(),title:n,description:c,visibility:i,cards:o.map((function(t){var e=Object(r.a)(t.sides,2);return{frontText:e[0].text,backText:e[1].text}}))});case 3:return s=t.sent,l=s.data,t.abrupt("return",l);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findOne",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks/".concat(e));case 2:return n=t.sent,c=n.data,t.abrupt("return",f(c));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks",{params:e});case 2:return n=t.sent,c=n.data,t.abrupt("return",{decks:c.decks.map(f),count:c.count});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,c,i,o,s,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,c=e.title,i=e.description,o=e.visibility,s=e.cards,t.next=3,this.http.put("/decks/".concat(n),{authorId:u.a.getCurrentUser(),title:c,description:i,visibility:o,cards:s.map((function(t){var e=t.id,n=Object(r.a)(t.sides,2);return{id:e,frontText:n[0].text,backText:n[1].text}}))});case 3:return l=t.sent,d=l.data,t.abrupt("return",d);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=Object(i.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.delete("/decks/".concat(e)));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(l.a);function f(t){return{id:t.id,authorId:t.authorId,title:t.title,description:t.description,visibility:t.visibility,cards:t.cards.map((function(t){return{id:t.id,sides:[{text:t.frontText},{text:t.backText}]}})),tags:[]}}},183:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var c=n(25),a=n(219),r=n(4),i=n(0),o=n(160),s=Object(o.a)({root:{display:"flex",justifyContent:"center"}}),u=n(2);function l(t){var e=t.loading,n=t.children,o=t.className,l=t.delay,d=void 0===l?300:l,f=s(),j=Object(i.useState)(d<=0),p=Object(c.a)(j,2),b=p[0],h=p[1];return Object(i.useEffect)((function(){var t=setTimeout((function(){h(!0)}),d);return function(){return clearTimeout(t)}}),[d]),e?Object(u.jsx)("div",{className:Object(r.a)(f.root,o),children:b&&Object(u.jsx)(a.a,{})}):Object(u.jsx)(u.Fragment,{children:n})}},185:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var c=6e3},188:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var c=n(220),a=n(26),r=n(2);function i(t){var e=t.to,n=t.color,i=t.children;return Object(r.jsx)(c.a,{component:a.b,to:e,color:n,children:i})}},195:function(t,e,n){"use strict";function c(t){return"/decks/".concat(t)}n.d(e,"a",(function(){return c}))},197:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var c=n(132),a=n(133),r=n(165),i=n(188),o=n(160),s=Object(o.a)((function(t){return{root:{cursor:"pointer",padding:t.spacing(2),"&:hover":{backgroundColor:t.palette.action.hover}},title:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},buttonBox:{display:"flex",justifyContent:"flex-end"},deleteButton:{color:t.palette.error.main}}})),u=n(2);function l(t){var e=t.title,n=(t.deckId,t.numberOfCards),o=t.author,l=t.onClick,d=t.onDelete,f=t.onExport,j=t.onEdit,p=s();return Object(u.jsxs)(c.a,{className:p.root,onClick:l,children:[Object(u.jsx)(a.a,{className:p.title,variant:"h5",component:"div",children:e}),Object(u.jsx)(a.a,{children:"".concat(n," cards")}),o&&Object(u.jsxs)(a.a,{onClick:function(t){return t.stopPropagation()},component:"span",children:["By ",Object(u.jsx)(i.a,{to:"/users/".concat(o),children:o})]}),(d||f||j)&&Object(u.jsxs)("div",{className:p.buttonBox,children:[d&&Object(u.jsx)(r.a,{className:p.deleteButton,onClick:function(t){t.stopPropagation(),d()},children:"Delete"}),f&&Object(u.jsx)(r.a,{onClick:function(t){t.stopPropagation(),f()},children:"Export"}),j&&Object(u.jsx)(r.a,{color:"primary",onClick:function(t){t.stopPropagation(),j()},children:"Edit"})]})]})}},389:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return R}));var c=n(40),a=n(25),r=n(30),i=n(133),o=n(175),s=n(165),u=n(380),l=n(359),d=n(372),f=n(357),j=n(0),p=n(9),b=n(26),h=n(12);var v=n(82),O=n(181),x=n(197),k=n(29),m=n(160),g=Object(m.a)((function(t){return{content:{display:"flex",flexDirection:"column",gap:t.spacing(2),padding:t.spacing(3)},paginationContainer:{display:"flex",flexDirection:"column",gap:t.spacing(2)},paginationControls:{display:"flex",justifyContent:"center"},deckList:{display:"flex",flexDirection:"column",gap:t.spacing(1)},sortAndSearchContainer:{display:"flex",gap:t.spacing(2)},fab:{position:"fixed",bottom:t.spacing(2),right:t.spacing(2)},buttonBox:{display:"flex",alignItems:"center",gap:t.spacing(1),marginLeft:"auto"},uploadInput:{display:"none"},snackbar:Object(k.a)({},t.breakpoints.down("xs"),{bottom:90})}})),y=n(195),C=n(33),w=n(375),S=n(376),T=n(377),D=n(378),I=n(379),N=n(2);function B(t){var e=t.deckTitle,n=t.open,c=t.onBackDropClick,a=t.onCancel,r=t.onDelete,i=t.onExited;return Object(N.jsxs)(w.a,{open:n,onBackdropClick:c,onExited:i,children:[Object(N.jsx)(S.a,{children:"Delete deck?"}),Object(N.jsxs)(T.a,{children:[Object(N.jsxs)(D.a,{children:['Are you sure you want to delete deck "',e,'"? This action cannot be undone.']}),Object(N.jsxs)(I.a,{children:[Object(N.jsx)(s.a,{color:"primary",autoFocus:!0,onClick:a,children:"Cancel"}),Object(N.jsx)(s.a,{color:"primary",onClick:r,children:"Delete"})]})]})]})}var E=n(185),A=n(183),L=n(180);function R(t){var e,n,k=t.pageSize,m=void 0===k?10:k,w=Object(r.a)(),S=Object(v.a)(),T=(null!==(e=Object(j.useContext)(C.a))&&void 0!==e?e:{}).id;if(!T)throw new Error("Unexpected nullish value: userId");var D=Object(j.useState)(!0),I=Object(a.a)(D,2),R=I[0],U=I[1],F=Object(j.useState)([]),J=Object(a.a)(F,2),P=J[0],q=J[1],z=Object(j.useState)(0),H=Object(a.a)(z,2),M=H[0],Y=H[1],G=Object(j.useState)(1),K=Object(a.a)(G,2),Q=K[0],V=K[1],W=Object(j.useState)(!1),X=Object(a.a)(W,2),Z=X[0],$=X[1],_=Object(p.g)(),tt=g(),et=Object(j.useState)(""),nt=Object(a.a)(et,2),ct=nt[0],at=nt[1],rt=function(t,e){var n=Object(j.useState)(t),c=Object(a.a)(n,2),r=c[0],i=c[1],o=Object(j.useRef)(Date.now());return Object(j.useEffect)((function(){var n=setTimeout((function(){i(t),o.current=Date.now()}),e-(Date.now()-o.current));return function(){return clearTimeout(n)}}),[t,e]),r}(ct,w.transitions.duration.short),it=function(t){var e=JSON.stringify(t,void 0,2);!function(t){var e=window.URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download="",n.click(),window.URL.revokeObjectURL(e)}(new Blob([e],{type:"application/json"}))},ot=function(t){$(!0),O.a.findAll(Object(c.a)({},t)).then((function(t){q(t.decks),Y(t.count)})).finally((function(){$(!1),U(!1)}))};Object(j.useEffect)((function(){ot({authorId:[T],orderTitleBy:"asc",take:m,skip:(Q-1)*m,caseInsensitive:!0,titleContains:rt||void 0})}),[Q,m,rt,T]);var st=Object(j.useState)(!1),ut=Object(a.a)(st,2),lt=ut[0],dt=ut[1],ft=Object(j.useState)(null),jt=Object(a.a)(ft,2),pt=jt[0],bt=jt[1],ht=Object(j.useState)(!1),vt=Object(a.a)(ht,2),Ot=vt[0],xt=vt[1],kt=Object(j.useState)(""),mt=Object(a.a)(kt,2),gt=mt[0],yt=mt[1];return Object(N.jsxs)("main",{children:[Object(N.jsx)(B,{deckTitle:null!==(n=null===pt||void 0===pt?void 0:pt.title)&&void 0!==n?n:"",open:lt,onBackDropClick:function(){return dt(!1)},onExited:function(){return bt(null)},onCancel:function(){return dt(!1)},onDelete:function(){var t;O.a.remove(null!==(t=null===pt||void 0===pt?void 0:pt.id)&&void 0!==t?t:"").then((function(){return ot({authorId:[T],orderTitleBy:"asc",take:m,skip:(Q-1)*m,caseInsensitive:!0,titleContains:rt||void 0})})).finally((function(){return dt(!1)}))}}),Object(N.jsxs)("div",{className:tt.content,children:[Object(N.jsx)(i.a,{variant:"h1",children:"Your decks"}),Object(N.jsxs)("div",{className:tt.sortAndSearchContainer,children:[Object(N.jsx)("div",{children:Object(N.jsx)(L.a,{label:"Sort by",variant:"outlined",select:!0,value:"title",children:Object(N.jsx)(o.a,{value:"title",children:"Title"})})}),Object(N.jsx)(L.a,{label:"Search",variant:"outlined",value:ct,onChange:function(t){return at(t.target.value)}}),Object(N.jsxs)("div",{className:tt.buttonBox,children:[Object(N.jsxs)("label",{children:[Object(N.jsx)(s.a,{color:"primary",component:"span",children:"Import"}),Object(N.jsx)("input",{type:"file",accept:"application/json",hidden:!0,onChange:function(t){var e;$(!0);var n=new FileReader,c=null===(e=t.target.files)||void 0===e?void 0:e[0];c&&(n.onload=function(e){var n,c=(null!==(n=e.target)&&void 0!==n?n:{}).result;if(c){var a=JSON.parse(c);O.a.create(a).then((function(){return ot({authorId:[T],orderTitleBy:"asc",take:m,skip:(Q-1)*m,caseInsensitive:!0,titleContains:rt||void 0})})).then((function(){yt("Deck successfully imported"),xt(!0)})).catch((function(){yt("Failed to import deck."),xt(!0)})).finally((function(){t.target.value="",$(!1)}))}},n.readAsText(c))}})]}),!S&&Object(N.jsx)(s.a,{color:"primary",variant:"contained",component:b.b,to:h.a.deckAdd,children:"Create"})]})]}),Object(N.jsx)(A.a,{loading:R,children:Object(N.jsxs)("div",{className:tt.paginationContainer,children:[Object(N.jsx)("div",{className:tt.deckList,children:P.map((function(t){var e;return Object(N.jsx)(x.a,{deckId:null!==(e=t.id)&&void 0!==e?e:"",title:t.title,numberOfCards:t.cards.length,onClick:function(){var e;return _.push(Object(y.a)(null!==(e=t.id)&&void 0!==e?e:""))},onDelete:function(){bt(t),dt(!0)},onExport:function(){return it(t)},onEdit:function(){return _.push("".concat(h.a.decks,"/").concat(t.id,"/edit"))}},t.id)}))}),M/m>1&&Object(N.jsx)("div",{className:tt.paginationControls,children:Object(N.jsx)(f.a,{count:Math.ceil(M/m),page:Q,onChange:function(t,e){return V(e)},disabled:Z})})]})}),S&&Object(N.jsx)(u.a,{"aria-label":"create deck",className:tt.fab,color:"secondary",component:b.b,to:h.a.deckAdd,children:Object(N.jsx)(d.a,{})}),Object(N.jsx)(l.a,{className:tt.snackbar,open:Ot,message:gt,autoHideDuration:E.a,onClose:function(){return xt(!1)}})]})]})}}}]);
//# sourceMappingURL=8.5f0ad756.chunk.js.map