(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[8],{177:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(28),i=a.n(n),r=a(24),c=a(47),s=a(31),l=a(32),d=a(40),o=a(46),u=new(function(){function e(t){Object(s.a)(this,e),this.http=t}return Object(l.a)(e,[{key:"create",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n,c,s,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.description,c=t.visibility,s=t.cards,e.next=3,this.http.post("/decks",{authorId:d.a.getCurrentUser(),title:a,description:n,visibility:c,cards:s.map((function(e){var t=Object(r.a)(e.sides,2);return{frontText:t[0].text,backText:t[1].text}}))});case 3:return l=e.sent,o=l.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks/".concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",b(n));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks",{params:t});case 2:return a=e.sent,n=a.data,e.abrupt("return",{decks:n.decks.map(b),count:n.count});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n,c,s,l,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.title,c=t.description,s=t.visibility,l=t.cards,e.next=3,this.http.put("/decks/".concat(a),{authorId:d.a.getCurrentUser(),title:n,description:c,visibility:s,cards:l.map((function(e){var t=e.id,a=Object(r.a)(e.sides,2);return{id:t,frontText:a[0].text,backText:a[1].text}}))});case 3:return o=e.sent,u=o.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.delete("/decks/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(o.a);function b(e){return{id:e.id,authorId:e.authorId,title:e.title,description:e.description,visibility:e.visibility,cards:e.cards.map((function(e){return{id:e.id,sides:[{text:e.frontText},{text:e.backText}]}})),tags:[]}}},178:function(e,t,a){"use strict";t.a="This field is required."},179:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(24),i=a(194),r=a(4),c=a(0),s=a(157),l=Object(s.a)({root:{display:"flex",justifyContent:"center"}}),d=a(2);function o(e){var t=e.loading,a=e.children,s=e.className,o=e.delay,u=void 0===o?300:o,b=l(),j=Object(c.useState)(u<=0),p=Object(n.a)(j,2),f=p[0],h=p[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){h(!0)}),u);return function(){return clearTimeout(e)}}),[u]),t?Object(d.jsx)("div",{className:Object(r.a)(b.root,s),children:f&&Object(d.jsx)(i.a,{})}):Object(d.jsx)(d.Fragment,{children:a})}},180:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),i=0;function r(){return Object(n.useRef)("unique-id-".concat(i++)).current}},184:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=6e3},195:function(e,t,a){"use strict";var n=a(157),i=Object(n.a)((function(e){return{backdrop:{zIndex:e.zIndex.appBar+1}}}));t.a=i},201:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var n=a(39),i=a(24),r=a(345),c=a(171),s=a(162),l=a(327),d=a(0),o=a(178),u=a(226),b=a(130),j=a(161),p=a(329),f=a(330),h=a(331),O=a(332),v=a(191),x=a(180),C=a(157),g=Object(C.a)((function(e){return{textFieldContainer:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e.spacing(2)},cardContent:{display:"flex",flexDirection:"column",gap:e.spacing(1),margin:e.spacing(2)},actionArea:{display:"flex",justifyContent:"flex-end"},header:{display:"flex",justifyContent:"space-between",alignItems:"center"}}})),y=a(2);function m(e){var t=e.index,a=e.frontText,c=e.backText,s=e.forceValidate,l=e.onCardSideChange,C=e.onDelete,m=e.onMoveUp,k=e.onMoveDown,T=g(),D=Object(x.a)(),S=Object(d.useState)(!1),w=Object(i.a)(S,2),I=w[0],P=w[1],N=a.length>0,V=(s||I)&&!N,A=Object(d.useState)(!1),M=Object(i.a)(A,2),B=M[0],R=M[1],q=c.length>0,F=(s||B)&&!q,U=Object(d.useCallback)((function(e){R(!0),l(t,0,e.target.value)}),[t,l]),E=Object(d.useCallback)((function(e){P(!0),l(t,1,e.target.value)}),[t,l]),L=Object(d.useCallback)((function(){null===C||void 0===C||C(t)}),[t,C]),W=Object(d.useCallback)((function(){null===m||void 0===m||m(t)}),[t,m]),z=Object(d.useCallback)((function(){null===k||void 0===k||k(t)}),[t,k]);return Object(y.jsx)(v.b,{draggableId:D,index:t,children:function(e){return Object(y.jsx)(u.a,Object(n.a)(Object(n.a)({},e.draggableProps),{},{innerRef:e.innerRef,children:Object(y.jsxs)("div",{className:T.cardContent,children:[Object(y.jsxs)("div",{className:T.header,children:[Object(y.jsx)(b.a,{variant:"h5",component:"div",children:"Card ".concat(t+1)}),Object(y.jsx)("div",Object(n.a)(Object(n.a)({"aria-label":"card reorder drag handle"},e.dragHandleProps),{},{style:{height:"24px"},children:Object(y.jsx)(p.a,{})}))]}),Object(y.jsxs)("div",{className:T.textFieldContainer,children:[Object(y.jsx)(r.a,{label:"Term",required:!0,variant:"outlined",multiline:!0,value:a,error:V,helperText:V?o.a:void 0,onChange:U,inputProps:{"aria-label":"term"}}),Object(y.jsx)(r.a,{label:"Definition",required:!0,variant:"outlined",multiline:!0,value:c,error:F,helperText:F?o.a:void 0,onChange:E,inputProps:{"aria-label":"definition"}})]}),Object(y.jsxs)("div",{className:T.actionArea,children:[Object(y.jsx)(j.a,{"aria-label":"delete",onClick:L,disabled:!C,children:Object(y.jsx)(f.a,{})}),Object(y.jsx)(j.a,{"aria-label":"move up",onClick:W,disabled:!m,children:Object(y.jsx)(h.a,{})}),Object(y.jsx)(j.a,{"aria-label":"move down",onClick:z,disabled:!k,children:Object(y.jsx)(O.a,{})})]})]})}))}})}var k=Object(d.memo)(m),T=Object(C.a)((function(e){return{form:{display:"flex",flexDirection:"column",gap:e.spacing(3),marginTop:e.spacing(3),marginBottom:e.spacing(3)},generalInfoContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2)},cardList:{display:"flex",flexDirection:"column",gap:e.spacing(2)},saveButtonContainer:{display:"flex",justifyContent:"flex-end"}}}));function D(e){var t=e.title,a=e.description,u=e.visibility,b=e.cards,j=e.onTitleChange,p=e.onDescriptionChange,f=e.onChangeVisibility,h=e.onChangeCardSide,O=e.onAddCard,C=e.onDeleteCard,g=e.onMoveCard,m=e.onSubmit,D=T(),S=Object(x.a)(),w=Object(d.useState)(!1),I=Object(i.a)(w,2),P=I[0],N=I[1],V=Object(d.useState)(!1),A=Object(i.a)(V,2),M=A[0],B=A[1],R=(M||P)&&0===t.length,q=Object(d.useCallback)((function(e){return g(e,e-1)}),[g]),F=Object(d.useCallback)((function(e){return g(e,e+1)}),[g]),U=Object(d.useCallback)((function(e){var t=e.source,a=e.destination;!a||a.droppableId===t.droppableId&&a.index===t.index||g(t.index,a.index)}),[g]);return Object(y.jsxs)("form",{noValidate:!0,className:D.form,onSubmit:function(e){e.preventDefault(),0===t.length||b.some((function(e){return e.sides.some((function(e){return 0===e.text.length}))}))?B(!0):m()},children:[Object(y.jsxs)("div",{className:D.generalInfoContainer,children:[Object(y.jsx)(r.a,{required:!0,variant:"outlined",label:"Title",fullWidth:!0,error:R,helperText:R?o.a:void 0,value:t,onChange:function(e){N(!0),j(e.target.value)},inputProps:{"aria-label":"title"}}),Object(y.jsx)(r.a,{variant:"outlined",label:"Description",fullWidth:!0,value:a,onChange:function(e){return p(e.target.value)},inputProps:{"aria-label":"description"}}),Object(y.jsxs)(r.a,{variant:"outlined",value:u,onChange:function(e){return f(e.target.value)},select:!0,label:"Visibility",inputProps:{"aria-label":"visibility"},children:[Object(y.jsx)(c.a,{value:"PRIVATE",children:"Private"}),Object(y.jsx)(c.a,{value:"PUBLIC",children:"Public"})]})]}),Object(y.jsx)(v.a,{onDragEnd:U,children:Object(y.jsx)(v.c,{droppableId:S,children:function(e){return Object(y.jsxs)("div",Object(n.a)(Object(n.a)({className:D.cardList,ref:e.innerRef},e.droppableProps),{},{children:[b.map((function(e,t){var a=Object(i.a)(e.sides,2),n=a[0].text,r=a[1].text;return Object(y.jsx)(k,{forceValidate:M,index:t,frontText:n,backText:r,onCardSideChange:h,onDelete:b.length>1?C:void 0,onMoveUp:0!==t?q:void 0,onMoveDown:t!==b.length-1?F:void 0},t)})),e.placeholder]}))}})}),Object(y.jsx)(s.a,{variant:"outlined",fullWidth:!0,startIcon:Object(y.jsx)(l.a,{}),onClick:O,children:"Add card"}),Object(y.jsx)("div",{className:D.saveButtonContainer,children:Object(y.jsx)(s.a,{type:"submit",variant:"contained",color:"primary",children:"Save"})})]})}},202:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(24),i=a(0),r=a(182),c=a(39);function s(e,t,a){var n=Object(r.a)(e);return n.splice(a,0,n.splice(t,1)[0]),n}function l(e,t,a){return[].concat(Object(r.a)(e.slice(0,t)),[a],Object(r.a)(e.slice(t+1)))}function d(e,t){switch(t.type){case"set":return t.payload;case"addCard":return e?Object(c.a)(Object(c.a)({},e),{},{cards:[].concat(Object(r.a)(e.cards),[{sides:[{text:""},{text:""}]}])}):e;case"deleteCard":return e?Object(c.a)(Object(c.a)({},e),{},{cards:[].concat(Object(r.a)(e.cards.slice(0,t.payload)),Object(r.a)(e.cards.slice(t.payload+1)))}):e;case"moveCard":return e?Object(c.a)(Object(c.a)({},e),{},{cards:s(e.cards,t.payload.source,t.payload.destination)}):e;case"changeCard":return e?Object(c.a)(Object(c.a)({},e),{},{cards:l(e.cards,t.payload.index,t.payload.value)}):null;case"changeCardSideText":if(!e)return e;var a=Object(c.a)({},e.cards[t.payload.index]);return a.sides[t.payload.side]={text:t.payload.value},Object(c.a)(Object(c.a)({},e),{},{cards:l(e.cards,t.payload.index,a)});case"changeDescription":return e?Object(c.a)(Object(c.a)({},e),{},{description:t.payload}):e;case"changeTitle":return e?Object(c.a)(Object(c.a)({},e),{},{title:t.payload}):e;case"changeVisibility":return e?Object(c.a)(Object(c.a)({},e),{},{visibility:t.payload}):e}}function o(e){var t=Object(i.useReducer)(d,null),a=Object(n.a)(t,2),r=a[0],c=a[1],s=Object(i.useCallback)((function(e){return c({type:"set",payload:e})}),[]),l=Object(i.useCallback)((function(e){return c({type:"changeTitle",payload:e})}),[]),o=Object(i.useCallback)((function(e){return c({type:"changeDescription",payload:e})}),[]),u=Object(i.useCallback)((function(e){return c({type:"changeVisibility",payload:e})}),[]),b=Object(i.useCallback)((function(e,t,a){return c({type:"changeCardSideText",payload:{index:e,side:t,value:a}})}),[]),j=Object(i.useCallback)((function(){return c({type:"addCard"})}),[]),p=Object(i.useCallback)((function(e){return c({type:"deleteCard",payload:e})}),[]),f=Object(i.useCallback)((function(e,t){return c({type:"moveCard",payload:{source:e,destination:t}})}),[]);return{deck:r,deckDispatch:c,setDeck:s,handleTitleChange:l,handleDescriptionChange:o,handleVisibilityChange:u,handleChangeCardSideText:b,handleAddCard:j,handleCardDelete:p,handleMoveCard:f}}},336:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return O}));var n=a(24),i=a(319),r=a(194),c=a(227),s=a(346),l=a(0),d=a(9),o=a(179),u=a(184),b=a(201),j=a(177),p=a(195),f=a(202),h=a(2);function O(){var e=Object(p.a)(),t=Object(d.i)().id,a=Object(l.useState)(!1),O=Object(n.a)(a,2),v=O[0],x=O[1],C=Object(d.g)(),g=Object(f.a)(null),y=g.deck,m=g.setDeck,k=g.handleTitleChange,T=g.handleDescriptionChange,D=g.handleVisibilityChange,S=g.handleChangeCardSideText,w=g.handleAddCard,I=g.handleCardDelete,P=g.handleMoveCard,N=Object(l.useState)(!0),V=Object(n.a)(N,2),A=V[0],M=V[1],B=Object(l.useState)(!1),R=Object(n.a)(B,2),q=R[0],F=R[1],U=Object(l.useState)(""),E=Object(n.a)(U,2),L=E[0],W=E[1];return Object(l.useEffect)((function(){M(!0),j.a.findOne(t).then((function(e){return m(e)})).finally((function(){return M(!1)}))}),[t,m]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(i.a,{open:v,className:e.backdrop,children:Object(h.jsx)(r.a,{color:"inherit"})}),Object(h.jsx)(o.a,{loading:A,children:y&&Object(h.jsx)(c.a,{children:Object(h.jsx)(b.a,{title:y.title,description:y.description,visibility:y.visibility,cards:y.cards,onTitleChange:k,onDescriptionChange:T,onChangeVisibility:D,onChangeCardSide:S,onAddCard:w,onDeleteCard:I,onMoveCard:P,onSubmit:function(){x(!0),j.a.update({id:y.id,title:y.title,description:y.description,visibility:y.visibility,cards:y.cards,tags:[]}).then((function(){return C.goBack()})).catch((function(){W("Failed to update deck."),F(!0),x(!1)}))}})})}),Object(h.jsx)(s.a,{open:q,message:L,autoHideDuration:u.a,onClose:function(){return F(!1)}})]})}}}]);
//# sourceMappingURL=8.d2b7f3db.chunk.js.map