(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[8],{180:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(0),c=0;function r(){return Object(a.useRef)("unique-id-".concat(c++)).current}},181:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(40),c=n(387),r=n(180),i=n(2);function o(t){var e=Object(r.a)();return Object(i.jsx)(c.a,Object(a.a)({id:e},t))}},182:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n(23),c=n.n(a),r=n(25),i=n(42),o=n(32),s=n(33),u=n(41),l=n(47),d=new(function(){function t(e){Object(o.a)(this,t),this.http=e}return Object(s.a)(t,[{key:"create",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a,i,o,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.title,a=e.description,i=e.visibility,o=e.cards,t.next=3,this.http.post("/decks",{authorId:u.a.getCurrentUser(),title:n,description:a,visibility:i,cards:o.map((function(t){var e=Object(r.a)(t.sides,2);return{frontText:e[0].text,backText:e[1].text}}))});case 3:return s=t.sent,l=s.data,t.abrupt("return",l);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findOne",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks/".concat(e));case 2:return n=t.sent,a=n.data,t.abrupt("return",j(a));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks",{params:e});case 2:return n=t.sent,a=n.data,t.abrupt("return",{decks:a.decks.map(j),count:a.count});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a,i,o,s,l,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,a=e.title,i=e.description,o=e.visibility,s=e.cards,t.next=3,this.http.put("/decks/".concat(n),{authorId:u.a.getCurrentUser(),title:a,description:i,visibility:o,cards:s.map((function(t){var e=t.id,n=Object(r.a)(t.sides,2);return{id:e,frontText:n[0].text,backText:n[1].text}}))});case 3:return l=t.sent,d=l.data,t.abrupt("return",d);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.delete("/decks/".concat(e)));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(l.a);function j(t){return{id:t.id,authorId:t.authorId,title:t.title,description:t.description,visibility:t.visibility,cards:t.cards.map((function(t){return{id:t.id,sides:[{text:t.frontText},{text:t.backText}]}})),tags:[]}}},184:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(25),c=n(219),r=n(4),i=n(0),o=n(161),s=Object(o.a)({root:{display:"flex",justifyContent:"center"}}),u=n(2);function l(t){var e=t.loading,n=t.children,o=t.className,l=t.delay,d=void 0===l?300:l,j=s(),p=Object(i.useState)(d<=0),f=Object(a.a)(p,2),b=f[0],h=f[1];return Object(i.useEffect)((function(){var t=setTimeout((function(){h(!0)}),d);return function(){return clearTimeout(t)}}),[d]),e?Object(u.jsx)("div",{className:Object(r.a)(j.root,o),children:b&&Object(u.jsx)(c.a,{})}):Object(u.jsx)(u.Fragment,{children:n})}},186:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=6e3},189:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(220),c=n(26),r=n(2);function i(t){var e=t.to,n=t.color,i=t.children;return Object(r.jsx)(a.a,{component:c.b,to:e,color:n,children:i})}},197:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(134),c=n(133),r=n(166),i=n(189);var o=n(161),s=Object(o.a)((function(t){return{root:{padding:t.spacing(2)},title:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},buttonBox:{display:"flex",justifyContent:"flex-end"},deleteButton:{color:t.palette.error.main}}})),u=n(2);function l(t){var e,n=t.title,o=t.deckId,l=t.numberOfCards,d=t.author,j=t.onDelete,p=t.onExport,f=t.onEdit,b=s();return Object(u.jsxs)(a.a,{className:b.root,children:[Object(u.jsx)(i.a,{to:(e=o,"/decks/".concat(e)),children:Object(u.jsx)(c.a,{className:b.title,variant:"h5",component:"div",children:n})}),Object(u.jsx)(c.a,{children:"".concat(l," cards")}),d&&Object(u.jsxs)(c.a,{onClick:function(t){return t.stopPropagation()},component:"span",children:["By ",Object(u.jsx)(i.a,{to:"/users/".concat(d),children:d})]}),(j||p||f)&&Object(u.jsxs)("div",{className:b.buttonBox,children:[j&&Object(u.jsx)(r.a,{className:b.deleteButton,onClick:function(t){t.stopPropagation(),j()},children:"Delete"}),p&&Object(u.jsx)(r.a,{onClick:function(t){t.stopPropagation(),p()},children:"Export"}),f&&Object(u.jsx)(r.a,{color:"primary",onClick:function(t){t.stopPropagation(),f()},children:"Edit"})]})]})}},389:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return L}));var a=n(40),c=n(25),r=n(31),i=n(133),o=n(177),s=n(166),u=n(380),l=n(359),d=n(372),j=n(357),p=n(0),f=n(9),b=n(26),h=n(12);var v=n(82),O=n(182),x=n(197),k=n(30),m=n(161),y=Object(m.a)((function(t){return{content:{display:"flex",flexDirection:"column",gap:t.spacing(2),padding:t.spacing(3)},paginationContainer:{display:"flex",flexDirection:"column",gap:t.spacing(2)},paginationControls:{display:"flex",justifyContent:"center"},deckList:{display:"flex",flexDirection:"column",gap:t.spacing(1)},sortAndSearchContainer:{display:"flex",gap:t.spacing(2)},fab:{position:"fixed",bottom:t.spacing(2),right:t.spacing(2)},buttonBox:{display:"flex",alignItems:"center",gap:t.spacing(1),marginLeft:"auto"},uploadInput:{display:"none"},snackbar:Object(k.a)({},t.breakpoints.down("xs"),{bottom:90})}})),g=n(34),C=n(375),w=n(376),S=n(377),T=n(378),D=n(379),I=n(2);function N(t){var e=t.deckTitle,n=t.open,a=t.onBackDropClick,c=t.onCancel,r=t.onDelete,i=t.onExited;return Object(I.jsxs)(C.a,{open:n,onBackdropClick:a,onExited:i,children:[Object(I.jsx)(w.a,{children:"Delete deck?"}),Object(I.jsxs)(S.a,{children:[Object(I.jsxs)(T.a,{children:['Are you sure you want to delete deck "',e,'"? This action cannot be undone.']}),Object(I.jsxs)(D.a,{children:[Object(I.jsx)(s.a,{color:"primary",autoFocus:!0,onClick:c,children:"Cancel"}),Object(I.jsx)(s.a,{color:"primary",onClick:r,children:"Delete"})]})]})]})}var B=n(186),E=n(184),A=n(181);function L(t){var e,n,k=t.pageSize,m=void 0===k?10:k,C=Object(r.a)(),w=Object(v.a)(),S=(null!==(e=Object(p.useContext)(g.a))&&void 0!==e?e:{}).id;if(!S)throw new Error("Unexpected nullish value: userId");var T=Object(p.useState)(!0),D=Object(c.a)(T,2),L=D[0],R=D[1],U=Object(p.useState)([]),F=Object(c.a)(U,2),J=F[0],P=F[1],q=Object(p.useState)(0),z=Object(c.a)(q,2),H=z[0],M=z[1],Y=Object(p.useState)(1),G=Object(c.a)(Y,2),K=G[0],Q=G[1],V=Object(p.useState)(!1),W=Object(c.a)(V,2),X=W[0],Z=W[1],$=Object(f.g)(),_=y(),tt=Object(p.useState)(""),et=Object(c.a)(tt,2),nt=et[0],at=et[1],ct=function(t,e){var n=Object(p.useState)(t),a=Object(c.a)(n,2),r=a[0],i=a[1],o=Object(p.useRef)(Date.now());return Object(p.useEffect)((function(){var n=setTimeout((function(){i(t),o.current=Date.now()}),e-(Date.now()-o.current));return function(){return clearTimeout(n)}}),[t,e]),r}(nt,C.transitions.duration.short),rt=function(t){var e=JSON.stringify(t,void 0,2);!function(t){var e=window.URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download="",n.click(),window.URL.revokeObjectURL(e)}(new Blob([e],{type:"application/json"}))},it=function(t){Z(!0),O.a.findAll(Object(a.a)({},t)).then((function(t){P(t.decks),M(t.count)})).finally((function(){Z(!1),R(!1)}))};Object(p.useEffect)((function(){it({authorId:[S],orderTitleBy:"asc",take:m,skip:(K-1)*m,caseInsensitive:!0,titleContains:ct||void 0})}),[K,m,ct,S]);var ot=Object(p.useState)(!1),st=Object(c.a)(ot,2),ut=st[0],lt=st[1],dt=Object(p.useState)(null),jt=Object(c.a)(dt,2),pt=jt[0],ft=jt[1],bt=Object(p.useState)(!1),ht=Object(c.a)(bt,2),vt=ht[0],Ot=ht[1],xt=Object(p.useState)(""),kt=Object(c.a)(xt,2),mt=kt[0],yt=kt[1];return Object(I.jsxs)("main",{children:[Object(I.jsx)(N,{deckTitle:null!==(n=null===pt||void 0===pt?void 0:pt.title)&&void 0!==n?n:"",open:ut,onBackDropClick:function(){return lt(!1)},onExited:function(){return ft(null)},onCancel:function(){return lt(!1)},onDelete:function(){var t;O.a.remove(null!==(t=null===pt||void 0===pt?void 0:pt.id)&&void 0!==t?t:"").then((function(){return it({authorId:[S],orderTitleBy:"asc",take:m,skip:(K-1)*m,caseInsensitive:!0,titleContains:ct||void 0})})).finally((function(){return lt(!1)}))}}),Object(I.jsxs)("div",{className:_.content,children:[Object(I.jsx)(i.a,{variant:"h1",children:"Your decks"}),Object(I.jsxs)("div",{className:_.sortAndSearchContainer,children:[Object(I.jsx)("div",{children:Object(I.jsx)(A.a,{label:"Sort by",variant:"outlined",select:!0,value:"title",children:Object(I.jsx)(o.a,{value:"title",children:"Title"})})}),Object(I.jsx)(A.a,{label:"Search",variant:"outlined",value:nt,onChange:function(t){return at(t.target.value)}}),Object(I.jsxs)("div",{className:_.buttonBox,children:[Object(I.jsxs)("label",{children:[Object(I.jsx)(s.a,{color:"primary",component:"span",children:"Import"}),Object(I.jsx)("input",{type:"file",accept:"application/json",hidden:!0,onChange:function(t){var e;Z(!0);var n=new FileReader,a=null===(e=t.target.files)||void 0===e?void 0:e[0];a&&(n.onload=function(e){var n,a=(null!==(n=e.target)&&void 0!==n?n:{}).result;if(a){var c=JSON.parse(a);O.a.create(c).then((function(){return it({authorId:[S],orderTitleBy:"asc",take:m,skip:(K-1)*m,caseInsensitive:!0,titleContains:ct||void 0})})).then((function(){yt("Deck successfully imported"),Ot(!0)})).catch((function(){yt("Failed to import deck."),Ot(!0)})).finally((function(){t.target.value="",Z(!1)}))}},n.readAsText(a))}})]}),!w&&Object(I.jsx)(s.a,{color:"primary",variant:"contained",component:b.b,to:h.a.deckAdd,children:"Create"})]})]}),Object(I.jsx)(E.a,{loading:L,children:Object(I.jsxs)("div",{className:_.paginationContainer,children:[Object(I.jsx)("div",{className:_.deckList,children:J.map((function(t){var e;return Object(I.jsx)(x.a,{deckId:null!==(e=t.id)&&void 0!==e?e:"",title:t.title,numberOfCards:t.cards.length,onDelete:function(){ft(t),lt(!0)},onExport:function(){return rt(t)},onEdit:function(){return $.push("".concat(h.a.decks,"/").concat(t.id,"/edit"))}},t.id)}))}),H/m>1&&Object(I.jsx)("div",{className:_.paginationControls,children:Object(I.jsx)(j.a,{count:Math.ceil(H/m),page:K,onChange:function(t,e){return Q(e)},disabled:X})})]})}),w&&Object(I.jsx)(u.a,{"aria-label":"create deck",className:_.fab,color:"secondary",component:b.b,to:h.a.deckAdd,children:Object(I.jsx)(d.a,{})}),Object(I.jsx)(l.a,{className:_.snackbar,open:vt,message:mt,autoHideDuration:B.a,onClose:function(){return Ot(!1)}})]})]})}}}]);
//# sourceMappingURL=8.c190272a.chunk.js.map