(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[11],{177:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(28),i=a.n(n),r=a(24),c=a(47),s=a(31),l=a(32),d=a(40),o=a(46),u=new(function(){function e(t){Object(s.a)(this,e),this.http=t}return Object(l.a)(e,[{key:"create",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n,c,s,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.description,c=t.visibility,s=t.cards,e.next=3,this.http.post("/decks",{authorId:d.a.getCurrentUser(),title:a,description:n,visibility:c,cards:s.map((function(e){var t=Object(r.a)(e.sides,2);return{frontText:t[0].text,backText:t[1].text}}))});case 3:return l=e.sent,o=l.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks/".concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",b(n));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAll",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("/decks",{params:t});case 2:return a=e.sent,n=a.data,e.abrupt("return",{decks:n.decks.map(b),count:n.count});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n,c,s,l,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.title,c=t.description,s=t.visibility,l=t.cards,e.next=3,this.http.put("/decks/".concat(a),{authorId:d.a.getCurrentUser(),title:n,description:c,visibility:s,cards:l.map((function(e){var t=e.id,a=Object(r.a)(e.sides,2);return{id:t,frontText:a[0].text,backText:a[1].text}}))});case 3:return o=e.sent,u=o.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.delete("/decks/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(o.a);function b(e){return{id:e.id,authorId:e.authorId,title:e.title,description:e.description,visibility:e.visibility,cards:e.cards.map((function(e){return{id:e.id,sides:[{text:e.frontText},{text:e.backText}]}})),tags:[]}}},178:function(e,t,a){"use strict";t.a="This field is required."},180:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),i=0;function r(){return Object(n.useRef)("unique-id-".concat(i++)).current}},184:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=6e3},195:function(e,t,a){"use strict";var n=a(157),i=Object(n.a)((function(e){return{backdrop:{zIndex:e.zIndex.appBar+1}}}));t.a=i},201:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var n=a(39),i=a(24),r=a(345),c=a(171),s=a(162),l=a(327),d=a(0),o=a(178),u=a(226),b=a(130),p=a(161),j=a(329),h=a(330),f=a(331),O=a(332),v=a(191),x=a(180),C=a(157),g=Object(C.a)((function(e){return{textFieldContainer:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e.spacing(2)},cardContent:{display:"flex",flexDirection:"column",gap:e.spacing(1),margin:e.spacing(2)},actionArea:{display:"flex",justifyContent:"flex-end"},header:{display:"flex",justifyContent:"space-between",alignItems:"center"}}})),y=a(2);function m(e){var t=e.index,a=e.frontText,c=e.backText,s=e.forceValidate,l=e.onCardSideChange,C=e.onDelete,m=e.onMoveUp,k=e.onMoveDown,T=g(),D=Object(x.a)(),w=Object(d.useState)(!1),S=Object(i.a)(w,2),I=S[0],P=S[1],V=a.length>0,A=(s||I)&&!V,N=Object(d.useState)(!1),M=Object(i.a)(N,2),R=M[0],B=M[1],q=c.length>0,U=(s||R)&&!q,E=Object(d.useCallback)((function(e){B(!0),l(t,0,e.target.value)}),[t,l]),F=Object(d.useCallback)((function(e){P(!0),l(t,1,e.target.value)}),[t,l]),L=Object(d.useCallback)((function(){null===C||void 0===C||C(t)}),[t,C]),W=Object(d.useCallback)((function(){null===m||void 0===m||m(t)}),[t,m]),z=Object(d.useCallback)((function(){null===k||void 0===k||k(t)}),[t,k]);return Object(y.jsx)(v.b,{draggableId:D,index:t,children:function(e){return Object(y.jsx)(u.a,Object(n.a)(Object(n.a)({},e.draggableProps),{},{innerRef:e.innerRef,children:Object(y.jsxs)("div",{className:T.cardContent,children:[Object(y.jsxs)("div",{className:T.header,children:[Object(y.jsx)(b.a,{variant:"h5",component:"div",children:"Card ".concat(t+1)}),Object(y.jsx)("div",Object(n.a)(Object(n.a)({"aria-label":"card reorder drag handle"},e.dragHandleProps),{},{style:{height:"24px"},children:Object(y.jsx)(j.a,{})}))]}),Object(y.jsxs)("div",{className:T.textFieldContainer,children:[Object(y.jsx)(r.a,{label:"Term",required:!0,variant:"outlined",multiline:!0,value:a,error:A,helperText:A?o.a:void 0,onChange:E,inputProps:{"aria-label":"term"}}),Object(y.jsx)(r.a,{label:"Definition",required:!0,variant:"outlined",multiline:!0,value:c,error:U,helperText:U?o.a:void 0,onChange:F,inputProps:{"aria-label":"definition"}})]}),Object(y.jsxs)("div",{className:T.actionArea,children:[Object(y.jsx)(p.a,{"aria-label":"delete",onClick:L,disabled:!C,children:Object(y.jsx)(h.a,{})}),Object(y.jsx)(p.a,{"aria-label":"move up",onClick:W,disabled:!m,children:Object(y.jsx)(f.a,{})}),Object(y.jsx)(p.a,{"aria-label":"move down",onClick:z,disabled:!k,children:Object(y.jsx)(O.a,{})})]})]})}))}})}var k=Object(d.memo)(m),T=Object(C.a)((function(e){return{form:{display:"flex",flexDirection:"column",gap:e.spacing(3),marginTop:e.spacing(3),marginBottom:e.spacing(3)},generalInfoContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2)},cardList:{display:"flex",flexDirection:"column",gap:e.spacing(2)},saveButtonContainer:{display:"flex",justifyContent:"flex-end"}}}));function D(e){var t=e.title,a=e.description,u=e.visibility,b=e.cards,p=e.onTitleChange,j=e.onDescriptionChange,h=e.onChangeVisibility,f=e.onChangeCardSide,O=e.onAddCard,C=e.onDeleteCard,g=e.onMoveCard,m=e.onSubmit,D=T(),w=Object(x.a)(),S=Object(d.useState)(!1),I=Object(i.a)(S,2),P=I[0],V=I[1],A=Object(d.useState)(!1),N=Object(i.a)(A,2),M=N[0],R=N[1],B=(M||P)&&0===t.length,q=Object(d.useCallback)((function(e){return g(e,e-1)}),[g]),U=Object(d.useCallback)((function(e){return g(e,e+1)}),[g]),E=Object(d.useCallback)((function(e){var t=e.source,a=e.destination;!a||a.droppableId===t.droppableId&&a.index===t.index||g(t.index,a.index)}),[g]);return Object(y.jsxs)("form",{noValidate:!0,className:D.form,onSubmit:function(e){e.preventDefault(),0===t.length||b.some((function(e){return e.sides.some((function(e){return 0===e.text.length}))}))?R(!0):m()},children:[Object(y.jsxs)("div",{className:D.generalInfoContainer,children:[Object(y.jsx)(r.a,{required:!0,variant:"outlined",label:"Title",fullWidth:!0,error:B,helperText:B?o.a:void 0,value:t,onChange:function(e){V(!0),p(e.target.value)},inputProps:{"aria-label":"title"}}),Object(y.jsx)(r.a,{variant:"outlined",label:"Description",fullWidth:!0,value:a,onChange:function(e){return j(e.target.value)},inputProps:{"aria-label":"description"}}),Object(y.jsxs)(r.a,{variant:"outlined",value:u,onChange:function(e){return h(e.target.value)},select:!0,label:"Visibility",inputProps:{"aria-label":"visibility"},children:[Object(y.jsx)(c.a,{value:"PRIVATE",children:"Private"}),Object(y.jsx)(c.a,{value:"PUBLIC",children:"Public"})]})]}),Object(y.jsx)(v.a,{onDragEnd:E,children:Object(y.jsx)(v.c,{droppableId:w,children:function(e){return Object(y.jsxs)("div",Object(n.a)(Object(n.a)({className:D.cardList,ref:e.innerRef},e.droppableProps),{},{children:[b.map((function(e,t){var a=Object(i.a)(e.sides,2),n=a[0].text,r=a[1].text;return Object(y.jsx)(k,{forceValidate:M,index:t,frontText:n,backText:r,onCardSideChange:f,onDelete:b.length>1?C:void 0,onMoveUp:0!==t?q:void 0,onMoveDown:t!==b.length-1?U:void 0},t)})),e.placeholder]}))}})}),Object(y.jsx)(s.a,{variant:"outlined",fullWidth:!0,startIcon:Object(y.jsx)(l.a,{}),onClick:O,children:"Add card"}),Object(y.jsx)("div",{className:D.saveButtonContainer,children:Object(y.jsx)(s.a,{type:"submit",variant:"contained",color:"primary",children:"Save"})})]})}},202:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(24),i=a(0),r=a(182),c=a(39);function s(e,t,a){var n=Object(r.a)(e);return n.splice(a,0,n.splice(t,1)[0]),n}function l(e,t,a){return[].concat(Object(r.a)(e.slice(0,t)),[a],Object(r.a)(e.slice(t+1)))}function d(e,t){switch(t.type){case"set":return t.payload;case"addCard":return e?Object(c.a)(Object(c.a)({},e),{},{cards:[].concat(Object(r.a)(e.cards),[{sides:[{text:""},{text:""}]}])}):e;case"deleteCard":return e?Object(c.a)(Object(c.a)({},e),{},{cards:[].concat(Object(r.a)(e.cards.slice(0,t.payload)),Object(r.a)(e.cards.slice(t.payload+1)))}):e;case"moveCard":return e?Object(c.a)(Object(c.a)({},e),{},{cards:s(e.cards,t.payload.source,t.payload.destination)}):e;case"changeCard":return e?Object(c.a)(Object(c.a)({},e),{},{cards:l(e.cards,t.payload.index,t.payload.value)}):null;case"changeCardSideText":if(!e)return e;var a=Object(c.a)({},e.cards[t.payload.index]);return a.sides[t.payload.side]={text:t.payload.value},Object(c.a)(Object(c.a)({},e),{},{cards:l(e.cards,t.payload.index,a)});case"changeDescription":return e?Object(c.a)(Object(c.a)({},e),{},{description:t.payload}):e;case"changeTitle":return e?Object(c.a)(Object(c.a)({},e),{},{title:t.payload}):e;case"changeVisibility":return e?Object(c.a)(Object(c.a)({},e),{},{visibility:t.payload}):e}}function o(e){var t=Object(i.useReducer)(d,null),a=Object(n.a)(t,2),r=a[0],c=a[1],s=Object(i.useCallback)((function(e){return c({type:"set",payload:e})}),[]),l=Object(i.useCallback)((function(e){return c({type:"changeTitle",payload:e})}),[]),o=Object(i.useCallback)((function(e){return c({type:"changeDescription",payload:e})}),[]),u=Object(i.useCallback)((function(e){return c({type:"changeVisibility",payload:e})}),[]),b=Object(i.useCallback)((function(e,t,a){return c({type:"changeCardSideText",payload:{index:e,side:t,value:a}})}),[]),p=Object(i.useCallback)((function(){return c({type:"addCard"})}),[]),j=Object(i.useCallback)((function(e){return c({type:"deleteCard",payload:e})}),[]),h=Object(i.useCallback)((function(e,t){return c({type:"moveCard",payload:{source:e,destination:t}})}),[]);return{deck:r,deckDispatch:c,setDeck:s,handleTitleChange:l,handleDescriptionChange:o,handleVisibilityChange:u,handleChangeCardSideText:b,handleAddCard:p,handleCardDelete:j,handleMoveCard:h}}},328:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return f}));var n=a(24),i=a(319),r=a(194),c=a(227),s=a(346),l=a(0),d=a(9),o=a(184),u=a(201),b=a(202),p=a(177),j=a(195),h=a(2);function f(){var e=Object(j.a)(),t=Object(b.a)({title:"",description:"",visibility:"PRIVATE",cards:[{sides:[{text:""},{text:""}]}],tags:[]}),a=t.deck,f=t.handleTitleChange,O=t.handleDescriptionChange,v=t.handleVisibilityChange,x=t.handleChangeCardSideText,C=t.handleAddCard,g=t.handleCardDelete,y=t.handleMoveCard;if(!a)throw new Error;var m=Object(l.useState)(!1),k=Object(n.a)(m,2),T=k[0],D=k[1],w=Object(d.g)(),S=Object(l.useState)(!1),I=Object(n.a)(S,2),P=I[0],V=I[1],A=Object(l.useState)(""),N=Object(n.a)(A,2),M=N[0],R=N[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(i.a,{open:T,className:e.backdrop,children:Object(h.jsx)(r.a,{color:"inherit"})}),Object(h.jsx)(c.a,{children:Object(h.jsx)(u.a,{title:a.title,description:a.description,visibility:a.visibility,cards:a.cards,onTitleChange:f,onDescriptionChange:O,onChangeVisibility:v,onChangeCardSide:x,onAddCard:C,onDeleteCard:g,onMoveCard:y,onSubmit:function(){D(!0),p.a.create({title:a.title,description:a.description,visibility:a.visibility,cards:a.cards,tags:a.tags}).then((function(){return w.goBack()})).catch((function(){R("Failed to save deck."),V(!0),D(!1)}))}})}),Object(h.jsx)(s.a,{open:P,message:M,autoHideDuration:o.a,onClose:function(){return V(!1)}})]})}}}]);
//# sourceMappingURL=11.f16624d3.chunk.js.map