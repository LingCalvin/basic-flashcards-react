(this["webpackJsonpbasic-flashcards-react"]=this["webpackJsonpbasic-flashcards-react"]||[]).push([[11],{177:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n(28),c=n.n(a),r=n(24),i=n(48),o=n(31),s=n(32),u=n(39),l=n(46),d=new(function(){function t(e){Object(o.a)(this,t),this.http=e}return Object(s.a)(t,[{key:"create",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a,i,o,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.title,a=e.description,i=e.visibility,o=e.cards,t.next=3,this.http.post("/decks",{authorId:u.a.getCurrentUser(),title:n,description:a,visibility:i,cards:o.map((function(t){var e=Object(r.a)(t.sides,2);return{frontText:e[0].text,backText:e[1].text}}))});case 3:return s=t.sent,l=s.data,t.abrupt("return",l);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findOne",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks/".concat(e));case 2:return n=t.sent,a=n.data,t.abrupt("return",p(a));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"findAll",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.get("/decks",{params:e});case 2:return n=t.sent,a=n.data,t.abrupt("return",{decks:a.decks.map(p),count:a.count});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(i.a)(c.a.mark((function t(e){var n,a,i,o,s,l,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,a=e.title,i=e.description,o=e.visibility,s=e.cards,t.next=3,this.http.put("/decks/".concat(n),{authorId:u.a.getCurrentUser(),title:a,description:i,visibility:o,cards:s.map((function(t){var e=t.id,n=Object(r.a)(t.sides,2);return{id:e,frontText:n[0].text,backText:n[1].text}}))});case 3:return l=t.sent,d=l.data,t.abrupt("return",d);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"remove",value:function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.delete("/decks/".concat(e)));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(l.a);function p(t){return{id:t.id,authorId:t.authorId,title:t.title,description:t.description,visibility:t.visibility,cards:t.cards.map((function(t){return{id:t.id,sides:[{text:t.frontText},{text:t.backText}]}})),tags:[]}}},178:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(190),c=n(25),r=n(2);function i(t){var e=t.to,n=t.color,i=t.children;return Object(r.jsx)(a.a,{component:c.b,to:e,color:n,children:i})}},181:function(t,e,n){"use strict";function a(t){return"/decks/".concat(t)}n.d(e,"a",(function(){return a}))},184:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(129),c=n(130),r=n(162),i=n(178),o=n(157),s=Object(o.a)((function(t){return{root:{cursor:"pointer",padding:t.spacing(2),"&:hover":{backgroundColor:t.palette.action.hover}},title:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},buttonBox:{display:"flex",justifyContent:"flex-end"},deleteButton:{color:t.palette.error.dark}}})),u=n(2);function l(t){var e=t.title,n=(t.deckId,t.numberOfCards),o=t.author,l=t.onClick,d=t.onDelete,p=t.onExport,f=t.onEdit,b=s();return Object(u.jsxs)(a.a,{className:b.root,onClick:l,children:[Object(u.jsx)(c.a,{className:b.title,variant:"h5",component:"div",children:e}),Object(u.jsx)(c.a,{children:"".concat(n," cards")}),o&&Object(u.jsxs)(c.a,{onClick:function(t){return t.stopPropagation()},component:"span",children:["By ",Object(u.jsx)(i.a,{to:"/users/".concat(o),children:o})]}),(d||p||f)&&Object(u.jsxs)("div",{className:b.buttonBox,children:[d&&Object(u.jsx)(r.a,{className:b.deleteButton,onClick:function(t){t.stopPropagation(),d()},children:"Delete"}),p&&Object(u.jsx)(r.a,{onClick:function(t){t.stopPropagation(),p()},children:"Export"}),f&&Object(u.jsx)(r.a,{color:"primary",onClick:function(t){t.stopPropagation(),f()},children:"Edit"})]})]})}},186:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=6e3},332:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return P}));var a=n(40),c=n(24),r=n(29),i=n(130),o=n(341),s=n(334),u=n(171),l=n(338),d=n(162),p=n(323),f=n(339),b=n(324),j=n(303),h=n(0),v=n(9),O=n(25),x=n(12);var k=n(78),m=0;var g=n(177),y=n(184),C=n(30),w=n(157),S=Object(w.a)((function(t){return{content:{display:"flex",flexDirection:"column",gap:t.spacing(2),padding:t.spacing(3)},paginationContainer:{display:"flex",flexDirection:"column",gap:t.spacing(2)},paginationControls:{display:"flex",justifyContent:"center"},deckList:{display:"flex",flexDirection:"column",gap:t.spacing(1)},sortAndSearchContainer:{display:"flex",gap:t.spacing(2)},fab:{position:"fixed",bottom:t.spacing(2),right:t.spacing(2)},buttonBox:{display:"flex",alignItems:"center",gap:t.spacing(1),marginLeft:"auto"},uploadInput:{display:"none"},snackbar:Object(C.a)({},t.breakpoints.down("xs"),{bottom:90})}})),D=n(181),I=n(33),T=n(314),B=n(317),N=n(318),E=n(319),A=n(320),L=n(2);function R(t){var e=t.deckTitle,n=t.open,a=t.onBackDropClick,c=t.onCancel,r=t.onDelete,i=t.onExited;return Object(L.jsxs)(T.a,{open:n,onBackdropClick:a,onExited:i,children:[Object(L.jsx)(B.a,{children:"Delete deck?"}),Object(L.jsxs)(N.a,{children:[Object(L.jsxs)(E.a,{children:['Are you sure you want to delete deck "',e,'"? This action cannot be undone.']}),Object(L.jsxs)(A.a,{children:[Object(L.jsx)(d.a,{color:"primary",autoFocus:!0,onClick:c,children:"Cancel"}),Object(L.jsx)(d.a,{color:"primary",onClick:r,children:"Delete"})]})]})]})}var U=n(186);function P(t){var e,n,C=t.pageSize,w=void 0===C?10:C,T=Object(r.a)(),B=Object(k.a)(),N=(null!==(e=Object(h.useContext)(I.a))&&void 0!==e?e:{}).id;if(!N)throw new Error("Unexpected nullish value: userId");var E=Object(h.useState)([]),A=Object(c.a)(E,2),P=A[0],J=A[1],F=Object(h.useState)(0),q=Object(c.a)(F,2),z=q[0],H=q[1],M=Object(h.useState)(1),Y=Object(c.a)(M,2),G=Y[0],K=Y[1],Q=Object(h.useState)(!1),V=Object(c.a)(Q,2),W=V[0],X=V[1],Z=Object(v.g)(),$=S(),_=Object(h.useRef)("unique-id-".concat(m++)).current,tt=Object(h.useState)(""),et=Object(c.a)(tt,2),nt=et[0],at=et[1],ct=function(t,e){var n=Object(h.useState)(t),a=Object(c.a)(n,2),r=a[0],i=a[1],o=Object(h.useRef)(Date.now());return Object(h.useEffect)((function(){var n=setTimeout((function(){i(t),o.current=Date.now()}),e-(Date.now()-o.current));return function(){return clearTimeout(n)}}),[t,e]),r}(nt,T.transitions.duration.short),rt=function(t){var e=JSON.stringify(t,void 0,2);!function(t){var e=window.URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download="",n.click(),window.URL.revokeObjectURL(e)}(new Blob([e],{type:"application/json"}))},it=function(t){X(!0),g.a.findAll(Object(a.a)({},t)).then((function(t){J(t.decks),H(t.count)})).finally((function(){return X(!1)}))};Object(h.useEffect)((function(){it({authorId:[N],orderTitleBy:"asc",take:w,skip:(G-1)*w,caseInsensitive:!0,titleContains:ct||void 0})}),[G,w,ct,N]);var ot=Object(h.useState)(!1),st=Object(c.a)(ot,2),ut=st[0],lt=st[1],dt=Object(h.useState)(null),pt=Object(c.a)(dt,2),ft=pt[0],bt=pt[1],jt=Object(h.useState)(!1),ht=Object(c.a)(jt,2),vt=ht[0],Ot=ht[1],xt=Object(h.useState)(""),kt=Object(c.a)(xt,2),mt=kt[0],gt=kt[1];return Object(L.jsxs)("div",{children:[Object(L.jsx)(R,{deckTitle:null!==(n=null===ft||void 0===ft?void 0:ft.title)&&void 0!==n?n:"",open:ut,onBackDropClick:function(){return lt(!1)},onExited:function(){return bt(null)},onCancel:function(){return lt(!1)},onDelete:function(){var t;g.a.remove(null!==(t=null===ft||void 0===ft?void 0:ft.id)&&void 0!==t?t:"").then((function(){return it({authorId:[N],orderTitleBy:"asc",take:w,skip:(G-1)*w,caseInsensitive:!0,titleContains:ct||void 0})})).finally((function(){return lt(!1)}))}}),Object(L.jsxs)("div",{className:$.content,children:[Object(L.jsx)(i.a,{variant:"h2",children:"Your decks"}),Object(L.jsxs)("div",{className:$.sortAndSearchContainer,children:[Object(L.jsxs)("div",{children:[Object(L.jsx)(o.a,{id:_,children:"Sort by"}),Object(L.jsx)(s.a,{labelId:_,value:"title",children:Object(L.jsx)(u.a,{value:"title",children:"Title"})})]}),Object(L.jsx)(l.a,{label:"Search",inputProps:{"aria-label":"search"},value:nt,onChange:function(t){return at(t.target.value)}}),Object(L.jsxs)("div",{className:$.buttonBox,children:[Object(L.jsxs)("label",{children:[Object(L.jsx)(d.a,{color:"primary",component:"span",children:"Import"}),Object(L.jsx)("input",{type:"file",accept:"application/json",hidden:!0,onChange:function(t){var e;X(!0);var n=new FileReader,a=null===(e=t.target.files)||void 0===e?void 0:e[0];a&&(n.onload=function(e){var n,a=(null!==(n=e.target)&&void 0!==n?n:{}).result;if(a){var c=JSON.parse(a);g.a.create(c).then((function(){return it({authorId:[N],orderTitleBy:"asc",take:w,skip:(G-1)*w,caseInsensitive:!0,titleContains:ct||void 0})})).then((function(){gt("Deck successfully imported"),Ot(!0)})).catch((function(){gt("Failed to import deck."),Ot(!0)})).finally((function(){t.target.value="",X(!1)}))}},n.readAsText(a))}})]}),!B&&Object(L.jsx)(d.a,{color:"primary",variant:"contained",component:O.b,to:x.a.deckAdd,children:"Create"})]})]}),Object(L.jsxs)("div",{className:$.paginationContainer,children:[Object(L.jsx)("div",{className:$.deckList,children:P.map((function(t){var e;return Object(L.jsx)(y.a,{deckId:null!==(e=t.id)&&void 0!==e?e:"",title:t.title,numberOfCards:t.cards.length,onClick:function(){var e;return Z.push(Object(D.a)(null!==(e=t.id)&&void 0!==e?e:""))},onDelete:function(){bt(t),lt(!0)},onExport:function(){return rt(t)},onEdit:function(){return Z.push("".concat(x.a.decks,"/").concat(t.id,"/edit"))}},t.id)}))}),z/w>1&&Object(L.jsx)("div",{className:$.paginationControls,children:Object(L.jsx)(j.a,{count:Math.ceil(z/w),page:G,onChange:function(t,e){return K(e)},disabled:W})})]}),B&&Object(L.jsx)(p.a,{"aria-label":"create deck",className:$.fab,color:"primary",component:O.b,to:x.a.deckAdd,children:Object(L.jsx)(b.a,{})}),Object(L.jsx)(f.a,{className:$.snackbar,open:vt,message:mt,autoHideDuration:U.a,onClose:function(){return Ot(!1)}})]})]})}}}]);
//# sourceMappingURL=11.991aa3af.chunk.js.map